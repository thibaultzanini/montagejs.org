<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <title>Component composition using Montage</title>

    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600">
    <link rel="stylesheet" href="/stylesheets/normalize.css">
    <link rel="stylesheet" href="/stylesheets/base.css">
    <link rel="stylesheet" href="/stylesheets/pages.css">
    <link rel="stylesheet" href="/stylesheets/solarized.css">
    <link rel="stylesheet" href="/stylesheets/teaser.css">
    
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    
    
  </head>


<body>
  <header class="header">
    <div class="header-container">
        <a class="logo " href="/">Home</a>
        
        <input id="nav-toggle" class="nav-toggle nav-toggle--main" type="checkbox">
        <label class="nav-toggleLabel nav-toggleLabel--main" for="nav-toggle" onclick></label>
        
        <nav class="nav">
            <a class="nav-item " href="/">Home</a>
            <a class="nav-item " href="/apps">Apps</a>
            <a class="nav-item " href="/docs">Docs</a>
            <a class="nav-item " href="/api/AbstractButton.html">API</a>
            <a class="nav-item " href="/community">Community</a>
            <a class="nav-item " href="/blog">Blog</a>
            <a class="nav-item nav-item--teaser " href="/reveal/"></a>
            <a class="nav-item nav-item--fork" href="https://github.com/montagejs/montage" target="_blank">Source</a>
        </nav>
        
    </div>
</header>


      <section id="docs" class="docs withSubnav">
        
        <div class="wrapper">
            
                
<input id="subnav-toggle" class="nav-toggle nav-toggle--sub" type="checkbox">
<label class="nav-toggleLabel nav-toggleLabel--sub" for="subnav-toggle" onclick></label>

            <nav class="subnav">
    
    <details open>
        <summary>Quick Start</summary>
        <a href="montagejs-setup.html" >Set Up</a>
        <a href="hello-montagejs.html" >Hello MontageJS</a>
    </details>

    <details open>
        <summary>Demos</summary>
        <a href="montagejs-examples.html" >Examples</a>
        <a href="http://montagejs.github.com/mfiddle/" target="_blank">Mfiddle</a>
        
    </details>

    <details open>
        <summary>Concepts</summary>
        <a href="montagejs-templates.html" >Templates</a>
        <a href="exploring-components.html" >Components</a>
        <a href="serialization-format.html" >Declaration</a>
        <a href="montagejs-objects.html" >Objects</a>
        <a href="data-binding.html" >Data Binding</a>
        <a href="event-handling.html" >Event Handling</a>
        <a href="draw-cycle.html" >Draw Cycle</a>
    </details>

    <details open>
        <summary>Tutorials</summary>
        <a href="tutorial-reddit-client-with-montagejs.html" >Reddit Client with MontageJS</a>
        <a href="tutorial-3d-applications-with-montagejs.html" >Building 3D Applications</a>
    </details>
    
    <details open>
        <summary>UI Containers</summary>
        <a href="repetition.html" >Repetition</a>
        <a href="substitution.html" >Substitution</a>
        <a href="overlay.html" >Overlay</a>
    </details>    

    <details open>
        <summary>UI Sets</summary>
        <a href="themes.html" >Introduction</a>
        <a href="theme-digit-components.html" >Digit</a>
        <a href="theme-matte-components.html" >Matte</a>
        <a href="theme-native-components.html" >Native</a>
    </details>
    
    <details open>
        <summary>Tools</summary>
        <a href="tools-minit.html" >Minit</a>
        <a href="tools-mop.html" >Mop</a>
    </details>
    
    <details open>
        <summary>Help</summary>
        <a href="faq.html" >FAQ</a>
        <a href="troubleshooting.html" >Troubleshooting</a>
    </details>
    
</nav>

            
            <div class="main">
            
                <a href="https://github.com/montagejs/montagejs.org/tree/gh-pages/docs/wip-composition.md" class="edit">Improve this</a>
                
                <article class="content">
                    <h1 id="component-composition-using-montage">Component composition using Montage.</h1>

<p>The way to create and compose the ui for your application using montage is primarily by expressing this in the markup of your templates.</p>

<h2 id="the-repetition">The Repetition</h2>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/montage-serialization"</span><span class="nt">&gt;</span><span class="p">{</span>
    <span class="dl">"</span><span class="s2">repetition</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">prototype</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">montage/ui/repetition.reel</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">properties</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">element</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">#</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">repetition</span><span class="dl">"</span><span class="p">},</span>
            <span class="dl">"</span><span class="s2">content</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">prototype</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">montage/ui/dynamic-text.reel</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">properties</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">element</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">#</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">},</span>
            <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="nt">&lt;/script&gt;</span>
...
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;ul</span> <span class="na">data-montage-id=</span><span class="s">"repetition"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">data-montage-id=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/body&gt;</span>
...
</code></pre></div></div>
<p>Via the markup we are passing a parameter to the Repetition (the li element) and this will tell the repetition to repeat the li and its associated DynamicText as many times as there are values in the content array. In this case three times.</p>

<h2 id="similarly-the-condition">Similarly the Condition</h2>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/montage-serialization"</span><span class="nt">&gt;</span><span class="p">{</span>
    <span class="dl">"</span><span class="s2">condition</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">prototype</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">montage/ui/condition.reel</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">properties</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">element</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">#</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">condition</span><span class="dl">"</span><span class="p">},</span>
            <span class="dl">"</span><span class="s2">condition</span><span class="dl">"</span><span class="p">:</span> <span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">prototype</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">montage/ui/dynamic-text.reel</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">properties</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">element</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">#</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">},</span>
            <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">This is the truth</span><span class="dl">"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="nt">&lt;/script&gt;</span>
...
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">data-montage-id=</span><span class="s">"condition"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">data-montage-id=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
...
</code></pre></div></div>
<p>The span is a parameter to the Condition that tells it to show that element when the condition property is true. In this casse the condition will make sure the span is not visible on the screen.</p>

<h2 id="implementing-a-custom-component-using-the-same-pattern">Implementing a custom component using the same pattern.</h2>

<p>Given the desired usage for CustomComponent.</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/montage-serialization"</span><span class="nt">&gt;</span><span class="p">{</span>
    <span class="dl">"</span><span class="s2">customComponent</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">prototype</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">my/custom-component.reel</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">properties</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">element</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">#</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">customComponent</span><span class="dl">"</span><span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">prototype</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">montage/ui/dynamic-text.reel</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">properties</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">element</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">#</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">},</span>
            <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">I'm included.</span><span class="dl">"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="nt">&lt;/script&gt;</span>
...
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">data-montage-id=</span><span class="s">"customComponent"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">data-montage-id=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/span&gt;</span>         <span class="nt">&lt;-</span> <span class="na">innerTemplate</span>
    <span class="err">&lt;/</span><span class="na">div</span><span class="nt">&gt;</span>
<span class="nt">&lt;/body&gt;</span>
...
</code></pre></div></div>
<p>The CustomComponent can make use of a <em>template argument</em> to include all the contents of it’s <em>innerTemplate</em>. A template argument is an element that has the attribute data-arg. This marks the element as a placeholder that will replaced by the innerTemplate.</p>

<p><strong>my/custom-component.reel/custom-component.html</strong></p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/montage-serialization"</span><span class="nt">&gt;</span><span class="p">{</span>
    <span class="dl">"</span><span class="s2">owner</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">prototype</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">my/custom-component.reel</span><span class="dl">"</span>
    <span class="p">}</span>
<span class="p">}</span><span class="nt">&lt;/script&gt;</span>
...
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"my-CustomComponent--prettyFrame"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">data-arg=</span><span class="s">"*"</span><span class="nt">&gt;&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
...
</code></pre></div></div>

<h2 id="the-substitution">The Substitution</h2>

<p>The Substitution component allows you to branch the component tree based on a key in your data</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/montage-serialization"</span><span class="nt">&gt;</span><span class="p">{</span>
    <span class="dl">"</span><span class="s2">customerNameSubstitution</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">prototype</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">montage/ui/substitution.reel</span><span class="dl">"</span>
        <span class="dl">"</span><span class="s2">properties</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">element</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">#</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">customerNameSubstitution</span><span class="dl">"</span><span class="p">},</span>
            <span class="dl">"</span><span class="s2">switchComponents</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">"</span><span class="s2">read</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">montage/ui/dynamic-text.reel</span><span class="dl">"</span>
                <span class="dl">"</span><span class="s2">edit</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">montage/ui/input-text.reel</span><span class="dl">"</span>
            <span class="p">}</span>
            <span class="dl">"</span><span class="s2">switchValue</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">read</span><span class="dl">"</span>
        <span class="p">},</span>
        <span class="dl">"</span><span class="s2">bindings</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">"</span><span class="s2">&lt;-</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">@customer.name</span><span class="dl">"</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="nt">&lt;/script&gt;</span>
...
<span class="nt">&lt;body&gt;</span>
    Customer name: <span class="nt">&lt;div</span> <span class="na">data-montage-id=</span><span class="s">"customerNameSubstitution"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
...
</code></pre></div></div>

<h2 id="the-exposition">The Exposition</h2>

<p>The Exposition component allows you to specify components that might or might not be related but need to occupy the same space in the dom.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/montage-serialization"</span><span class="nt">&gt;</span><span class="p">{</span>
    <span class="dl">"</span><span class="s2">preferences</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">prototype</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">montage/ui/exposition.reel</span><span class="dl">"</span>
        <span class="dl">"</span><span class="s2">properties</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">element</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">#</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">preferences</span><span class="dl">"</span><span class="p">}</span>
        <span class="p">},</span>
        <span class="dl">"</span><span class="s2">bindings</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">"</span><span class="s2">&lt;-</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">@customer.name</span><span class="dl">"</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">displayPanel</span><span class="dl">"</span><span class="p">:</span> <span class="p">{...},</span>
    <span class="dl">"</span><span class="s2">networkPanel</span><span class="dl">"</span><span class="p">:</span> <span class="p">{...},</span>
    <span class="dl">"</span><span class="s2">usersPanel</span><span class="dl">"</span><span class="p">:</span> <span class="p">{...}</span>
<span class="p">}</span><span class="nt">&lt;/script&gt;</span>
...
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">data-montage-id=</span><span class="s">"preferences"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">data-param=</span><span class="s">"display"</span>  <span class="na">data-montage-id=</span><span class="s">"displayPanel"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">data-param=</span><span class="s">"network"</span>  <span class="na">data-montage-id=</span><span class="s">"networkPanel"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">data-param=</span><span class="s">"users"</span>  <span class="na">data-montage-id=</span><span class="s">"usersPanel"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
...
</code></pre></div></div>


                </article>

                <nav class="paging">
                    <a class="button paging--prev disabled" href="/docs/.html">Prev</a>
                    <a class="button paging--next disabled" href="/docs/.html">Next</a>
                </nav>

                <div id="comments" class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'montagejs'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
            </div>
            
        </div>
        
    </section>
    

  <footer class="footer">

    <div class="wrapper">
    	
    	<ul class="sitemap">
            <li>
                <a href="/" class="sitemap-main">Home</a>
            </li>
            <li>
                <a href="/apps/" class="sitemap-main">Apps</a>
                <a href="/apps/#gallery">Gallery</a>
            </li>
            <li>
                <a href="/docs/" class="sitemap-main">Docs</a>
                <a href="/docs/montagejs-setup.html">Set Up</a>
                <a href="/docs/hello-montagejs.html">Hello MontageJS</a>
                <a href="/docs/montagejs-examples.html">Examples</a>
                <a href="/docs/themes.html">Themes</a>
                <a href="/docs/faq.html">FAQ</a>
            </li>
            <li>
                <a href="/api/" class="sitemap-main">API</a>
            </li>
            <li>
                <a href="/community/" class="sitemap-main">Community</a>
                <a href="/community/forum/">Forum</a>
                <a href="/community/meet-ups/">Meet-ups</a>
                <a href="/community/events/">Events</a>
                <a href="/community/contact-us/">Contact us</a>
            </li>
            <li>
                <a class="sitemap-main" href="/blog/">Blog</a>
            </li>
    	</ul>
	    
	    
	    <p class="footer-end">2012–2014 MontageJS — Open source and licensed under <a href="https://github.com/montagejs/montage/blob/master/LICENSE.md" target="_blank">BSD</a> | <a href="https://github.com/montagejs/montage/" target="_blank">GitHub</a> | <a href="https://github.com/montagejs?tab=members" target="_blank">Team</a></p>
    </div>

</footer>

  <!-- Google -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35717912-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


</body>
</html>
