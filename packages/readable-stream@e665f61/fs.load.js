montageDefine("e665f61","fs",{dependencies:["util","path","stream","events","./lib/_stream_readable.js","./lib/_stream_writable.js"],factory:function(e,t){function n(){if(F){var e=Error();return function(t){if(t)throw e.message=t.message,t=e}}return function(e){if(e)throw e}}function r(e){return"function"==typeof e?e:n()}function i(e){return"function"!=typeof e?n():function(){return e.apply(null,arguments)}}function a(e){if(e&&!Buffer.isEncoding(e))throw Error("Unknown encoding: "+e)}function o(e,t){if(-1!==(""+e).indexOf("\0")){var n=Error("Path must be a string without null bytes.");if(!t)throw n;return process.nextTick(function(){t(n)}),!1}return!0}function s(e){if("string"!=typeof e)return e;if(!A&&~e.indexOf("x"))throw d("ENOSYS","fs.open(O_EXCL)");switch(e){case"r":return j;case"rs":return j|R;case"r+":return I;case"rs+":return I|R;case"w":return z|L|B;case"wx":case"xw":return z|L|B|A;case"w+":return z|L|I;case"wx+":case"xw+":return z|L|I|A;case"a":return k|L|B;case"ax":case"xa":return k|L|B|A;case"a+":return k|L|I;case"ax+":case"xa+":return k|L|I|A}throw Error("Unknown file open flag: "+e)}function l(e,t){switch(typeof e){case"number":return e;case"string":return parseInt(e,8);default:return t?l(t):void 0}}function u(e,t){return N?"junction"===t?w._makeLong(e):(""+e).replace(/\//g,"\\"):e}function c(e){if("number"==typeof e)return e;if(e instanceof Date)return e.getTime()/1e3;throw Error("Cannot parse time: "+e)}function h(e,t,n,i,a,o){o=r(arguments[arguments.length-1]),S.write(e,t,n,i,a,function(r,s){r?S.close(e,function(){o&&o(r)}):s===i?S.close(e,o):(n+=s,i-=s,a+=s,h(e,t,n,i,a,o))})}function d(e,t){var n=Error(t+" "+e);return n.errno=n.code=e,n.syscall=t,n}function p(){O.call(this);var e=this,t=process.binding("fs_event_wrap").FSEvent;this._handle=new t,this._handle.owner=this,this._handle.onchange=function(t,n,r){t?(e._handle.close(),e.emit("error",d(errno,"watch"))):e.emit("change",n,r)}}function f(){O.call(this);var e=this;this._handle=new E.StatWatcher;var t=-1;this._handle.onchange=function(n,r,i){(-1!==t||-1!==i||n.nlink!==r.nlink)&&(t=i,e.emit("change",n,r))},this._handle.onstop=function(){e.emit("stop")}}function m(e){return Object.prototype.hasOwnProperty.call(q,e)&&q[e]}function v(){W=new Buffer(M),W.used=0}function g(e,t){if(!(this instanceof g))return new g(e,t);if(t=y._extend({bufferSize:65536,lowWaterMark:16384,highWaterMark:65536},t||{}),T.call(this,t),this.path=e,this.fd=t.hasOwnProperty("fd")?t.fd:null,this.flags=t.hasOwnProperty("flags")?t.flags:"r",this.mode=t.hasOwnProperty("mode")?t.mode:438,this.start=t.hasOwnProperty("start")?t.start:void 0,this.end=t.hasOwnProperty("start")?t.end:void 0,this.pos=void 0,void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw Error("start must be <= end");this.pos=this.start}"number"!=typeof this.fd&&this.open(),this.on("end",function(){this.destroy()})}function _(e,t){if(!(this instanceof _))return new _(e,t);if(t=y._extend({bufferSize:65536,lowWaterMark:16384,highWaterMark:65536},t||{}),P.call(this,t),this.path=e,this.fd=null,this.fd=t.hasOwnProperty("fd")?t.fd:null,this.flags=t.hasOwnProperty("flags")?t.flags:"w",this.mode=t.hasOwnProperty("mode")?t.mode:438,this.start=t.hasOwnProperty("start")?t.start:void 0,this.pos=void 0,this.bytesWritten=0,void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(0>this.start)throw Error("start must be >= zero");this.pos=this.start}"number"!=typeof this.fd&&this.open(),this.once("finish",this.close)}function b(e){x.call(this),this.fd=e,this.writable=!0,this.readable=!1}var y=e("util"),w=e("path"),E=process.binding("fs"),C=process.binding("constants"),S=t,x=e("stream").Stream,O=e("events").EventEmitter,T=e("./lib/_stream_readable.js"),P=e("./lib/_stream_writable.js"),D=128,M=40960,k=C.O_APPEND||0,L=C.O_CREAT||0;C.O_DIRECTORY||0;var A=C.O_EXCL||0;C.O_NOCTTY||0,C.O_NOFOLLOW||0;var j=C.O_RDONLY||0,I=C.O_RDWR||0;C.O_SYMLINK||0;var R=C.O_SYNC||0,z=C.O_TRUNC||0,B=C.O_WRONLY||0,N="win32"===process.platform,F=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);S.Stats=E.Stats,S.Stats.prototype._checkModeProperty=function(e){return(this.mode&C.S_IFMT)===e},S.Stats.prototype.isDirectory=function(){return this._checkModeProperty(C.S_IFDIR)},S.Stats.prototype.isFile=function(){return this._checkModeProperty(C.S_IFREG)},S.Stats.prototype.isBlockDevice=function(){return this._checkModeProperty(C.S_IFBLK)},S.Stats.prototype.isCharacterDevice=function(){return this._checkModeProperty(C.S_IFCHR)},S.Stats.prototype.isSymbolicLink=function(){return this._checkModeProperty(C.S_IFLNK)},S.Stats.prototype.isFIFO=function(){return this._checkModeProperty(C.S_IFIFO)},S.Stats.prototype.isSocket=function(){return this._checkModeProperty(C.S_IFSOCK)},S.exists=function(e,t){function n(e){t&&t(e?!1:!0)}o(e,n)&&E.stat(w._makeLong(e),n)},S.existsSync=function(e){try{return o(e),E.stat(w._makeLong(e)),!0}catch(t){return!1}},S.readFile=function(e,t){function n(){0===u?(c=new Buffer(8192),S.read(d,c,0,8192,-1,i)):S.read(d,c,p,u-p,-1,i)}function i(e,t){return e?S.close(d,function(){return l(e)}):0===t?o():(p+=t,0!==u?p===u?o():n():(h.push(c.slice(0,t)),n()),void 0)}function o(){S.close(d,function(e){return 0===u?c=Buffer.concat(h,p):u>p&&(c=c.slice(0,p)),s&&(c=c.toString(s)),l(e,c)})}var s="string"==typeof t?t:null,l=r(arguments[arguments.length-1]);a(s);var u,c,h,d,p=0;S.open(e,C.O_RDONLY,438,function(e,t){return e?l(e):(d=t,S.fstat(d,function(e,t){return e?l(e):(u=t.size,0===u?(h=[],n()):(c=new Buffer(u),n(),void 0))}),void 0)})},S.readFileSync=function(e,t){a(t);var n,r=S.openSync(e,C.O_RDONLY,438),i=!0;try{n=S.fstatSync(r).size,i=!1}finally{i&&S.closeSync(r)}var o,s,l=0;0===n?s=[]:o=new Buffer(n);for(var u=!1;!u;){var i=!0;try{if(0!==n)var c=S.readSync(r,o,l,n-l);else{o=new Buffer(8192);var c=S.readSync(r,o,0,8192);c&&s.push(o.slice(0,c))}i=!1}finally{i&&S.closeSync(r)}l+=c,u=0===c||0!==n&&l>=n}return S.closeSync(r),0===n?o=Buffer.concat(s,l):n>l&&(o=o.slice(0,l)),t&&(o=o.toString(t)),o},Object.defineProperty(t,"_stringToFlags",{enumerable:!1,value:s}),S.close=function(e,t){E.close(e,i(t))},S.closeSync=function(e){return E.close(e)},S.open=function(e,t,n,r){r=i(arguments[arguments.length-1]),n=l(n,438),o(e,r)&&E.open(w._makeLong(e),s(t),n,r)},S.openSync=function(e,t,n){return n=l(n,438),o(e),E.open(w._makeLong(e),s(t),n)},S.read=function(e,t,n,r,i,o){function s(e,n){o&&o(e,n||0,t)}if(!Buffer.isBuffer(t)){var l=arguments[4],u=arguments[3];a(u),i=arguments[2],r=arguments[1],t=new Buffer(r),n=0,o=function(e,n){if(l){var r=n>0?t.toString(u,0,n):"";l(e,r,n)}}}E.read(e,t,n,r,i,s)},S.readSync=function(e,t,n,r,i){var o=!1;if(!Buffer.isBuffer(t)){o=!0;var s=arguments[3];a(s),i=arguments[2],r=arguments[1],t=new Buffer(r),n=0}var l=E.read(e,t,n,r,i);if(!o)return l;var u=l>0?t.toString(s,0,l):"";return[u,l]},S.write=function(e,t,n,i,o,s){function l(e,n){s(e,n||0,t)}return Buffer.isBuffer(t)||(s=arguments[4],o=arguments[2],a(arguments[3]),t=new Buffer(""+arguments[1],arguments[3]),n=0,i=t.length),i?(s=r(s),E.write(e,t,n,i,o,l),void 0):("function"==typeof s&&process.nextTick(function(){s(void 0,0)}),void 0)},S.writeSync=function(e,t,n,r,i){return Buffer.isBuffer(t)||(i=arguments[2],a(arguments[3]),t=new Buffer(""+arguments[1],arguments[3]),n=0,r=t.length),r?E.write(e,t,n,r,i):0},S.rename=function(e,t,n){n=i(n),o(e,n)&&o(t,n)&&E.rename(w._makeLong(e),w._makeLong(t),n)},S.renameSync=function(e,t){return o(e),o(t),E.rename(w._makeLong(e),w._makeLong(t))},S.truncate=function(e,t,n){return"number"==typeof e?S.ftruncate(e,t,n):("function"==typeof t?(n=t,t=0):t===void 0&&(t=0),n=r(n),S.open(e,"w",function(e,r){return e?n(e):(E.ftruncate(r,t,function(e){S.close(r,function(t){n(e||t)})}),void 0)}),void 0)},S.truncateSync=function(e,t){if("number"==typeof e)return S.ftruncateSync(e,t);t===void 0&&(t=0);var n=S.openSync(e,"w");try{var r=S.ftruncateSync(n,t)}finally{S.closeSync(n)}return r},S.ftruncate=function(e,t,n){"function"==typeof t?(n=t,t=0):t===void 0&&(t=0),E.ftruncate(e,t,i(n))},S.ftruncateSync=function(e,t){return t===void 0&&(t=0),E.ftruncate(e,t)},S.rmdir=function(e,t){t=i(t),o(e,t)&&E.rmdir(w._makeLong(e),t)},S.rmdirSync=function(e){return o(e),E.rmdir(w._makeLong(e))},S.fdatasync=function(e,t){E.fdatasync(e,i(t))},S.fdatasyncSync=function(e){return E.fdatasync(e)},S.fsync=function(e,t){E.fsync(e,i(t))},S.fsyncSync=function(e){return E.fsync(e)},S.mkdir=function(e,t,n){"function"==typeof t&&(n=t),n=i(n),o(e,n)&&E.mkdir(w._makeLong(e),l(t,511),n)},S.mkdirSync=function(e,t){return o(e),E.mkdir(w._makeLong(e),l(t,511))},S.sendfile=function(e,t,n,r,a){E.sendfile(e,t,n,r,i(a))},S.sendfileSync=function(e,t,n,r){return E.sendfile(e,t,n,r)},S.readdir=function(e,t){t=i(t),o(e,t)&&E.readdir(w._makeLong(e),t)},S.readdirSync=function(e){return o(e),E.readdir(w._makeLong(e))},S.fstat=function(e,t){E.fstat(e,i(t))},S.lstat=function(e,t){t=i(t),o(e,t)&&E.lstat(w._makeLong(e),t)},S.stat=function(e,t){t=i(t),o(e,t)&&E.stat(w._makeLong(e),t)},S.fstatSync=function(e){return E.fstat(e)},S.lstatSync=function(e){return o(e),E.lstat(w._makeLong(e))},S.statSync=function(e){return o(e),E.stat(w._makeLong(e))},S.readlink=function(e,t){t=i(t),o(e,t)&&E.readlink(w._makeLong(e),t)},S.readlinkSync=function(e){return o(e),E.readlink(w._makeLong(e))},S.symlink=function(e,t,n,r){var a="string"==typeof n?n:null,r=i(arguments[arguments.length-1]);o(e,r)&&o(t,r)&&E.symlink(u(e,a),w._makeLong(t),a,r)},S.symlinkSync=function(e,t,n){return n="string"==typeof n?n:null,o(e),o(t),E.symlink(u(e,n),w._makeLong(t),n)},S.link=function(e,t,n){n=i(n),o(e,n)&&o(t,n)&&E.link(w._makeLong(e),w._makeLong(t),n)},S.linkSync=function(e,t){return o(e),o(t),E.link(w._makeLong(e),w._makeLong(t))},S.unlink=function(e,t){t=i(t),o(e,t)&&E.unlink(w._makeLong(e),t)},S.unlinkSync=function(e){return o(e),E.unlink(w._makeLong(e))},S.fchmod=function(e,t,n){E.fchmod(e,l(t),i(n))},S.fchmodSync=function(e,t){return E.fchmod(e,l(t))},C.hasOwnProperty("O_SYMLINK")&&(S.lchmod=function(e,t,n){n=r(n),S.open(e,C.O_WRONLY|C.O_SYMLINK,function(e,r){return e?(n(e),void 0):(S.fchmod(r,t,function(e){S.close(r,function(t){n(e||t)})}),void 0)})},S.lchmodSync=function(e,t){var n,r,i=S.openSync(e,C.O_WRONLY|C.O_SYMLINK);try{var a=S.fchmodSync(i,t)}catch(o){n=o}try{S.closeSync(i)}catch(o){r=o}if(n||r)throw n||r;return a}),S.chmod=function(e,t,n){n=i(n),o(e,n)&&E.chmod(w._makeLong(e),l(t),n)},S.chmodSync=function(e,t){return o(e),E.chmod(w._makeLong(e),l(t))},C.hasOwnProperty("O_SYMLINK")&&(S.lchown=function(e,t,n,i){i=r(i),S.open(e,C.O_WRONLY|C.O_SYMLINK,function(e,r){return e?(i(e),void 0):(S.fchown(r,t,n,i),void 0)})},S.lchownSync=function(e,t,n){var r=S.openSync(e,C.O_WRONLY|C.O_SYMLINK);return S.fchownSync(r,t,n)}),S.fchown=function(e,t,n,r){E.fchown(e,t,n,i(r))},S.fchownSync=function(e,t,n){return E.fchown(e,t,n)},S.chown=function(e,t,n,r){r=i(r),o(e,r)&&E.chown(w._makeLong(e),t,n,r)},S.chownSync=function(e,t,n){return o(e),E.chown(w._makeLong(e),t,n)},S._toUnixTimestamp=c,S.utimes=function(e,t,n,r){r=i(r),o(e,r)&&E.utimes(w._makeLong(e),c(t),c(n),r)},S.utimesSync=function(e,t,n){o(e),t=c(t),n=c(n),E.utimes(w._makeLong(e),t,n)},S.futimes=function(e,t,n,r){t=c(t),n=c(n),E.futimes(e,t,n,i(r))},S.futimesSync=function(e,t,n){t=c(t),n=c(n),E.futimes(e,t,n)},S.writeFile=function(e,t,n,i){var o="string"==typeof n?n:"utf8";a(o),i=r(arguments[arguments.length-1]),S.open(e,"w",438,function(e,n){if(e)i&&i(e);else{var r=Buffer.isBuffer(t)?t:new Buffer(""+t,o);h(n,r,0,r.length,0,i)}})},S.writeFileSync=function(e,t,n){a(n);var r=S.openSync(e,"w");Buffer.isBuffer(t)||(t=new Buffer(""+t,n||"utf8"));var i=0,o=t.length;try{for(;o>i;)i+=S.writeSync(r,t,i,o-i,i)}finally{S.closeSync(r)}},S.appendFile=function(e,t,n,i){var o="string"==typeof n?n:"utf8";a(o),i=r(arguments[arguments.length-1]),S.open(e,"a",438,function(e,n){if(e)return i(e);var r=Buffer.isBuffer(t)?t:new Buffer(""+t,o);h(n,r,0,r.length,null,i)})},S.appendFileSync=function(e,t,n){a(n);var r=S.openSync(e,"a");Buffer.isBuffer(t)||(t=new Buffer(""+t,n||"utf8"));var i=0,o=null,s=t.length;try{for(;s>i;)i+=S.writeSync(r,t,i,s-i,o),o+=i}finally{S.closeSync(r)}},y.inherits(p,O),p.prototype.start=function(e,t){o(e);var n=this._handle.start(w._makeLong(e),t);if(n)throw this._handle.close(),d(errno,"watch")},p.prototype.close=function(){this._handle.close()},S.watch=function(e){o(e);var t,n,r;return"object"==typeof arguments[1]?(n=arguments[1],r=arguments[2]):(n={},r=arguments[1]),void 0===n.persistent&&(n.persistent=!0),t=new p,t.start(e,n.persistent),r&&t.addListener("change",r),t},y.inherits(f,O),f.prototype.start=function(e,t,n){o(e),this._handle.start(w._makeLong(e),t,n)},f.prototype.stop=function(){this._handle.stop()};var q={};if(S.watchFile=function(e){o(e);var t,n,r={interval:5007,persistent:!0};if("object"==typeof arguments[1]?(r=y._extend(r,arguments[1]),n=arguments[2]):n=arguments[1],!n)throw Error("watchFile requires a listener function");return m(e)?t=q[e]:(t=q[e]=new f,t.start(e,r.persistent,r.interval)),t.addListener("change",n),t},S.unwatchFile=function(e,t){if(o(e),m(e)){var n=q[e];"function"==typeof t?n.removeListener("change",t):n.removeAllListeners("change"),0===n.listeners("change").length&&(n.stop(),q[e]=void 0)}},w.normalize,N)var V=/(.*?)(?:[\/\\]+|$)/g;else var V=/(.*?)(?:[\/]+|$)/g;if(N)var U=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else var U=/^[\/]*/;S.realpathSync=function(e,t){function n(){var t=U.exec(e);r=t[0].length,i=t[0],a=t[0],o="",N&&!u[a]&&(S.lstatSync(a),u[a]=!0)}if(e=w.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,i,a,o,s=e,l={},u={};for(n();e.length>r;){V.lastIndex=r;var c=V.exec(e);if(o=i,i+=c[0],a=o+c[1],r=V.lastIndex,!(u[a]||t&&t[a]===a)){var h;if(t&&Object.prototype.hasOwnProperty.call(t,a))h=t[a];else{var d=S.lstatSync(a);if(!d.isSymbolicLink()){u[a]=!0,t&&(t[a]=a);continue}var p=null;if(!N){var f=d.dev.toString(32)+":"+d.ino.toString(32);l.hasOwnProperty(f)&&(p=l[f])}null===p&&(S.statSync(a),p=S.readlinkSync(a)),h=w.resolve(o,p),t&&(t[a]=h),N||(l[f]=p)}e=w.resolve(h,e.slice(r)),n()}}return t&&(t[s]=e),e},S.realpath=function(e,t,n){function i(){var t=U.exec(e);u=t[0].length,c=t[0],h=t[0],d="",N&&!m[h]?S.lstat(h,function(e){return e?n(e):(m[h]=!0,a(),void 0)}):process.nextTick(a)}function a(){if(u>=e.length)return t&&(t[p]=e),n(null,e);V.lastIndex=u;var r=V.exec(e);return d=c,c+=r[0],h=d+r[1],u=V.lastIndex,m[h]||t&&t[h]===h?process.nextTick(a):t&&Object.prototype.hasOwnProperty.call(t,h)?l(t[h]):S.lstat(h,o)}function o(e,r){if(e)return n(e);if(!r.isSymbolicLink())return m[h]=!0,t&&(t[h]=h),process.nextTick(a);if(!N){var i=r.dev.toString(32)+":"+r.ino.toString(32);if(f.hasOwnProperty(i))return s(null,f[i],h)}S.stat(h,function(e){return e?n(e):(S.readlink(h,function(e,t){N||(f[i]=t),s(e,t)}),void 0)})}function s(e,r,i){if(e)return n(e);var a=w.resolve(d,r);t&&(t[i]=a),l(a)}function l(t){e=w.resolve(t,e.slice(u)),i()}if("function"!=typeof n&&(n=r(t),t=null),e=w.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(n.bind(null,null,t[e]));var u,c,h,d,p=e,f={},m={};i()};var W;S.createReadStream=function(e,t){return new g(e,t)},y.inherits(g,T),S.ReadStream=g,S.FileReadStream=S.ReadStream,g.prototype.open=function(){var e=this;S.open(this.path,this.flags,this.mode,function(t,n){return t?(e.destroy(),e.emit("error",t),void 0):(e.fd=n,e.emit("open",n),e.read(),void 0)})},g.prototype._read=function(e,t){function n(e,n){if(e)return o.destroy(),t(e);var i=null;n>0&&(i=r.slice(a,a+n)),t(null,i)}if("number"!=typeof this.fd)return this.once("open",function(){this._read(e,t)});if(!this.destroyed){(!W||D>W.length-W.used)&&(W=null,v());var r=W,i=Math.min(W.length-W.used,e),a=W.used;if(void 0!==this.pos&&(i=Math.min(this.end-this.pos+1,i)),0>=i)return t();var o=this;S.read(this.fd,W,W.used,i,this.pos,n),void 0!==this.pos&&(this.pos+=i),W.used+=i}},g.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,"number"==typeof this.fd&&this.close())},g.prototype.close=function(e){function t(){S.close(n.fd,function(e){e?n.emit("error",e):n.emit("close")})}if(e&&this.once("close",e),this.closed||"number"!=typeof this.fd)return"number"!=typeof this.fd&&this.once("open",t),process.nextTick(this.emit.bind(this,"close"));this.closed=!0;var n=this;t()},S.createWriteStream=function(e,t){return new _(e,t)},y.inherits(_,P),S.WriteStream=_,S.FileWriteStream=S.WriteStream,_.prototype.open=function(){S.open(this.path,this.flags,this.mode,function(e,t){return e?(this.destroy(),this.emit("error",e),void 0):(this.fd=t,this.emit("open",t),void 0)}.bind(this))},_.prototype._write=function(e,t){return Buffer.isBuffer(e)?"number"!=typeof this.fd?this.once("open",this._write.bind(this,e,t)):(S.write(this.fd,e,0,e.length,this.pos,function(e,n){return e?(this.destroy(),t(e)):(this.bytesWritten+=n,t(),void 0)}.bind(this)),void 0!==this.pos&&(this.pos+=e.length),void 0):this.emit("error",Error("Invalid data"))},_.prototype.destroy=g.prototype.destroy,_.prototype.close=g.prototype.close,_.prototype.destroySoon=_.prototype.end,y.inherits(b,x),S.SyncWriteStream=b,b.prototype.write=function(e,t,n){var r,i;if(t)if("string"==typeof t)r=t,i=n;else{if("function"!=typeof t)throw Error("bad arg");i=t}return a(r),"string"==typeof e&&(e=new Buffer(e,r)),S.writeSync(this.fd,e,0,e.length),i&&process.nextTick(i),!0},b.prototype.end=function(e,t,n){e&&this.write(e,t,n),this.destroy()},b.prototype.destroy=function(){return S.closeSync(this.fd),this.fd=null,this.emit("close"),!0},b.prototype.destroySoon=b.prototype.destroy}});