(function(e){function n(){throw Error("Can't construct. GenericCollection is a mixin.")}function r(e){for(var t=[],n=Infinity,r=0;r<e.length;r++){var i=e[r];e[r]=i.toArray(),i.length<n&&(n=i.length)}for(r=0;r<e.length;r++)for(var i=e[r],s=0;s<i.length;s++)s<n&&s in i&&(t[s]=t[s]||[],t[s][r]=i[s]);return t}function s(){throw Error("Can't construct. GenericSet is a mixin.")}function c(){}function y(){throw Error("This is an abstract interface. Mix it. Don't construct it")}function S(){throw Error("Can't construct. RangeChanges is a mixin.")}function A(){throw Error("Can't construct. GenericOrder is a mixin.")}function D(e){if(!(this instanceof D))return new D(e);if(Array.isArray(e)||"string"==typeof e)return D.iterate(e);e=M(e);if(e instanceof D)return e;if(e.next)this.next=function(){return e.next()};else if(e.iterate){var t=e.iterate();this.next=function(){return t.next()}}else{if("[object Function]"!==M.prototype.toString.call(e))throw new TypeError("Cannot iterate");this.next=e}}function I(e,t,n){this.array=e,this.start=null==t?0:t,this.end=n}function Q(e,t,n){if(!(this instanceof Q))return new Q(e,t,n);var r=this.head=new this.Node;r.next=r,r.prev=r,this.contentEquals=t||Object.equals,this.content=n||Function.noop,this.length=0,this.addEach(e)}function G(e){this.head=e,this.at=e.next}function Y(e){this.value=e,this.next=this.prev=null}function nt(){throw Error("Can't construct. MapChanges is a mixin.")}function at(){throw Error("Can't construct. GenericMap is a mixin.")}function ft(e,t){this.key=e,this.value=t}function vt(e,t){if(!(this instanceof vt))return new vt(e,t);this.content=t=t||Function.noop,this.store={},this.length=0,this.addEach(e)}function mt(e){return"~"+e}function gt(e){return e.slice(1)}function kt(e,t,n,r){if(!(this instanceof kt))return new kt(e,t,n);t=t||Object.equals,n=n||Object.hash,r=r||Function.noop,this.contentEquals=t,this.contentHash=n,this.content=r,this.buckets=new this.Buckets(null,this.Bucket),this.length=0,this.addEach(e)}function Pt(e,t,n,r){if(!(this instanceof Pt))return new Pt(e,t,n);t=t||Object.equals,n=n||Object.hash,r=r||Function.noop,this.contentEquals=t,this.contentHash=n,this.content=r,this.store=new Ot(void 0,function(e,n){return t(e.key,n.key)},function(e){return n(e.key)}),this.length=0,this.addEach(e)}function zt(e,t,n,r){if(!(this instanceof zt))return new zt(e,t,n);t=t||Object.equals,n=n||Object.hash,r=r||Function.noop,this.contentEquals=t,this.contentHash=n,this.content=r,this.order=new this.Order(void 0,t),this.store=new this.Store(void 0,function(e,n){return t(e.value,n.value)},function(e){return n(e.value)}),this.length=0,this.addEach(e)}function Qt(e,t,n,r,i){if(!(this instanceof Qt))return new Qt(e,t,n,r);t=t||Infinity,n=n||Object.equals,r=r||Object.hash,i=i||Function.noop,this.store=new Vt(void 0,n,r),this.contentEquals=n,this.contentHash=r,this.content=i,this.maxLength=t,this.length=0,this.addEach(e)}function rn(e,t,n,r,i){if(!(this instanceof rn))return new rn(e,t,n,r);n=n||Object.equals,r=r||Object.hash,i=i||Function.noop,this.contentEquals=n,this.contentHash=r,this.content=i,this.store=new Zt(void 0,t,function(e,t){return n(e.key,t.key)},function(e){return r(e.key)}),this.length=0,this.addEach(e)}function cn(e,t,n,r){if(!(this instanceof cn))return new cn(e,t,n);t=t||Object.equals,n=n||Object.hash,r=r||Function.noop,this.contentEquals=t,this.contentHash=n,this.content=r,this.store=new un(void 0,function(e,n){return t(e.key,n.key)},function(e){return n(e.key)}),this.length=0,this.addEach(e)}function dn(e,t,n,r){if(!(this instanceof dn))return new dn(e,t,n,r);this.bucket=t||this.bucket,pn.call(this,e,n,r,function(e){var t=this.bucket();return pn.prototype.set.call(this,e,t),t})}function wn(e,t,n,r){if(!(this instanceof wn))return new wn(e,t,n,r);Array.isArray(e)?(this.array=e,e=e.splice(0,e.length)):this.array=[],this.contentEquals=t||Object.equals,this.contentCompare=n||Object.compare,this.content=r||Function.noop,this.length=0,this.addEach(e)}function En(e,t,n){for(var r=0,i=e.length-1;r<=i;){var s=r+i>>1,o=n(t,e[s]);if(0<o)r=s+1;else{if(!(0>o))return s;i=s-1}}return-(r+1)}function Sn(e,t,n,r){n=En(e,t,n);if(0>n)return-1;for(;0<n&&r(t,e[n-1]);)n--;return r(t,e[n])?n:-1}function xn(e,t,n,r){n=En(e,t,n);if(0>n)return-1;for(;n<e.length-1&&r(t,e[n+1]);)n++;return r(t,e[n])?n:-1}function Tn(e,t,n){var r=En(e,t,n);if(0>r)return-r-1;for(var i=e.length-1;r<i&&0===n(t,e[r+1]);)r++;return r}function On(e,t,n,r){if(!(this instanceof On))return new On(e,t,n,r);kn.call(this,e,t,n,r)}function jn(e,t,n,r){if(!(this instanceof jn))return new jn(e,t,n,r);t=t||Object.equals,n=n||Object.compare,r=r||Function.noop,this.contentEquals=t,this.contentCompare=n,this.content=r,this.store=new Dn(null,function(e,n){return t(e.key,n.key)},function(e,t){return n(e.key,t.key)}),this.length=0,this.addEach(e)}function Xn(e,t,n,r){if(!(this instanceof Xn))return new Xn(e,t,n,r);this.contentEquals=t||Object.equals,this.contentCompare=n||Object.compare,this.content=r||Function.noop,this.root=null,this.length=0,this.addEach(e)}function Vn(e){this.value=e,this.right=this.left=null,this.length=1}function $n(e,t,n){this.set=e,this.prev=null,this.end=n,t&&(e=this.set.findLeastGreaterThanOrEqual(t))&&(this.set.splay(e.value),this.prev=e.getPrevious())}function er(e,t,n,r){if(!(this instanceof er))return new er(e,t,n,r);t=t||Object.equals,n=n||Object.compare,r=r||Function.noop,this.contentEquals=t,this.contentCompare=n,this.content=r,this.store=new Qn(null,function(e,n){return t(e.key,n.key)},function(e,t){return n(e.key,t.key)}),this.length=0,this.addEach(e)}var t={};t.module$exports=n,n.prototype.addEach=function(e){if(e&&Object(e)===e)if("function"==typeof e.forEach)e.forEach(this.add,this);else if("number"==typeof e.length)for(var t=0;t<e.length;t++)this.add(e[t],t);else Object.keys(e).forEach(function(t){this.add(e[t],t)},this)},n.prototype.deleteEach=function(e){e.forEach(function(e){this["delete"](e)},this)},n.prototype.forEach=function(e,t){return this.reduce(function(n,r,i,s,o){e.call(t,r,i,s,o)},void 0)},n.prototype.map=function(e,t){var n=[];return this.reduce(function(r,i,s,o,u){n.push(e.call(t,i,s,o,u))},void 0),n},n.prototype.toArray=function(){return this.map(Function.identity)},n.prototype.toObject=function(){var e={};return this.reduce(function(t,n,r){e[r]=n},void 0),e},n.prototype.filter=function(e,t){var n=this.constructClone();return this.reduce(function(r,i,s,o,u){e.call(t,i,s,o,u)&&n.add(i)},void 0),n},n.prototype.every=function(e,t){return this.reduce(function(n,r,i,s,o){return n&&e.call(t,r,i,s,o)},!0)},n.prototype.some=function(e,t){return this.reduce(function(n,r,i,s,o){return n||e.call(t,r,i,s,o)},!1)},n.prototype.all=function(){return this.every(Boolean)},n.prototype.any=function(){return this.some(Boolean)},n.prototype.min=function(e){return e=this.contentCompare||Object.compare,this.reduce(function(t,n){return 0>e(n,t)?n:t},Infinity)},n.prototype.max=function(e){return e=this.contentCompare||Object.compare,this.reduce(function(t,n){return 0<e(n,t)?n:t},-Infinity)},n.prototype.sum=function(e){return this.reduce(function(e,t){return e+t},void 0===e?0:e)},n.prototype.average=function(e){var t=void 0===e?0:e,n=void 0===e?0:e;return this.reduce(function(e,r){t+=r,n+=1},void 0),t/n},n.prototype.concat=function(){for(var e=this.constructClone(this),t=0;t<arguments.length;t++)e.addEach(arguments[t]);return e},n.prototype.flatten=function(){var e=this;return this.reduce(function(t,n){return n.forEach(function(e){this.push(e)},t,e),t},[])},n.prototype.zip=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this),r(e)},n.prototype.sorted=function(e,t,n){return e=e||this.contentCompare||Object.compare,e.by?(t=e.by,e=e.compare||this.contentCompare||Object.compare):t=t||Function.identity,void 0===n&&(n=1),this.map(function(e){return{by:t(e),value:e}}).sort(function(t,r){return e(t.by,r.by)*n}).map(function(e){return e.value})},n.prototype.reversed=function(){return this.constructClone(this).reverse()},n.prototype.clone=function(e,t){if(void 0===e)e=Infinity;else if(0===e)return this;var n=this.constructClone();return this.forEach(function(r,i){n.add(Object.clone(r,e-1,t),i)},this),n},n.prototype.only=function(){if(0===this.length)throw Error("Can't get only value in empty collection.");if(1<this.length)throw Error("Can't get only value in collection with multiple values.");return this.one()},t.module$exports&&(t=t.module$exports);var i={};i.module$exports=s,s.prototype.union=function(e){var t=this.constructClone(this);return t.addEach(e),t},s.prototype.intersection=function(e){return this.constructClone(this.filter(function(t){return e.has(t)}))},s.prototype.difference=function(e){var t=this.constructClone(this);return t.deleteEach(e),t},s.prototype.symmetricDifference=function(e){var t=this.union(e),e=this.intersection(e);return t.difference(e)},s.prototype.equals=function(e,t){var n=this;return Object.can(e,"reduce")&&this.length===e.length&&e.reduce(function(e,r){return e&&n.has(r,t)},!0)},i.module$exports&&(i=i.module$exports);var o={},u=t,a=Object.prototype.toString;Array.isArray||(Array.isArray=function(e){return"[object Array]"==a.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=u.forEach),Array.prototype.map||(Array.prototype.map=u.map),Array.prototype.filter||(Array.prototype.filter=u.filter),Array.prototype.every||(Array.prototype.every=u.every),Array.prototype.some||(Array.prototype.some=u.some),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=toObject(this),n=t.length>>>0;if(a.call(e)!="[object Function]")throw new TypeError(e+" is not a function");if(!n&&arguments.length==1)throw new TypeError("reduce of empty array with no initial value");var r=0,i;if(arguments.length>=2)i=arguments[1];else do{if(r in t){i=t[r++];break}if(++r>=n)throw new TypeError("reduce of empty array with no initial value")}while(1);for(;r<n;r++)r in t&&(i=e.call(void 0,i,t[r],r,t));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=toObject(this),n=t.length>>>0;if(a.call(e)!="[object Function]")throw new TypeError(e+" is not a function");if(!n&&arguments.length==1)throw new TypeError("reduceRight of empty array with no initial value");var r,n=n-1;if(arguments.length>=2)r=arguments[1];else do{if(n in t){r=t[n--];break}if(--n<0)throw new TypeError("reduceRight of empty array with no initial value")}while(1);do n in this&&(r=e.call(void 0,r,t[n],n,t));while(n--);return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=toObject(this),n=t.length>>>0;if(!n)return-1;var r=0;arguments.length>1&&(r=toInteger(arguments[1]));for(r=r>=0?r:Math.max(0,n+r);r<n;r++)if(r in t&&t[r]===e)return r;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){var t=toObject(this),n=t.length>>>0;if(!n)return-1;var r=n-1;arguments.length>1&&(r=Math.min(r,toInteger(arguments[1])));for(r=r>=0?r:n-Math.abs(r);r>=0;r--)if(r in t&&e===t[r])return r;return-1});var f={};f.module$exports=Function,Function.noop=function(){},Function.identity=function(e){return e},Function.by=function(e,t){var t=t||Object.compare,e=e||Function.identity,n=function(n,r){return t(e(n),e(r))};return n.compare=t,n.by=e,n},f.module$exports&&(f=f.module$exports);var l={};l.module$exports=c,c.ascii={intersection:"+",through:"-",branchUp:"+",branchDown:"+",fromBelow:".",fromAbove:"'",fromBoth:"+",strafe:"|"},c.unicodeRound={intersection:"╋",through:"━",branchUp:"┻",branchDown:"┳",fromBelow:"╭",fromAbove:"╰",fromBoth:"┣",strafe:"┃"},c.unicodeSharp={intersection:"╋",through:"━",branchUp:"┻",branchDown:"┳",fromBelow:"┏",fromAbove:"┗",fromBoth:"┣",strafe:"┃"},l.module$exports&&(l=l.module$exports);var h={};h.module$exports="undefined"!=typeof WeakMap?WeakMap:function(){function e(e){return e.prototype=null,Object.freeze(e)}var t=Object.getOwnPropertyNames,n=Object.defineProperty,r={};t(Object).forEach(function(e){r[e]=Object[e]});var i="ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var s=new ArrayBuffer(25),s=new Uint8Array(s);crypto.getRandomValues(s),i="rand:"+Array.prototype.map.call(s,function(e){return(e%36).toString(36)}).join("")+"___"}n(Object,"getOwnPropertyNames",{value:function(e){return t(e).filter(function(e){return e!==i})}}),"getPropertyNames"in Object&&n(Object,"getPropertyNames",{value:function(e){return r.getPropertyNames(e).filter(function(e){return e!==i})}});var o=function(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[i];if(t&&t.key===e)return t;if(r.isExtensible(e))return t={key:e,gets:[],vals:[]},n(e,i,{value:t,writable:!1,enumerable:!1,configurable:!1}),t},u=Object.freeze;n(Object,"freeze",{value:function(e){return o(e),u(e)}});var a=Object.seal;n(Object,"seal",{value:function(e){return o(e),a(e)}});var f=Object.preventExtensions;n(Object,"preventExtensions",{value:function(e){return o(e),f(e)}});var l=function(){function t(e,i){var s=o(e),u;return s?(u=s.gets.indexOf(t),s=s.vals):(u=n.indexOf(e),s=r),0<=u?s[u]:i}var n=[],r=[];return Object.create(l.prototype,{get___:{value:e(t)},has___:{value:e(function(e){var r=o(e);return 0<=(r?r.gets.indexOf(t):n.indexOf(e))})},set___:{value:e(function(e,i){var s=o(e),u;s?(u=s.gets.indexOf(t),0<=u?s.vals[u]=i:(s.gets.push(t),s.vals.push(i))):(u=n.indexOf(e),0<=u?r[u]=i:(n.push(e),r.push(i)))})},delete___:{value:e(function(e){var i=o(e);return i?(e=i.gets.indexOf(t),0<=e&&(i.gets.splice(e,1),i.vals.splice(e,1))):(e=n.indexOf(e),0<=e&&(n.splice(e,1),r.splice(e,1))),!0})}})};return l.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){this.set___(e,t)},writable:!0,configurable:!0},"delete":{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),l}(),h.module$exports&&(h=h.module$exports);var p={},d=h,v=Object.prototype.hasOwnProperty,m=new d,g=new d;p.module$exports=y,y.prototype.getOwnPropertyChangeDescriptor=function(e){m.has(this)||m.set(this,{});var t=m.get(this);return v.call(t,e)||(t[e]={willChangeListeners:[],changeListeners:[]}),t[e]},y.prototype.hasOwnPropertyChangeDescriptor=function(e){if(!m.has(this))return!1;if(!e)return!0;var t=m.get(this);return v.call(t,e)?!0:!1},y.prototype.addOwnPropertyChangeListener=function(e,t,n){this.makeObservable&&!this.isObservable&&this.makeObservable();var r=y.getOwnPropertyChangeDescriptor(this,e),n=n?r.willChangeListeners:r.changeListeners;y.makePropertyObservable(this,e),n.push(t)},y.prototype.addBeforeOwnPropertyChangeListener=function(e,t){return y.addOwnPropertyChangeListener(this,e,t,!0)},y.prototype.removeOwnPropertyChangeListener=function(e,t,n){var r=y.getOwnPropertyChangeDescriptor(this,e),n=n?r.willChangeListeners:r.changeListeners,t=n.lastIndexOf(t);if(-1===t)throw Error("Can't remove listener: does not exist.");n.splice(t,1),0===r.changeListeners.length+r.willChangeListeners.length&&y.makePropertyUnobservable(this,e)},y.prototype.removeBeforeOwnPropertyChangeListener=function(e,t){return y.removeOwnPropertyChangeListener(this,e,t,!0)},y.prototype.dispatchOwnPropertyChange=function(e,t,n){var r=y.getOwnPropertyChangeDescriptor(this,e),r=n?r.willChangeListeners:r.changeListeners,n=(n?"Will":"")+"Change",i="handleProperty"+n,s=String(e),s=s&&s[0].toUpperCase()+s.slice(1),o="handle"+s+n;r.forEach(function(n){var r=n,n=n[o]||n[i]||n;n.call&&n.call(r,t,e,this)},this)},y.prototype.dispatchBeforeOwnPropertyChange=function(e,t){return y.dispatchOwnPropertyChange(this,e,t,!0)},y.prototype.makePropertyObservable=function(e){if(!Array.isArray(this)){g.has(this)||(t={},g.set(this,t));var t=g.get(this);if(!v.call(t,e)){var n,r=this;Object.getOwnPropertyDescriptor(r,e);do{if(n=Object.getOwnPropertyDescriptor(r,e))break;r=Object.getPrototypeOf(r)}while(r);n=n||{value:void 0,enumerable:!0,writable:!0,configurable:!0};if(!n.configurable)throw Error("Can't observe non-configurable properties");t[e]=n,(n.writable||n.set)&&Object.defineProperty(this,e,"value"in n?{get:function(){return n.value},set:function(t){return t===n.value?t:(y.dispatchBeforeOwnPropertyChange(this,e,n.value),n.value=t,y.dispatchOwnPropertyChange(this,e,t),t)},enumerable:n.enumerable,configurable:!0}:{get:function(){if(n.get)return n.get.apply(this,arguments)},set:function(t){var r;return n.get&&(r=n.get.apply(this,arguments)),t===r?t:(y.dispatchBeforeOwnPropertyChange(this,e,r),n.set&&n.set.apply(this,arguments),n.get&&(t=n.get.apply(this,arguments)),y.dispatchOwnPropertyChange(this,e,t),t)},enumerable:n.enumerable,configurable:!0})}}},y.prototype.makePropertyUnobservable=function(e){if(!Array.isArray(this)){if(!g.has(this))throw Error("Can't uninstall observer on property");var t=g.get(this);if(!t[e])throw Error("Can't uninstall observer on property");var n=t[e];delete t[e],Object.defineProperty(this,e,n)}},y.getOwnPropertyChangeDescriptor=function(e,t){return e.getOwnPropertyChangeDescriptor?e.getOwnPropertyChangeDescriptor(t):y.prototype.getOwnPropertyChangeDescriptor.call(e,t)},y.hasOwnPropertyChangeDescriptor=function(e,t){return e.hasOwnPropertyChangeDescriptor?e.hasOwnPropertyChangeDescriptor(t):y.prototype.hasOwnPropertyChangeDescriptor.call(e,t)},y.addOwnPropertyChangeListener=function(e,t,n,r){return e.addOwnPropertyChangeListener?e.addOwnPropertyChangeListener(t,n,r):y.prototype.addOwnPropertyChangeListener.call(e,t,n,r)},y.removeOwnPropertyChangeListener=function(e,t,n,r){return e.removeOwnPropertyChangeListener?e.removeOwnPropertyChangeListener(t,n,r):y.prototype.removeOwnPropertyChangeListener.call(e,t,n,r)},y.dispatchOwnPropertyChange=function(e,t,n,r){return e.dispatchOwnPropertyChange?e.dispatchOwnPropertyChange(t,n,r):y.prototype.dispatchOwnPropertyChange.call(e,t,n,r)},y.addBeforeOwnPropertyChangeListener=function(e,t,n){return y.addOwnPropertyChangeListener(e,t,n,!0)},y.removeBeforeOwnPropertyChangeListener=function(e,t,n){return y.removeOwnPropertyChangeListener(e,t,n,!0)},y.dispatchBeforeOwnPropertyChange=function(e,t,n){return y.dispatchOwnPropertyChange(e,t,n,!0)},y.makePropertyObservable=function(e,t){return e.makePropertyObservable?e.makePropertyObservable(t):y.prototype.makePropertyObservable.call(e,t)},y.makePropertyUnobservable=function(e,t){return e.makePropertyUnobservable?e.makePropertyUnobservable(t):y.prototype.makePropertyUnobservable.call(e,t)},p.module$exports&&(p=p.module$exports);var b={},w=h,E=new w;b.module$exports=S,S.prototype.getRangeChangeDescriptor=function(){return E.has(this)||E.set(this,{isActive:!1,changeListeners:[],willChangeListeners:[]}),E.get(this)},S.prototype.addRangeChangeListener=function(e,t){!this.isObservable&&this.makeObservable&&this.makeObservable();var n=this.getRangeChangeDescriptor();(t?n.willChangeListeners:n.changeListeners).push(e),this.dispatchesRangeChanges=!!(n.willChangeListeners.length+n.changeListeners.length)},S.prototype.removeRangeChangeListener=function(e,t){var n=this.getRangeChangeDescriptor(),r;r=t?n.willChangeListeners:n.changeListeners;var i=r.lastIndexOf(e);if(-1===i)throw Error("Can't remove listener: does not exist.");r.splice(i,1),this.dispatchesRangeChanges=!!(n.willChangeListeners.length+n.changeListeners.length)},S.prototype.dispatchRangeChange=function(e,t,n,r){var i=this.getRangeChangeDescriptor();if(!i.isActive){i.isActive=!0;var s;s=r?i.willChangeListeners:i.changeListeners;try{s.forEach(function(i){i.handleEvent?i.handleEvent({phase:r?"before":"after",currentTarget:this,target:this,plus:e,minus:t,index:n}):(i=r?i.handleRangeWillChange||i:i.handleRangeChange||i,i.call&&i.call(this,e,t,n,r))},this)}finally{i.isActive=!1}}},S.prototype.addBeforeRangeChangeListener=function(e){return this.addRangeChangeListener(e,!0)},S.prototype.removeBeforeRangeChangeListener=function(e){return this.removeRangeChangeListener(e,!0)},S.prototype.dispatchBeforeRangeChange=function(e,t,n){return this.dispatchRangeChange(e,t,n,!0)},b.module$exports&&(b=b.module$exports);var x={},T=h;x.module$exports=Object,Object.empty=Object.freeze(Object.create(null)),Object.isObject=function(e){return Object(e)===e},Object.getValueOf=function(e){return Object.can(e,"valueOf")&&(e=e.valueOf()),e};var N=new T;Object.hash=function(e){return Object.can(e,"hash")?""+e.hash():Object(e)===e?(N.has(e)||N.set(e,Math.random().toString(36).slice(2)),N.get(e)):""+e};var C=Object.prototype.hasOwnProperty;Object.owns=function(e,t){return C.call(e,t)},Object.can=function(e,t){return null!=e&&"function"==typeof e[t]&&!C.call(e,t)},Object.has=function(e,t){if("object"!=typeof e)throw Error("Object.has can't accept non-object: "+typeof e);if(Object.can(e,"has"))return e.has(t);if("string"==typeof t)return t in e&&e[t]!==Object.prototype[t];throw Error("Key must be a string for Object.has on plain objects")},Object.get=function(e,t,n){if("object"!=typeof e)throw Error("Object.get can't accept non-object: "+typeof e);return Object.can(e,"get")?e.get(t,n):Object.has(e,t)?e[t]:n},Object.set=function(e,t,n){Object.can(e,"set")?e.set(t,n):e[t]=n},Object.addEach=function(e,t){Object.can(t,"forEach")?"function"==typeof t.keys?t.forEach(function(t,n){e[n]=t}):t.forEach(function(t){e[t[0]]=t[1]}):Object.keys(t).forEach(function(n){e[n]=t[n]})},Object.forEach=function(e,t,n){Object.keys(e).forEach(function(r){t.call(n,e[r],r,e)})},Object.map=function(e,t,n){return Object.keys(e).map(function(r){return t.call(n,e[r],r,e)})},Object.values=function(e){return Object.map(e,Function.identity)},Object.is=function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t},Object.equals=function(e,t,n){n=n||Object.equals,e=Object.getValueOf(e),t=Object.getValueOf(t);if(e===t)return 0!==e||1/e===1/t;if(Object.can(e,"equals"))return e.equals(t,n);if(Object.can(t,"equals"))return t.equals(e,n);if("object"==typeof e&&"object"==typeof t){var r=Object.getPrototypeOf(e),i=Object.getPrototypeOf(t);if(r===i&&(r===Object.prototype||null===r)){for(var s in e)if(!n(e[s],t[s]))return!1;for(s in t)if(!n(e[s],t[s]))return!1;return!0}}return e!==e&&t!==t},Object.compare=function(e,t){var e=Object.getValueOf(e),t=Object.getValueOf(t),n=typeof e;return e===t||n!==typeof t?0:"number"===n?e-t:"string"===n?e<t?-1:1:Object.can(e,"compare")?e.compare(t):Object.can(t,"compare")?-t.compare(e):0},Object.clone=function(e,t,n){e=Object.getValueOf(e),n=n||new T;if(void 0===t)t=Infinity;else if(0===t)return e;if(Object.isObject(e)){if(!n.has(e))if(Object.can(e,"clone"))n.set(e,e.clone(t,n));else{var r=Object.getPrototypeOf(e);if(null!==r&&r!==Object.prototype)throw Error("Can't clone "+e);r=Object.create(r),n.set(e,r);for(var i in e)r[i]=Object.clone(e[i],t-1,n)}return n.get(e)}return e},Object.clear=function(e){if(Object.can(e,"clear"))e.clear();else for(var t=Object.keys(e),n=t.length;n;)n--,delete e[t[n]];return e},x.module$exports&&(x=x.module$exports);var k={},L=x;k.module$exports=A,A.prototype.equals=function(e,t){return t=t||this.contentEquals||L.equals,this===e?!0:e?this.length===e.length&&this.zip(e).every(function(e){return t(e[0],e[1])}):!1},A.prototype.compare=function(e,t){t=t||this.contentCompare||L.compare;if(this===e)return 0;if(!e)return 1;var n=Math.min(this.length,e.length),r=this.zip(e).reduce(function(e,r,i){return 0===e?i>=n?e:t(r[0],r[1]):e},0);return 0===r?this.length-e.length:r},k.module$exports&&(k=k.module$exports);var O={};O.module$exports=D;var M=x,_=t;M.addEach(D.prototype,_.prototype),D.prototype.constructClone=function(e){var t=[];return Reducible.addEach.call(t,e),t},D.prototype.mapIterator=function(e,t){var n=D(this),r=0;if("[object Function]"!=M.prototype.toString.call(e))throw new TypeError;return new n.constructor(function(){return e.call(t,n.next(),r++,n)})},D.prototype.filterIterator=function(e,t){var n=D(this),r=0;if("[object Function]"!=M.prototype.toString.call(e))throw new TypeError;return new n.constructor(function(){for(var i;;)if(i=n.next(),e.call(t,i,r++,n))return i})},D.prototype.reduce=function(e){var t=D(this),n=arguments[1],r=arguments[2],i=0,s;if("[object Function]"!=M.prototype.toString.call(e))throw new TypeError;try{s=t.next(),n=1<arguments.length?e.call(r,n,s,i,t):s,i++}catch(o){if(isStopIteration(o)){if(1<arguments.length)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value")}throw o}try{for(;;)s=t.next(),n=e.call(r,n,s,i,t),i++}catch(u){if(isStopIteration(u))return n;throw u}},D.prototype.every=function(e){var t=D(this),n=!0;if("[object Function]"!=M.prototype.toString.call(e))throw new TypeError;return t.mapIterator.apply(t,arguments).forEach(function(e){if(!e)throw n=!1,StopIteration}),n},D.prototype.some=function(e){var t=D(this),n=!1;if("[object Function]"!=M.prototype.toString.call(e))throw new TypeError;return t.mapIterator.apply(t,arguments).forEach(function(e){if(e)throw n=!0,StopIteration}),n},D.prototype.concat=function(){return D.concat(Array.prototype.concat.apply(this,arguments))},D.prototype.dropWhile=function(e,t){var n=D(this),r=!1,i;if("[object Function]"!=M.prototype.toString.call(e))throw new TypeError;return n.forEach(function(s,o){if(!e.call(t,s,o,n))throw r=!0,i=s,StopIteration}),r?n.constructor([i]).concat(n):n.constructor([])},D.prototype.takeWhile=function(e,t){var n=D(this);if("[object Function]"!=M.prototype.toString.call(e))throw new TypeError;return n.mapIterator(function(r,i){if(!e.call(t,r,i,n))throw StopIteration;return r})},D.prototype.filterIterator=function(e,t){var n=D(this),r=0;if("[object Function]"!=M.prototype.toString.call(e))throw new TypeError;return new n.constructor(function(){for(var i;;)if(i=n.next(),e.call(t,i,r++,n))return i})},D.prototype.zip=function(){return D.transpose(Array.prototype.concat.apply(this,arguments))},D.prototype.enumerate=function(e){return D.count(e).zip(this)},D.iterate=function(e){var t;return t=0,new D(function(){if("object"==typeof e)for(;!(t in e);){if(t>=e.length)throw StopIteration;t+=1}else if(t>=e.length)throw StopIteration;var n=e[t];return t+=1,n})},D.cycle=function(e,t){2>arguments.length&&(t=Infinity);var n=function(){throw StopIteration};return new D(function(){var r;try{return n()}catch(i){if(isStopIteration(i)){if(0>=t)throw i;return t--,r=D.iterate(e),n=r.next.bind(r),n()}throw i}})},D.concat=function(e){var e=D(e),t=function(){throw StopIteration};return new D(function(){var n;try{return t()}catch(r){if(isStopIteration(r))return n=D(e.next()),t=n.next.bind(n),t();throw r}})},D.transpose=function(e){return e=D(e).map(D),1>e.length?new D([]):new D(function(){var t,n=e.map(function(e){try{return e.next()}catch(n){if(!isStopIteration(n))throw n;t=!0}});if(t)throw StopIteration;return n})},D.zip=function(){return D.transpose(Array.prototype.slice.call(arguments))},D.chain=function(){return D.concat(Array.prototype.slice.call(arguments))},D.range=function(e,t,n){return 3>arguments.length&&(n=1),2>arguments.length&&(t=e,e=0),e=e||0,new D(function(){if(e>=t)throw StopIteration;if(isNaN(e))throw"";var r=e;return e+=n,r})},D.count=function(e,t){return D.range(e,Infinity,t||1)},D.repeat=function(e,t){return 2>arguments.length&&(t=Infinity),(new D.range(+t)).mapIterator(function(){return e})},"undefined"==typeof isStopIteration&&(e.isStopIteration=function(e){return"[object StopIteration]"===M.prototype.toString.call(e)}),"undefined"==typeof StopIteration&&(e.StopIteration={},M.prototype.toString=function(t){return function(){return this===e.StopIteration||this instanceof e.ReturnValue?"[object StopIteration]":t.call(this,arguments)}}(M.prototype.toString)),"undefined"==typeof ReturnValue&&(e.ReturnValue=function(t){if(!(this instanceof e.ReturnValue))return new e.ReturnValue(t);this.value=t}),O.module$exports&&(O=O.module$exports);var P={},H=f,B=t,j=k,F=h;P.module$exports=Array,Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.from=function(e){var t=[];return t.addEach(e),t},Array.prototype.addEach=B.prototype.addEach,Array.prototype.deleteEach=B.prototype.deleteEach,Array.prototype.toArray=B.prototype.toArray,Array.prototype.toObject=B.prototype.toObject,Array.prototype.all=B.prototype.all,Array.prototype.any=B.prototype.any,Array.prototype.min=B.prototype.min,Array.prototype.max=B.prototype.max,Array.prototype.sum=B.prototype.sum,Array.prototype.average=B.prototype.average,Array.prototype.only=B.prototype.only,Array.prototype.flatten=B.prototype.flatten,Array.prototype.zip=B.prototype.zip,Array.prototype.sorted=B.prototype.sorted,Array.prototype.reversed=B.prototype.reversed,Array.prototype.constructClone=function(e){var t=new this.constructor;return t.addEach(e),t},Array.prototype.has=function(e,t){return-1!==this.find(e,t)},Array.prototype.get=function(e){if(+e!==e)throw Error("Indicies must be numbers");return this[e]},Array.prototype.set=function(e,t){return this.splice(e,1,t),!0},Array.prototype.add=function(e){return this.push(e),!0},Array.prototype["delete"]=function(e,t){var n=this.find(e,t);return-1!==n?(this.splice(n,1),!0):!1},Array.prototype.find=function(e,t){for(var t=t||this.contentEquals||Object.equals,n=0;n<this.length;n++)if(n in this&&t(this[n],e))return n;return-1},Array.prototype.findLast=function(e,t){var t=t||this.contentEquals||Object.equals,n=this.length;do if(n--,n in this&&t(this[n],e))return n;while(0<n);return-1},Array.prototype.swap=function(e,t,n){var r=Array.prototype.slice.call(arguments,0,2);return n&&r.push.apply(r,n),this.splice.apply(this,r)},Array.prototype.one=function(){if(0===this.length)throw Error("Can't get one element from empty array.");for(var e in this)if(Object.owns(this,e))return this[e]},Array.prototype.clear=function(){return this.length=0,this},Array.prototype.compare=function(e,t){var t=t||Object.compare,n,r,i,s;if(this===e)return 0;if(!e||!Array.isArray(e))return j.prototype.compare.call(this,e,t);r=Math.min(this.length,e.length);for(n=0;n<r;n++)if(n in this){if(!(n in e))return-1;if(i=this[n],s=e[n],i=t(i,s))return i}else if(n in e)return 1;return this.length-e.length},Array.prototype.equals=function(e){var t=t||Object.equals,n=0,r=this.length,i,s;if(this===e)return!0;if(!e||!Array.isArray(e))return j.prototype.equals.call(this,e);if(r!==e.length)return!1;for(;n<r;++n)if(n in this){if(i=this[n],s=e[n],i!==s&&i&&s&&!t(i,s))return!1}else if(n in e)return!1;return!0},Array.prototype.clone=function(e,t){if(void 0===e)e=Infinity;else if(0===e)return this;var t=t||new F,n=[],r;for(r in this)Object.owns(this,r)&&(n[r]=Object.clone(this[r],e-1,t));return n},Array.prototype.iterate=function(e,t){return new I(this,e,t)},Array.prototype.Iterator=I,I.prototype.next=function(){if(this.start===(null==this.end?this.array.length:this.end))throw StopIteration;return this.array[this.start++]},P.module$exports&&(P=P.module$exports);var q={},R=o,U=P,z=x,W=f,X={};X.module$exports=Q;var V=q,$=t,J=k,K=p;Object.addEach(Q.prototype,$.prototype),Object.addEach(Q.prototype,J.prototype),Object.addEach(Q.prototype,K.prototype),Q.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.content)},Q.prototype.find=function(e,t){for(var t=t||this.contentEquals,n=this.head,r=n.next;r!==n;){if(t(r.value,e))return r;r=r.next}},Q.prototype.findLast=function(e,t){for(var t=t||this.contentEquals,n=this.head,r=n.prev;r!==n;){if(t(r.value,e))return r;r=r.prev}},Q.prototype.has=function(e,t){return!!this.find(e,t)},Q.prototype.get=function(e,t){var n=this.find(e,t);return n?n.value:this.content()},Q.prototype["delete"]=function(e,t){var n=this.findLast(e,t);return n?(n["delete"](),this.length--,!0):!1},Q.prototype.clear=function(){this.head.next=this.head.prev=this.head,this.length=0},Q.prototype.add=function(e){return this.head.addBefore(new this.Node(e)),this.length++,!0},Q.prototype.push=function(){for(var e=this.head,t=0;t<arguments.length;t++){var n=new this.Node(arguments[t]);e.addBefore(n),this.length++}},Q.prototype.unshift=function(){for(var e=this.head,t=0;t<arguments.length;t++){var n=new this.Node(arguments[t]);e.addAfter(n),this.length++,e=n}},Q.prototype.pop=function(){var e,t=this.head;return t.prev!==t&&(e=t.prev.value,t.prev["delete"](),this.length--),e},Q.prototype.shift=function(){var e,t=this.head;return t.prev!==t&&(e=t.next.value,t.next["delete"](),this.length--),e},Q.prototype.scan=function(e,t){var n=this.head;if("number"==typeof e){var r=e;if(0<=r)for(e=n.next;r&&(r--,e=e.next,e!=n););else for(e=n;0>r&&(r++,e=e.prev,e!=n););return e}return e||t},Q.prototype.slice=function(e,t){for(var n=[],r=this.head,e=this.scan(e,r.next),t=this.scan(t,r);e!==t&&e!==r;)n.push(e.value),e=e.next;return n},Q.prototype.splice=function(e,t){return this.swap(e,t,Array.prototype.slice.call(arguments,2))},Q.prototype.swap=function(e,t,n){var r=[],i=e,e=this.scan(e,this.head);for(void 0===t&&(t=Infinity);t--&&0<=t&&e!==this.head;)r.push(e.value),e["delete"](),e=e.next,this.length--;if(n){null===i&&e===this.head&&(e=this.head.next);for(t=0;t<n.length;t++)i=new this.Node(n[t]),e.addBefore(i);this.length+=n.length}return r},Q.prototype.reverse=function(){var e=this.head;do{var t=e.next;e.next=e.prev,e.prev=t,e=e.next}while(e!==this.head);return this},Q.prototype.reduce=function(e,t,n){for(var r=this.head,i=r.next;i!==r;)t=e.call(n,t,i.value,i,this),i=i.next;return t},Q.prototype.reduceRight=function(e,t,n){for(var r=this.head,i=r.prev;i!==r;)t=e.call(n,t,i.value,i,this),i=i.prev;return t},Q.prototype.one=function(){if(this.head===this.head.next)throw Error("Can't get one value from empty list");return this.head.next.value},Q.prototype.iterate=function(){return new G(this.head)},G.prototype.next=function(){if(this.at===this.head)throw StopIteration;var e=this.at.value;return this.at=this.at.next,e},Q.prototype.Node=Y,Y.prototype["delete"]=function(){this.prev.next=this.next,this.next.prev=this.prev},Y.prototype.addBefore=function(e){var t=this.prev;this.prev=e,e.prev=t,t.next=e,e.next=this},Y.prototype.addAfter=function(e){var t=this.next;this.next=e,e.next=t,t.prev=e,e.prev=this},X.module$exports&&(X=X.module$exports);var Z={},et=h,tt=X;Z.module$exports=nt;var rt=Object.prototype.hasOwnProperty;nt.prototype.getMapChangeDescriptor=function(){return this.mapChangeDescriptor||(this.mapChangeDescriptor={willChangeListeners:new tt,changeListeners:new tt}),this.mapChangeDescriptor},nt.prototype.addMapChangeListener=function(e,t){this.makeObservable&&!this.dispatchMapChanges&&this.makeObservable();var n=this.getMapChangeDescriptor();(t?n.willChangeListeners:n.changeListeners).push(e),this.dispatchesMapChanges=!0},nt.prototype.removeMapChangeListener=function(e,t){var n=this.getMapChangeDescriptor(),n=(t?n.willChangeListeners:n.changeListeners).findLast(e);if(!n)throw Error("Can't remove listener: does not exist.");n["delete"]()},nt.prototype.dispatchMapChange=function(e,t,n){var r=this.getMapChangeDescriptor(),i="handleMap"+((n?"Will":"")+"Change");(n?r.willChangeListeners:r.changeListeners).forEach(function(n){var r=n,n=n[i]||n;n.call&&n.call(r,t,e,this)},this)},nt.prototype.addBeforeMapChangeListener=function(e){return this.addMapChangeListener(e,!0)},nt.prototype.removeBeforeMapChangeListener=function(e){return this.removeMapChangeListener(e,!0)},nt.prototype.dispatchBeforeMapChange=function(e,t){return this.dispatchMapChange(e,t,!0)},Z.module$exports&&(Z=Z.module$exports);var it={},st=x,ot=Z,ut=p;it.module$exports=at,st.addEach(at.prototype,ot.prototype),st.addEach(at.prototype,ut.prototype),at.prototype.addEach=function(e){e&&st(e)===e&&("function"==typeof e.forEach?"function"==typeof e.keys?e.forEach(function(e,t){this.set(t,e)},this):e.forEach(function(e){this.set(e[0],e[1])},this):st.keys(e).forEach(function(t){this.set(t,e[t])},this))},at.prototype.get=function(e,t){var n=this.store.get(new this.Item(e));return n?n.value:1<arguments.length?t:this.content(e)},at.prototype.set=function(e,t){var n=new this.Item(e,t),r=this.store.get(n),i=!1;return r?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,r.value),r.value=t):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,void 0),this.store.add(n)&&(this.length++,i=!0)),this.dispatchesMapChanges&&this.dispatchMapChange(e,t),i},at.prototype.add=function(e,t){return this.set(t,e)},at.prototype.has=function(e){return this.store.has(new this.Item(e))},at.prototype["delete"]=function(e){var t=new this.Item(e);if(this.store.has(t)){var n=this.store.get(t).value;return this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,n),this.store["delete"](t),this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0}return!1},at.prototype.clear=function(){this.store.clear(),this.length=0},at.prototype.reduce=function(e,t,n){return this.store.reduce(function(t,r){return e.call(n,t,r.value,r.key,this)},t,this)},at.prototype.reduceRight=function(e,t,n){return this.store.reduceRight(function(t,r){return e.call(n,t,r.value,r.key,this)},t,this)},at.prototype.keys=function(){return this.map(function(e,t){return t})},at.prototype.values=function(){return this.map(Function.identity)},at.prototype.items=function(){return this.map(function(e,t){return[t,e]})},at.prototype.equals=function(e,t){return t=t||st.equals,this===e?!0:st.can(e,"every")?e.length===this.length&&e.every(function(e,n){return t(this.get(n),e)},this):st.keys(e).length===this.length&&st.keys(e).every(function(n){return t(this.get(n),e[n])},this)},at.prototype.Item=ft,it.module$exports&&(it=it.module$exports);var lt={},ct=q,ht=t,pt=it,dt=p;lt.module$exports=vt,Object.addEach(vt.prototype,ht.prototype),Object.addEach(vt.prototype,pt.prototype),Object.addEach(vt.prototype,dt.prototype),vt.prototype.constructClone=function(e){return new this.constructor(e,this.mangle,this.content)},vt.prototype.assertString=function(e){if("string"!=typeof e)throw new TypeError("key must be a string.")},vt.prototype.get=function(e,t){this.assertString(e);var n=mt(e);return n in this.store?this.store[n]:1<arguments.length?t:this.content()},vt.prototype.set=function(e,t){this.assertString(e);var n=mt(e);return n in this.store?(this.store[n]=t,!1):(this.length++,this.store[n]=t,!0)},vt.prototype.has=function(e){return this.assertString(e),mt(e)in this.store},vt.prototype["delete"]=function(e){return this.assertString(e),mt(e)in this.store?(delete this.store[mt(e)],this.length--,!0):!1},vt.prototype.clear=function(){for(var e in this.store)delete this.store[e];this.length=0},vt.prototype.reduce=function(e,t,n){for(var r in this.store)t=e.call(n,t,this.store[r],gt(r),this);return t},vt.prototype.one=function(){for(var e in this.store)return this.store[e];throw Error("Can't get one value from empty dictionary.")},lt.module$exports&&(lt=lt.module$exports);var yt={},bt=q,wt=lt,Et=X,St=t,xt=i,Tt=l,Nt=p,Ct=Object.prototype.hasOwnProperty;yt.module$exports=kt,Object.addEach(kt.prototype,St.prototype),Object.addEach(kt.prototype,xt.prototype),Object.addEach(kt.prototype,Nt.prototype),kt.prototype.Buckets=wt,kt.prototype.Bucket=Et,kt.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.content)},kt.prototype.has=function(e){var t=this.contentHash(e);return this.buckets.get(t).has(e)},kt.prototype.get=function(e){var t=this.contentHash(e),n=this.buckets;return n.has(t)?n.get(t).get(e):this.content(e)},kt.prototype["delete"]=function(e){var t=this.contentHash(e),n=this.buckets;if(n.has(t)){var r=n.get(t);if(r["delete"](e))return this.length--,0===r.length&&n["delete"](t),!0}return!1},kt.prototype.clear=function(){this.buckets.clear(),this.length=0},kt.prototype.add=function(e){var t=this.contentHash(e),n=this.buckets;return n.has(t)||n.set(t,new this.Bucket(null,this.contentEquals)),n.get(t).has(e)?!1:(n.get(t).add(e),this.length++,!0)},kt.prototype.reduce=function(e,t,n){return this.buckets.reduce(function(t,r){return r.reduce(function(t,r){return e.call(n,t,r,r,this)},t,this)},t,this)},kt.prototype.one=function(){if(0===this.length)throw Error("Can't get one value from empty set.");return this.buckets.one().one()},kt.prototype.iterate=function(){return this.buckets.values().flatten().iterate()},kt.prototype.log=function(e,t,n,r){e=e||Tt.unicodeSharp,t=t||this.logNode,n||(n=console.log,r=console);var n=n.bind(r),i=this.buckets,s=i.keys();s.forEach(function(o,u){var a,f;u===s.length-1?(a=e.fromAbove,f=" "):(a=u===0?e.branchDown:e.fromBoth,f=e.strafe);var l=i.get(o);n.call(r,a+e.through+e.branchDown+" "+o),l.forEach(function(i,s){var o,u;s===l.head.prev?(o=e.fromAbove,u=" "):(o=e.fromBoth,u=e.strafe);var a;t(s,function(t){a?n.call(r,f+" "+u+"  "+t):(n.call(r,f+" "+o+e.through+e.through+t),a=!0)},function(t){n.call(r,f+" "+e.strafe+"  "+t)})})})},kt.prototype.logNode=function(e,t){var n=e.value;Object(n)===n?JSON.stringify(n,null,4).split("\n").forEach(function(e){t(" "+e)}):t(" "+n)},yt.module$exports&&(yt=yt.module$exports);var Lt={},At=q,Ot=yt,Mt=t,_t=it,Dt=p;Lt.module$exports=Pt,Object.addEach(Pt.prototype,Mt.prototype),Object.addEach(Pt.prototype,_t.prototype),Object.addEach(Pt.prototype,Dt.prototype),Pt.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.content)},Pt.prototype.log=function(e,t){t=t||this.stringify,this.store.log(e,t)},Pt.prototype.stringify=function(e,t){return t+JSON.stringify(e.key)+": "+JSON.stringify(e.value)},Lt.module$exports&&(Lt=Lt.module$exports);var Ht={},Bt=q,jt=X,Ft=yt,It=t,qt=i,Rt=p,Ut=b;Ht.module$exports=zt,Object.addEach(zt.prototype,It.prototype),Object.addEach(zt.prototype,qt.prototype),Object.addEach(zt.prototype,Rt.prototype),Object.addEach(zt.prototype,Ut.prototype),zt.prototype.Order=jt,zt.prototype.Store=Ft,zt.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.content)},zt.prototype.has=function(e){return e=new this.order.Node(e),this.store.has(e)},zt.prototype.get=function(e){var t=new this.order.Node(e);return(t=this.store.get(t))?t.value:this.content(e)},zt.prototype.add=function(e){var t=new this.order.Node(e);return this.store.has(t)?!1:(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([e],[],0),this.order.add(e),t=this.order.head.prev,this.store.add(t),this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([e],[],0),!0)},zt.prototype["delete"]=function(e){var t=new this.order.Node(e);return this.store.has(t)?(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[e],0),t=this.store.get(t),this.store["delete"](t),t["delete"](),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange([],[e],0),!0):!1},zt.prototype.one=function(){if(0===this.length)throw Error("Can't get one value from empty set.");return this.store.one().value},zt.prototype.clear=function(){this.store.clear(),this.order.clear(),this.length=0},zt.prototype.reduce=function(e,t,n){return this.order.reduce(function(t,r){return e.call(n,t,r,r,this)},t,this)},zt.prototype.reduceRight=function(e,t,n){return this.order.reduceRight(function(t,r){return e.call(n,t,r,r,this)},t,this)},zt.prototype.iterate=function(){return this.order.iterate()},zt.prototype.log=function(){var e=this.store;return e.log.apply(e,arguments)},Ht.module$exports&&(Ht=Ht.module$exports);var Wt={},Xt=q,Vt=Ht,$t=t,Jt=i,Kt=p;Wt.module$exports=Qt,Object.addEach(Qt.prototype,$t.prototype),Object.addEach(Qt.prototype,Jt.prototype),Object.addEach(Qt.prototype,Kt.prototype),Qt.prototype.constructClone=function(e){return new this.constructor(e,this.maxLength,this.contentEquals,this.contentHash,this.content)},Qt.prototype.has=function(e){return this.store.has(e)},Qt.prototype.get=function(e){return e=this.store.get(e),void 0!==e?(this.store["delete"](e),this.store.add(e)):e=this.content(),e},Qt.prototype.add=function(e){return this.store.has(e)&&(this.store["delete"](e),this.length--),this.store.add(e),this.length++,this.store.length>this.maxLength?(this.store["delete"](this.store.order.head.next.value),this.length--,!1):!0},Qt.prototype["delete"]=function(e){return this.store["delete"](e)?(this.length--,!0):!1},Qt.prototype.one=function(){if(0===this.length)throw Error("Can't get one value from empty collection.");return this.store.one()},Qt.prototype.clear=function(){this.store.clear(),this.length=0},Qt.prototype.reduce=function(e,t,n){return this.store.reduce(function(t,r){return e.call(n,t,r,r,this)},t,this)},Qt.prototype.reduceRight=function(e,t,n){return this.store.reduceRight(function(e,t){return callback.call(n,e,t,t,this)},basis,this)},Qt.prototype.iterate=function(){return this.store.iterate()},Wt.module$exports&&(Wt=Wt.module$exports);var Gt={},Yt=q,Zt=Wt,en=t,tn=it,nn=p;Gt.module$exports=rn,Object.addEach(rn.prototype,en.prototype),Object.addEach(rn.prototype,tn.prototype),Object.addEach(rn.prototype,nn.prototype),rn.prototype.constructClone=function(e){return new this.constructor(e,this.maxLength,this.contentEquals,this.contentHash,this.content)},rn.prototype.log=function(e,t){t=t||this.stringify,this.store.log(e,t)},rn.prototype.stringify=function(e,t){return t+JSON.stringify(e.key)+": "+JSON.stringify(e.value)},Gt.module$exports&&(Gt=Gt.module$exports);var sn={},on=q,un=Ht,an=t,fn=it,ln=p;sn.module$exports=cn,Object.addEach(cn.prototype,an.prototype),Object.addEach(cn.prototype,fn.prototype),Object.addEach(cn.prototype,ln.prototype),cn.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.content)},cn.prototype.log=function(e,t){t=t||this.stringify,this.store.log(e,t)},cn.prototype.stringify=function(e,t){return t+JSON.stringify(e.key)+": "+JSON.stringify(e.value)},sn.module$exports&&(sn=sn.module$exports);var hn={},pn=sn;hn.module$exports=dn,dn.prototype=Object.create(pn.prototype),dn.prototype.constructor=dn,dn.prototype.constructClone=function(e){return new this.constructor(e,this.bucket,this.contentEquals,this.contentHash)},dn.prototype.set=function(e,t){var n=this.get(e);n.swap(0,n.length,t)},dn.prototype.bucket=function(){return[]},hn.module$exports&&(hn=hn.module$exports);var vn={};vn.module$exports=wn;var mn=q,gn=t,yn=p,bn=b;Object.addEach(wn.prototype,gn.prototype),Object.addEach(wn.prototype,yn.prototype),Object.addEach(wn.prototype,bn.prototype),wn.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare,this.content)},wn.prototype.has=function(e){var t=En(this.array,e,this.contentCompare);return 0<=t&&this.contentEquals(this.array[t],e)},wn.prototype.get=function(e){var t=Sn(this.array,e,this.contentCompare,this.contentEquals);return-1!==t?this.array[t]:this.content(e)},wn.prototype.add=function(e){var t=Tn(this.array,e,this.contentCompare);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([e],[],t),this.array.splice(t,0,e),this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([e],[],t),!0},wn.prototype["delete"]=function(e){var t=Sn(this.array,e,this.contentCompare,this.contentEquals);return-1!==t?(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[e],t),this.array.splice(t,1),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange([],[e],t),!0):!1},wn.prototype.indexOf=function(e){return Sn(this.array,e,this.contentCompare,this.contentEquals)},wn.prototype.lastIndexOf=function(e){return xn(this.array,e,this.contentCompare,this.contentEquals)},wn.prototype.find=function(e){return Sn(this.array,e,this.contentCompare,this.contentEquals)},wn.prototype.findLast=function(e){return xn(this.array,e,this.contentCompare,this.contentEquals)},wn.prototype.push=function(){this.addEach(arguments)},wn.prototype.unshift=function(){this.addEach(arguments)},wn.prototype.pop=function(){return this.array.pop()},wn.prototype.shift=function(){return this.array.shift()},wn.prototype.slice=function(){return this.array.slice.apply(this.array,arguments)},wn.prototype.splice=function(e,t){return this.swap(e,t,Array.prototype.slice.call(arguments,2))},wn.prototype.swap=function(e,t,n){if(void 0===e&&void 0===t)return[];e=e||0,0>e&&(e+=this.length),void 0===t&&(t=Infinity);var r=this.slice(e,e+t);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(n,r,e),this.array.splice(e,t),this.addEach(n),this.dispatchesRangeChanges&&this.dispatchRangeChange(n,r,e),r},wn.prototype.reduce=function(e,t,n){return this.array.reduce(function(t,r,i){return e.call(n,t,r,i,this)},t,this)},wn.prototype.reduceRight=function(e,t,n){return this.array.reduceRight(function(e,t,r){return callback.call(n,e,t,r,this)},basis,this)},wn.prototype.min=function(){if(this.length)return this.array[0]},wn.prototype.max=function(){if(this.length)return this.array[this.length-1]},wn.prototype.one=function(){return this.array.one()},wn.prototype.clear=function(){var e;this.dispatchesRangeChanges&&(e=this.array.slice(),this.dispatchBeforeRangeChange([],e,0)),this.length=0,this.array.clear(),this.dispatchesRangeChanges&&this.dispatchRangeChange([],e,0)},wn.prototype.equals=function(e,t){return this.array.equals(e,t)},wn.prototype.compare=function(e,t){return this.array.compare(e,t)},wn.prototype.iterate=function(e,t){return new this.Iterator(this.array,e,t)},wn.prototype.Iterator=Array.prototype.Iterator,vn.module$exports&&(vn=vn.module$exports);var Nn={};Nn.module$exports=On;var Cn=q,kn=vn,Ln=i,An=p;On.prototype=Object.create(kn.prototype),On.prototype.constructor=On,Object.addEach(On.prototype,Ln.prototype),Object.addEach(On.prototype,An.prototype),On.prototype.add=function(e){return this.has(e)?!1:(kn.prototype.add.call(this,e),!0)},On.prototype.reduce=function(e,t,n){var r=this;return this.array.reduce(function(t,i,s){return e.call(n,t,i,i,r,s)},t)},On.prototype.reduceRight=function(e,t,n){var r=this;return this.array.reduceRight(function(t,i,s){return e.call(n,t,i,i,r,s)},t)},Nn.module$exports&&(Nn=Nn.module$exports);var Mn={},_n=q,Dn=Nn,Pn=t,Hn=it,Bn=p;Mn.module$exports=jn,Object.addEach(jn.prototype,Pn.prototype),Object.addEach(jn.prototype,Hn.prototype),Object.addEach(jn.prototype,Bn.prototype),jn.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare,this.content)},Mn.module$exports&&(Mn=Mn.module$exports);var Fn={};Fn.module$exports=Xn;var In=q,qn=t,Rn=i,Un=p,zn=b,Wn=l;Object.addEach(Xn.prototype,qn.prototype),Object.addEach(Xn.prototype,Rn.prototype),Object.addEach(Xn.prototype,Un.prototype),Object.addEach(Xn.prototype,zn.prototype),Xn.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare,this.content)},Xn.prototype.has=function(e){return this.root?(this.splay(e),this.contentEquals(e,this.root.value)):!1},Xn.prototype.get=function(e){return this.root&&(this.splay(e),this.contentEquals(e,this.root.value))?this.root.value:this.content(e)},Xn.prototype.add=function(e){var t=new this.Node(e);return this.root?(this.splay(e),!this.contentEquals(e,this.root.value))?(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([e],[],this.root.index),0>this.contentCompare(e,this.root.value)?(t.right=this.root,t.left=this.root.left,this.root.left=null):(t.left=this.root,t.right=this.root.right,this.root.right=null),this.root.touch(),t.touch(),this.root=t,this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([e],[],this.root.index),!0):!1:(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([e],[],0),this.root=t,this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([e],[],0),!0)},Xn.prototype["delete"]=function(e){if(this.root&&(this.splay(e),this.contentEquals(e,this.root.value))){var t=this.root.index;this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[e],t);if(this.root.left){var n=this.root.right;this.root=this.root.left,this.splay(e),this.root.right=n}else this.root=this.root.right;return this.length--,this.root&&this.root.touch(),this.dispatchesRangeChanges&&this.dispatchRangeChange([],[e],t),!0}return!1},Xn.prototype.indexOf=function(e){return this.root&&(this.splay(e),this.contentEquals(e,this.root.value))?this.root.index:-1},Xn.prototype.find=function(e){if(this.root&&(this.splay(e),this.contentEquals(e,this.root.value)))return this.root},Xn.prototype.findGreatest=function(e){if(this.root){for(e=e||this.root;e.right;)e=e.right;return e}},Xn.prototype.findLeast=function(e){if(this.root){for(e=e||this.root;e.left;)e=e.left;return e}},Xn.prototype.findGreatestLessThanOrEqual=function(e){if(this.root)return this.splay(e),this.root},Xn.prototype.findGreatestLessThan=function(e){if(this.root)return this.splay(e),this.root.getPrevious()},Xn.prototype.findLeastGreaterThanOrEqual=function(e){if(this.root)return this.splay(e),0===this.contentCompare(e,this.root.value)?this.root:this.root.getNext()},Xn.prototype.findLeastGreaterThan=function(e){if(this.root)return this.splay(e),this.contentCompare(e,this.root.value),this.root.getNext()},Xn.prototype.pop=function(){if(this.root){var e=this.findGreatest();return this["delete"](e.value),e.value}},Xn.prototype.shift=function(){if(this.root){var e=this.findLeast();return this["delete"](e.value),e.value}},Xn.prototype.push=function(){this.addEach(arguments)},Xn.prototype.unshift=function(){this.addEach(arguments)},Xn.prototype.slice=function(e,t){e=e||0,t=t||this.length,0>e&&(e+=this.length),0>t&&(t+=this.length);var n=[];if(this.root)for(this.splayIndex(e);this.root.index<t;){n.push(this.root.value);if(!this.root.right)break;this.splay(this.root.getNext().value)}return n},Xn.prototype.splice=function(e,t){return this.swap(e,t,Array.prototype.slice.call(arguments,2))},Xn.prototype.swap=function(e,t,n){if(void 0===e&&void 0===t)return[];e=e||0,0>e&&(e+=this.length),void 0===t&&(t=Infinity);var r=[];if(this.root){this.splayIndex(e);for(e=0;e<t;e++){r.push(this.root.value);var i=this.root.getNext();this["delete"](this.root.value);if(!i)break;this.splay(i.value)}}return this.addEach(n),r},Xn.prototype.splay=function(e){var t,n,r,i,s,o;if(this.root){t=n=r=new this.Node,o=new this.Node;for(s=this.root;;)if(i=this.contentCompare(e,s.value),0>i){if(!s.left)break;if(0>this.contentCompare(e,s.left.value)&&(i=s.left,s.left=i.right,s.touch(),i.right=s,i.touch(),s=i,!s.left))break;i=new Vn,i.right=s,i.left=o.left,o.left=i,r.left=s,r.touch(),r=s,s=s.left}else{if(!(0<i))break;if(!s.right)break;if(0<this.contentCompare(e,s.right.value)&&(i=s.right,s.right=i.left,s.touch(),i.left=s,i.touch(),s=i,!s.right))break;i=new Vn,i.left=s,i.right=o.right,o.right=i,n.right=s,n.touch(),n=s,s=s.right}n.right=s.left,n.touch(),r.left=s.right,r.touch(),s.left=t.right;for(s.right=t.left;o.left;)o.left.right.touch(),o.left=o.left.left;for(;o.right;)o.right.left.touch(),o.right=o.right.right;s.touch(),this.root=s}},Xn.prototype.splayIndex=function(e){if(this.root){for(var t=this.root,n=this.root.index;n!==e;)if(n>e&&t.left)t=t.left,n-=1+(t.right?t.right.length:0);else{if(!(n<e&&t.right))break;t=t.right,n+=1+(t.left?t.left.length:0)}return this.splay(t.value),this.root.index===e}return!1},Xn.prototype.reduce=function(e,t,n){return this.root&&(t=this.root.reduce(e,t,n,this)),t},Xn.prototype.reduceRight=function(e,t,n){return this.root&&(t=this.root.reduceRight(e,t,n,this)),t},Xn.prototype.min=function(e){if(e=this.findLeast(e))return e.value},Xn.prototype.max=function(e){if(e=this.findGreatest(e))return e.value},Xn.prototype.one=function(){if(!this.root)throw Error("Can't get one value from empty set");return this.root.value},Xn.prototype.clear=function(){var e;this.dispatchesRangeChanges&&(e=this.toArray(),this.dispatchBeforeRangeChange([],e,0)),this.root=null,this.length=0,this.dispatchesRangeChanges&&this.dispatchRangeChange([],e,0)},Xn.prototype.iterate=function(e,t){return new this.Iterator(this,e,t)},Xn.prototype.Iterator=$n,Xn.prototype.summary=function(){return this.root?this.root.summary():"()"},Xn.prototype.log=function(e,t,n,r){e=e||Wn.unicodeRound,t=t||this.logNode,n||(n=console.log,r=console),n=n.bind(r),this.root&&this.root.log(e,t,n,n)},Xn.prototype.logNode=function(e,t){t(" "+e.value)},Xn.logCharsets=Wn,Xn.prototype.Node=Vn,Vn.prototype.reduce=function(e,t,n,r,i){return i=i||0,this.left&&(t=this.left.reduce(e,t,n,r,i+1)),t=e.call(n,t,this.value,this.value,r,this,i),this.right&&(t=this.right.reduce(e,t,n,r,i+1)),t},Vn.prototype.reduceRight=function(e,t,n,r,i){return i=i||0,this.right&&(t=this.right.reduce(e,t,n,r,i+1)),t=e.call(n,t,this.value,this.value,r,this,i),this.left&&(t=this.left.reduce(e,t,n,r,i+1)),t},Vn.prototype.touch=function(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0),this.index=this.left?this.left.length:0},Vn.prototype.checkIntegrity=function(){var e;e=1+(this.left?this.left.checkIntegrity():0),e+=this.right?this.right.checkIntegrity():0;if(this.length!==e)throw Error("Integrity check failed: "+this.summary());return e},Vn.prototype.getNext=function(){var e=this;if(e.right){for(e=e.right;e.left;)e=e.left;return e}},Vn.prototype.getPrevious=function(){var e=this;if(e.left){for(e=e.left;e.right;)e=e.right;return e}},Vn.prototype.summary=function(){var e=this.value||"-",e=e+(" <"+this.length);return!this.left&&!this.right?"("+e+")":"("+e+" "+(this.left?this.left.summary():"()")+", "+(this.right?this.right.summary():"()")+")"},Vn.prototype.log=function(e,t,n,r){var i=this,s;s=this.left&&this.right?e.intersection:this.left?e.branchUp:this.right?e.branchDown:e.through;var o;this.left&&this.left.log(e,t,function(t){o?r(e.strafe+" "+t):(o=!0,r(e.fromBelow+e.through+t))},function(e){r("  "+e)});var u;t(this,function(t){u?n((i.right?e.strafe:" ")+t):(u=!0,n(s+t))},function(t){r((i.left?e.strafe:" ")+t)});var a;this.right&&this.right.log(e,t,function(t){a?n("  "+t):(a=!0,n(e.fromAbove+e.through+t))},function(t){n(e.strafe+" "+t)})},$n.prototype.next=function(){var e;e=this.prev?this.set.findLeastGreaterThan(this.prev.value):this.set.findLeast();if(!e)throw StopIteration;if(void 0!==this.end&&0<=this.set.contentCompare(e.value,this.end))throw StopIteration;return this.prev=e,e.value},Fn.module$exports&&(Fn=Fn.module$exports);var Jn={},Kn=q,Qn=Fn,Gn=t,Yn=it,Zn=p;Jn.module$exports=er,Object.addEach(er.prototype,Gn.prototype),Object.addEach(er.prototype,Yn.prototype),Object.addEach(er.prototype,Zn.prototype),er.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare,this.content)},er.prototype.log=function(e,t){t=t||this.stringify,this.store.log(e,t)},er.prototype.report=function(e,t,n,r){r=r||this.stringify,this.store.report(e,t,n,r)},er.prototype.stringify=function(e,t,n,r){e.call(t,r+" "+n.value.key+": "+n.value.value)},Jn.module$exports&&(Jn=Jn.module$exports);var tr={},nr=q;e.List=X,e.Set=Ht,e.Map=sn,e.MultiMap=hn,e.WeakMap=h,e.SortedSet=Fn,e.SortedMap=Jn,e.LruSet=Wt,e.LruMap=Gt,e.SortedArray=vn,e.SortedArraySet=Nn,e.SortedArrayMap=Mn,e.FastSet=yt,e.FastMap=Lt,e.Dict=lt,e.Iterator=O})(this)