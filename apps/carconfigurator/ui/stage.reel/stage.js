var Montage=require("montage").Montage,Component=require("montage/ui/component").Component,Utilities=require("c2j/runtime/utilities").Utilities,Node=require("c2j/runtime/node").Node,Camera=require("c2j/runtime/camera").Camera,View=require("c2j/runtime/view").View,GLSLProgram=require("c2j/runtime/glsl-program").GLSLProgram,RuntimeTFLoader=require("c2j/runtime/runtime-tf-loader").RuntimeTFLoader,glMatrix=require("c2j/runtime/dependencies/gl-matrix").glMatrix;exports.Stage=Montage.create(Component,{_vehicle:{value:null},vehicle:{get:function(){return this._vehicle},set:function(e){if(e===this._vehicle)return;this._vehicle&&(this._vehicle.modelRepresentation=null),this._vehicle=e,this.templateObjects&&this._vehicle&&(this._vehicle.modelRepresentation=this.collada)}},collada:{get:function(){return this.templateObjects.collada}},templateDidLoad:{value:function(){this.vehicle&&(this.vehicle.modelRepresentation=this.collada),this.model&&this.run(this.model,this.baseURL)}},model:{value:null},model:{get:function(){return this._model},set:function(e){if(e===this._model)return;this._model=e,this._isComponentExpanded&&this.run(this.model,this.baseURL)}},location:{value:null},_fillViewport:{value:!0},fillViewport:{get:function(){return this._fillViewport},set:function(e){if(e===this._fillViewport)return;this._fillViewport=e,this._isComponentExpanded&&(this._fillViewport?window.addEventListener("resize",this,!0):window.removeEventListener("resize",this,!0))}},height:{value:null},width:{value:null},prepareForDraw:{value:function(){this.fillViewport&&window.addEventListener("resize",this,!0)}},captureResize:{value:function(e){this.needsDraw=!0}},willDraw:{value:function(){this.collada.width=this.width=window.innerWidth-270,this.collada.height=this.height=window.innerHeight}},run:{value:function(e,t){var n={};n.loadCompleted=function(e){this.collada.scene=e,this.collada.needsDraw=!0}.bind(this);var r=this,i=0,s={};s.willDraw=function(e){},s.didDraw=function(e){},this.collada.delegate=s;var o=Object.create(RuntimeTFLoader);o.initWithPath(e,require,t),o.delegate=n,o.load(null,null),this.collada.needsDraw=!0}}})