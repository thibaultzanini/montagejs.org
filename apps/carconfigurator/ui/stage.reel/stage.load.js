montageDefine("7d473e6","ui/stage.reel/stage",{dependencies:["montage","montage/ui/component","c2j/runtime/utilities","c2j/runtime/node","c2j/runtime/camera","c2j/runtime/view","c2j/runtime/glsl-program","c2j/runtime/runtime-tf-loader","c2j/runtime/dependencies/gl-matrix"],factory:function(e,t,n){var r=e("montage").Montage,i=e("montage/ui/component").Component,s=e("c2j/runtime/utilities").Utilities,o=e("c2j/runtime/node").Node,u=e("c2j/runtime/camera").Camera,a=e("c2j/runtime/view").View,f=e("c2j/runtime/glsl-program").GLSLProgram,l=e("c2j/runtime/runtime-tf-loader").RuntimeTFLoader,c=e("c2j/runtime/dependencies/gl-matrix").glMatrix;t.Stage=r.create(i,{_vehicle:{value:null},vehicle:{get:function(){return this._vehicle},set:function(e){if(e===this._vehicle)return;this._vehicle&&(this._vehicle.modelRepresentation=null),this._vehicle=e,this.templateObjects&&this._vehicle&&(this._vehicle.modelRepresentation=this.collada)}},collada:{get:function(){return this.templateObjects.collada}},templateDidLoad:{value:function(){this.vehicle&&(this.vehicle.modelRepresentation=this.collada),this.model&&this.run(this.model,this.baseURL)}},model:{value:null},model:{get:function(){return this._model},set:function(e){if(e===this._model)return;this._model=e,this._isComponentExpanded&&this.run(this.model,this.baseURL)}},location:{value:null},_fillViewport:{value:!0},fillViewport:{get:function(){return this._fillViewport},set:function(e){if(e===this._fillViewport)return;this._fillViewport=e,this._isComponentExpanded&&(this._fillViewport?window.addEventListener("resize",this,!0):window.removeEventListener("resize",this,!0))}},height:{value:null},width:{value:null},prepareForDraw:{value:function(){this.fillViewport&&window.addEventListener("resize",this,!0)}},captureResize:{value:function(e){this.needsDraw=!0}},willDraw:{value:function(){this.collada.width=this.width=window.innerWidth-270,this.collada.height=this.height=window.innerHeight}},run:{value:function(t,n){var r={};r.loadCompleted=function(e){this.collada.scene=e,this.collada.needsDraw=!0}.bind(this);var i=this,s=0,o={};o.willDraw=function(e){},o.didDraw=function(e){},this.collada.delegate=o;var u=Object.create(l);u.initWithPath(t,e,n),u.delegate=r,u.load(null,null),this.collada.needsDraw=!0}}})}})