montageDefine("8efb05e","m-car",{dependencies:["montage","vehicle-config/core/car-model","vehicle-config/core/color","vehicle-config/core/wheelset","vehicle-config/core/interior","vehicle-config/core/configuration-option","tridion-body-color-converter"],factory:function(e,t,n){var r=e("montage").Montage,i=e("vehicle-config/core/car-model").CarModel;Color=e("vehicle-config/core/color").Color,Wheelset=e("vehicle-config/core/wheelset").Wheelset,Interior=e("vehicle-config/core/interior").Interior,BooleanConfigurationOption=e("vehicle-config/core/configuration-option").BooleanConfigurationOption,TridionBodyColorConverter=e("tridion-body-color-converter").TridionBodyColorConverter;var s=t.MontageCar=r.create(i,{moduleName:{value:"m-car"},modelPath:{value:"m-car/model/mcar.json"},baseURL:{value:e.location},manufacturer:{value:"Montage"},model:{value:"Pint"},year:{value:"2012"},description:{value:"The pure coupe is everything you need and nothing you don’t – it’s mcar in its purest form. You get the best of both worlds: 5-speed smartshift® transmission with automatic mode (for ease) and manual mode (for fun), hill start assist, and it’s packed with lots of standard safety features such as 8 full-size airbags. It’s driving fun with the perfect canvas to personalize. And, if all that's not enough, mcar has the best MPG of any gas vehicle based on Consumer Reports* testing."},options:{distinct:!0,value:{bodyColor:[Color.create().initWithNameAndCostAndRGB("Deep Black",0,45,54,58),Color.create().initWithNameAndCostAndRGB("Crystal White",0,255,255,255),Color.create().initWithNameAndCostAndRGB("Rally Red",0,231,33,33),Color.create().initWithNameAndCostAndRGB("Gray Metallic",250,126,116,102),Color.create().initWithNameAndCostAndRGB("Light Blue Metallic",250,134,156,185)],tridionColor:[Color.create().initWithNameAndCostAndRGB("Silver",0,174,177,178),Color.create().initWithNameAndCostAndRGB("Black",0,0,0,0)],wheelset:[Wheelset.create().initWithNameAndCost("Silver"),Wheelset.create().initWithNameAndCost("Black")],interior:[Color.create().initWithNameAndCostAndRGB("Design Black",0,16,15,25),Color.create().initWithNameAndCostAndRGB("Design Red",0,124,30,5),Color.create().initWithNameAndCostAndRGB("Design Beige",0,174,161,124),Color.create().initWithNameAndCostAndRGB("Black Leather Seating",0,84,90,108),Color.create().initWithNameAndCostAndRGB("Crystal Grey Leather",1300,161,161,161)],interiorOptions:[BooleanConfigurationOption.create().initWithNameAndCost("Dashboard Gauges",120),BooleanConfigurationOption.create().initWithNameAndCost("Heated Seats",240),BooleanConfigurationOption.create().initWithNameAndCost("Luggage Compartment Cover",99),BooleanConfigurationOption.create().initWithNameAndCost("Ambient light for interior",190),BooleanConfigurationOption.create().initWithNameAndCost("Center console storage",30)]}},_bodyColor:{value:null},bodyColor:{get:function(){return this._bodyColor},set:function(e){if(e===this._bodyColor)return;this._bodyColor=e,this.performConfigurationChange("bodyColor")}},customBodyColor:{value:null},_tridionColor:{value:null},tridionColor:{get:function(){return this._tridionColor},set:function(e){if(e===this._tridionColor)return;this._tridionColor=e,this.performConfigurationChange("tridionColor")}},bodyColorTridionColor:{value:null},_wheelset:{value:null},wheelset:{get:function(){return this._wheelset},set:function(e){if(e===this._wheelset)return;this._wheelset=e,this.performConfigurationChange("wheelset")}},_interior:{value:null},interior:{get:function(){return this._interior},set:function(e){if(e===this._interior)return;this._interior=e,this.performConfigurationChange("interior")}},_licensePlateValue:{value:"fortwo"},licensePlateValue:{get:function(){return this._licensePlateValue},set:function(e){if(e===this._licensePlateValue)return;this._licensePlateValue=e,this.performConfigurationChange("licensePlateValue")}},interiorOptions:{dependencies:["options.interiorOptions.chosen"],get:function(){return this.options.interiorOptions.filter(function(e){return e.chosen})}},basePrice:{value:14890},didCreate:{value:function(){this.wheelset=this.options.wheelset[0],this.interior=this.options.interior[0],this.customBodyColor=Color.create().initWithNameAndCostAndRGB("Custom",1500,254,203,66),this.options.bodyColor.push(this.customBodyColor),this.bodyColor=this.customBodyColor,this.customBodyColor.addPropertyChangeListener("red",this),this.customBodyColor.addPropertyChangeListener("green",this),this.customBodyColor.addPropertyChangeListener("blue",this);var e=this.bodyColorTridionColor=Color.create().initWithNameAndCostAndRGB("Body Color",1500),t=TridionBodyColorConverter.create();Object.defineBinding(e,"red",{boundObject:this,boundObjectPropertyPath:"bodyColor.red",oneway:!0,converter:t}),Object.defineBinding(e,"green",{boundObject:this,boundObjectPropertyPath:"bodyColor.green",oneway:!0,converter:t}),Object.defineBinding(e,"blue",{boundObject:this,boundObjectPropertyPath:"bodyColor.blue",oneway:!0,converter:t}),this.options.tridionColor.push(e),this.tridionColor=e,e.addPropertyChangeListener("red",this),e.addPropertyChangeListener("green",this),e.addPropertyChangeListener("blue",this),this.addPropertyChangeListener("options.interiorOptions.chosen",this),this.fromHash(),i.didCreate.call(this)}},initializeModelRepresentation:{value:function(){this.configureModel("bodyColor"),this.configureModel("tridionColor"),this.configureModel("interior"),this.configureModel("wheelset"),this.configureModel("licensePlateValue");var e,t,n=["material_5","black"];for(var r=0;r<n.length;r++)e=n[r],t=this.modelRepresentation.materialForName(e),t&&(t.inputs.shininess=50);var i=["material_15","material_4"];for(var r=0;r<i.length;r++)e=i[r],t=this.modelRepresentation.materialForName(e),t&&(t.inputs.shininess=1e3)}},_highlightTimeouts:{distinct:!0,value:{}},highlightDuration:{value:400},highlightModel:{value:function(e,t){this.modelRepresentation.implicitAnimationsEnabled=!1,clearTimeout(this._highlightTimeouts[e]);var n=this.modelRepresentation.materialForName(t);n.inputs.diffuseColor=[.8,.8,.8],this.modelRepresentation.update();var r=this;this._highlightTimeouts=setTimeout(function(){r.unhighlightModel(e,t)},this.highlightDuration)}},unhighlightModel:{value:function(e,t){this.configureModel(e,!1)}},configureModel:{value:function(e,t){if(!this.modelRepresentation||!this.modelRepresentation.hasMaterials)return;clearTimeout(this._highlightTimeouts[e]),this.modelRepresentation.implicitAnimationsEnabled=t||typeof t=="undefined";var n,r,i;if("bodyColor"===e)return n=this.bodyColor,r="material_14",i=this.modelRepresentation.materialForName(r),i.inputs.diffuseColor=[n.red/255,n.green/255,n.blue/255],this.modelRepresentation.update(),!0;if("tridionColor"===e)return n=this.tridionColor,r="material_5",i=this.modelRepresentation.materialForName(r),i.inputs.diffuseColor=[n.red/255,n.green/255,n.blue/255],this.modelRepresentation.update(),!0;if("interior"===e)return n=this.interior,r="interior1",i=this.modelRepresentation.materialForName(r),i.inputs.diffuseColor=[n.red/255,n.green/255,n.blue/255],this.modelRepresentation.update(),!0;if("wheelset"===e)return!0;if("licensePlateValue"===e)return!0}},handleChange:{value:function(e){var t=e.currentPropertyPath;/tridionColor|bodyColor|red|green|blue/.test(t)?(this.configureModel("bodyColor"),this.configureModel("tridionColor")):/interiorOptions/.test(t)&&this.configureModel("interiorOptions")}},toHash:{value:function(){window.mcar=this;var e="#!bodyColor/"+this.options.bodyColor.indexOf(this.bodyColor);e+="/customBodyColor/"+this.customBodyColor.hex,e+="/tridionColor/"+this.options.tridionColor.indexOf(this.tridionColor),e+="/wheelset/"+this.options.wheelset.indexOf(this.wheelset),e+="/interior/"+this.options.interior.indexOf(this.interior),e+="/plate/"+this.licensePlateValue;var t=this.options.interiorOptions.map(function(e,t){return e.chosen?t:null}).filter(function(e){return null!=e});return e+="/interiorOptions/"+t.join(","),e}},fromHash:{value:function(){var e=window.location.hash,t;if(!/#!/.test(e))return;e=decodeURIComponent(e),e=e.replace(/#!/,""),t=e.match(/bodyColor\/(\d+)/),null!=t&&null!=t[1]&&(this.bodyColor=this.options.bodyColor[t[1]]),t=e.match(/customBodyColor\/(#[\w\d]{6})/),null!=t&&null!=t[1]&&(this.customBodyColor.hex=t[1]),t=e.match(/tridionColor\/(\d+)/),null!=t&&null!=t[1]&&(this.tridionColor=this.options.tridionColor[t[1]]),t=e.match(/wheelset\/(\d+)/),null!=t&&null!=t[1]&&(this.wheelset=this.options.wheelset[t[1]]),t=e.match(/interior\/(\d+)/),null!=t&&null!=t[1]&&(this.interior=this.options.interior[t[1]]),t=e.match(/plate\/([\w\s\d]+)/),null!=t&&null!=t[1]&&(this.licensePlateValue=t[1]),t=e.match(/interiorOptions\/((\d,?)*)/);if(null!=t&&null!=t[1]){var n=t[1].split(",").map(function(e){return parseInt(e,10)});this.options.interiorOptions.forEach(function(e,t){e.chosen=n.indexOf(t)>=0})}}}})}}),montageDefine("120b0c7","ui/composer/press-composer",{dependencies:["montage","ui/composer/composer","core/event/mutable-event"],factory:function(e,t,n){var r=e("montage").Montage,i=e("ui/composer/composer").Composer,s=e("core/event/mutable-event").MutableEvent,o=t.PressComposer=r.create(i,{load:{value:function(){window.Touch?this._element.addEventListener("touchstart",this,!0):this._element.addEventListener("mousedown",this,!0)}},unload:{value:function(){window.Touch?this._element.removeEventListener("touchstart",this):this._element.removeEventListener("mousedown",this)}},delegate:{value:null},cancelPress:{value:function(){return this._state===o.PRESSED?(this._dispatchPressCancel(),this._endInteraction(),!0):!1}},addEventListener:{value:function(e,t,n){i.addEventListener.call(this,e,t,n),e==="longPress"&&(this._shouldDispatchLongPress=!0)}},UNPRESSED:{value:0},PRESSED:{value:1},CANCELLED:{value:2},_state:{enumerable:!1,value:0},state:{get:function(){return this._state}},_shouldDispatchLongPress:{enumerable:!1,value:!1},_longPressThreshold:{enumerable:!1,value:1e3},longPressThreshold:{get:function(){return this._longPressThreshold},set:function(e){this._longPressThreshold!==e&&(this._longPressThreshold=e)}},_longPressTimeout:{enumberable:!1,value:null},_observedPointer:{enumerable:!1,value:null},_startInteraction:{enumerable:!1,value:function(e){if("disabled"in this.component&&this.component.disabled||this._observedPointer!==null)return!1;var t=0,n;if(e.type==="touchstart"){n=e.changedTouches.length;for(;t<n;t++)if(!this.component.eventManager.componentClaimingPointer(e.changedTouches[t].identifier)){this._observedPointer=e.changedTouches[t].identifier;break}if(this._observedPointer===null)return!1;document.addEventListener("touchend",this,!1),document.addEventListener("touchcancel",this,!1)}else e.type==="mousedown"&&(this._observedPointer="mouse",document.addEventListener("mouseup",this,!1),document.addEventListener("click",this,!1));this._element.addEventListener("dragstart",this,!1),this.component.eventManager.claimPointer(this._observedPointer,this),this._dispatchPressStart(e)}},_interpretInteraction:{value:function(e){var t,n,r;if(this._observedPointer===null){this._endInteraction(e);return}t=!this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this),n=e.target;while(n!==this._element&&n&&n.parentNode)n=n.parentNode;r=n===this._element;if(t&&e.type==="click"){e.preventDefault(),this._endInteraction(e);return}if(e.type==="mouseup"){if(!t&&r){this._dispatchPress(e),this._endInteraction(e);return}if(!t&&!r){this._dispatchPressCancel(e),this._endInteraction(e);return}t&&!r&&this._endInteraction(e)}}},_endInteraction:{value:function(e){if(!e||e.type==="touchend"||e.type==="touchcancel")document.removeEventListener("touchend",this),document.removeEventListener("touchcancel",this);else if(!e||e.type==="click"||e.type==="mouseup")document.removeEventListener("click",this),document.removeEventListener("mouseup",this);this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.component.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._state=o.UNPRESSED}},_changedTouchisObserved:{value:function(e){if(this._observedPointer===null)return!1;var t=0,n=event.changedTouches.length;for(;t<n;t++)if(event.changedTouches[t].identifier===this._observedPointer)return t;return!1}},surrenderPointer:{value:function(e,t){var n=this.callDelegateMethod("surrenderPointer",e,t);return typeof n!="undefined"&&n===!1?!1:(this._dispatchPressCancel(),!0)}},captureTouchstart:{value:function(e){this._startInteraction(e)}},handleTouchend:{value:function(e){if(this._observedPointer===null){this._endInteraction(e);return}this._changedTouchisObserved(e.changedTouches)!==!1&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?this._dispatchPress(e):e.preventDefault(),this._endInteraction(e))}},handleTouchcancel:{value:function(e){if(this._observedPointer===null||this._changedTouchisObserved(e.changedTouches)!==!1)this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this._dispatchPressCancel(e),this._endInteraction(e)}},captureMousedown:{value:function(e){this._startInteraction(e)}},handleClick:{value:function(e){this._interpretInteraction(e)}},handleMouseup:{value:function(e){this._interpretInteraction(e)}},handleDragstart:{value:function(e){this._dispatchPressCancel(e),this._endInteraction()}},_createPressEvent:{enumerable:!1,value:function(e,t){var n,r,i;return t||(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!0,null)),n=u.create(),n.event=t,n.type=e,n.pointer=this._observedPointer,t.changedTouches&&(i=this._changedTouchisObserved(t.changedTouches))!==!1&&(n.touch=t.changedTouches[i]),n}},_dispatchPressStart:{enumerable:!1,value:function(e){this._state=o.PRESSED,this.dispatchEvent(this._createPressEvent("pressStart",e));if(this._shouldDispatchLongPress){var t=this;this._longPressTimeout=setTimeout(function(){t._dispatchLongPress()},this._longPressThreshold)}}},_dispatchPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this.dispatchEvent(this._createPressEvent("press",e)),this._state=o.UNPRESSED}},_dispatchLongPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(this.dispatchEvent(this._createPressEvent("longPress",e)),this._longPressTimeout=null)}},_dispatchPressCancel:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._state=o.CANCELLED,this.dispatchEvent(this._createPressEvent("pressCancel",e))}}}),u=function(){var e,t,n,i,s,o;e=r.create(r,{type:{value:"press"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(e){this._event=e}},_touch:{enumerable:!1,value:null},touch:{get:function(){return this._touch},set:function(e){this._touch=e}}}),t=["altKey","ctrlKey","metaKey","shiftKey","cancelBubble","currentTarget","defaultPrevented","eventPhase","timeStamp","preventDefault","stopImmediatePropagation","stopPropagation"],n=["clientX","clientY","pageX","pageY","screenX","screenY","target"],i=function(e){return{get:function(){return this._event[e]}}},s=function(e){return{get:function(){return this._touch?this._touch[e]:this._event[e]}}};for(o=t.length-1;o>=0;o--)r.defineProperty(e,t[o],i(t[o]));for(o=n.length-1;o>=0;o--)r.defineProperty(e,n[o],s(n[o]));return e}()}}),montageDefine("120b0c7","ui/native/button.reel/button",{dependencies:["montage","ui/component","ui/native-control","ui/composer/press-composer"],factory:function(e,t,n){var r=e("montage").Montage,i=e("ui/component").Component,s=e("ui/native-control").NativeControl,o=e("ui/composer/press-composer").PressComposer,u=t.Button=r.create(s,{_preventFocus:{enumerable:!1,value:!1},preventFocus:{get:function(){return this._preventFocus},set:function(e){e===!0?this._preventFocus=!0:this._preventFocus=!1}},enabled:{dependencies:["disabled"],get:function(){return!this._disabled},set:function(e){this.disabled=!e}},converter:{value:null},_labelNode:{value:undefined,enumerable:!1},_label:{value:undefined,enumerable:!1},label:{get:function(){return this._label},set:function(e){if(e&&e.length>0&&this.converter)try{e=this.converter.convert(e),this.error&&(this.error=null)}catch(t){this.error=t}this._label=e,this._isInputElement&&(this._value=e),this.needsDraw=!0}},setLabelInitialValue:{value:function(e){this._label===undefined&&(this._label=e)}},holdThreshold:{get:function(){return this._pressComposer.longPressThreshold},set:function(e){this._pressComposer.longPressThreshold=e}},_pressComposer:{enumberable:!1,value:null},_active:{enumerable:!1,value:!1},active:{get:function(){return this._active},set:function(e){this._active=e,this.needsDraw=!0}},blur:{value:function(){this._element.blur()}},focus:{value:function(){this._element.focus()}},didCreate:{value:function(){this._pressComposer=o.create(),this.addComposer(this._pressComposer)}},prepareForActivationEvents:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1),this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1)}},addEventListener:{value:function(e,t,n){s.addEventListener.call(this,e,t,n),e==="hold"&&this._pressComposer.addEventListener("longPress",this,!1)}},handlePressStart:{value:function(e){this.active=!0,e.touch&&document.addEventListener("touchmove",this,!1),this._preventFocus||this._element.focus()}},handlePress:{value:function(e){this.active=!1,this._dispatchActionEvent(),document.removeEventListener("touchmove",this,!1)}},handleKeyup:{value:function(e){e.keyCode===32&&(this.active=!1,this._dispatchActionEvent())}},handleLongPress:{value:function(e){this._pressComposer.cancelPress();var t=document.createEvent("CustomEvent");t.initCustomEvent("hold",!0,!0,null),this.dispatchEvent(t)}},handlePressCancel:{value:function(e){this.active=!1,document.removeEventListener("touchmove",this,!1)}},handleTouchmove:{value:function(e){e.preventDefault()}},_isInputElement:{value:!1,enumerable:!1},willPrepareForDraw:{value:function(){s.willPrepareForDraw.call(this),this._element.setAttribute("role","button"),this._isInputElement=this._element.tagName==="INPUT",this._isInputElement?(Object.defineProperty(this,"value",{get:function(){return this._label},set:function(e){this.label=e}}),this._label===undefined&&(this._label=this._element.value)):(this._element.firstChild||this._element.appendChild(document.createTextNode("")),this._labelNode=this._element.firstChild,this.setLabelInitialValue(this._labelNode.data),this._label===undefined&&(this._label=this._labelNode.data)),this.needsDraw=!0}},prepareForDraw:{value:function(){this._element.addEventListener("keyup",this,!1)}},_drawLabel:{enumerable:!1,value:function(e){this._isInputElement?this._element.setAttribute("value",e):this._labelNode.data=e}},draw:{value:function(){Object.getPrototypeOf(u).draw.call(this),this._disabled?this._element.classList.add("disabled"):this._element.classList.remove("disabled"),this._active?this._element.classList.add("active"):this._element.classList.remove("active"),this._drawLabel(this.label)}},_detail:{value:null},detail:{get:function(){return this._detail===null&&(this._detail=a.create()),this._detail}},createActionEvent:{value:function(){var e=document.createEvent("CustomEvent"),t,n;if(t=this._detail)n=t._data;return e.initCustomEvent("action",!0,!0,n),e}}});u.addAttributes({autofocus:{value:!1,dataType:"boolean"},disabled:{value:!1,dataType:"boolean"},form:null,formaction:null,formenctype:null,formmethod:null,formnovalidate:{dataType:"boolean"},formtarget:null,type:{value:"button"},name:null,value:null});var a=r.create(r,{didCreate:{value:function(){this._data=Object.create(null)}},initWithReservedAndOptions:{value:function(e,t){Map.call(this,e,t)}},get:{value:function(e){return this.undefinedGet(e)}},set:{value:function(e,t){this.undefinedSet(e,t)}},_data:{value:null},_defineProperty:{value:function(e,t){t=typeof t!="undefined"?t:null,r.defineProperty(this,e,{get:function(){return this._data[e]},set:function(t){this._data[e]=t}}),this._data[e]=t}},undefinedGet:{value:function(e){return typeof this._data[e]=="undefined"&&this._defineProperty(e),this._data[e]}},undefinedSet:{value:function(e,t){typeof this._data[e]=="undefined"?this._defineProperty(e,t):this._data[e]=t}}})}}),montageDefine("7d473e6","ui/stage.reel/stage",{dependencies:["montage","montage/ui/component","c2j/runtime/utilities","c2j/runtime/node","c2j/runtime/camera","c2j/runtime/view","c2j/runtime/glsl-program","c2j/runtime/runtime-tf-loader","c2j/runtime/dependencies/gl-matrix"],factory:function(e,t,n){var r=e("montage").Montage,i=e("montage/ui/component").Component,s=e("c2j/runtime/utilities").Utilities,o=e("c2j/runtime/node").Node,u=e("c2j/runtime/camera").Camera,a=e("c2j/runtime/view").View,f=e("c2j/runtime/glsl-program").GLSLProgram,l=e("c2j/runtime/runtime-tf-loader").RuntimeTFLoader,c=e("c2j/runtime/dependencies/gl-matrix").glMatrix;t.Stage=r.create(i,{_vehicle:{value:null},vehicle:{get:function(){return this._vehicle},set:function(e){if(e===this._vehicle)return;this._vehicle&&(this._vehicle.modelRepresentation=null),this._vehicle=e,this.templateObjects&&this._vehicle&&(this._vehicle.modelRepresentation=this.collada)}},collada:{get:function(){return this.templateObjects.collada}},templateDidLoad:{value:function(){this.vehicle&&(this.vehicle.modelRepresentation=this.collada),this.model&&this.run(this.model,this.baseURL)}},model:{value:null},model:{get:function(){return this._model},set:function(e){if(e===this._model)return;this._model=e,this._isComponentExpanded&&this.run(this.model,this.baseURL)}},location:{value:null},_fillViewport:{value:!0},fillViewport:{get:function(){return this._fillViewport},set:function(e){if(e===this._fillViewport)return;this._fillViewport=e,this._isComponentExpanded&&(this._fillViewport?window.addEventListener("resize",this,!0):window.removeEventListener("resize",this,!0))}},height:{value:null},width:{value:null},prepareForDraw:{value:function(){this.fillViewport&&window.addEventListener("resize",this,!0)}},captureResize:{value:function(e){this.needsDraw=!0}},willDraw:{value:function(){this.collada.width=this.width=window.innerWidth-270,this.collada.height=this.height=window.innerHeight}},run:{value:function(t,n){var r={};r.loadCompleted=function(e){this.collada.scene=e,this.collada.needsDraw=!0}.bind(this);var i=this,s=0,o={};o.willDraw=function(e){},o.didDraw=function(e){},this.collada.delegate=o;var u=Object.create(l);u.initWithPath(t,e,n),u.delegate=r,u.load(null,null),this.collada.needsDraw=!0}}})}}),montageDefine("1f60130","core/car-model",{dependencies:["montage"],factory:function(e,t,n){var r=e("montage").Montage;t.CarModel=r.create(r,{moduleName:{value:null},manufacturer:{value:null},model:{value:null},year:{value:null},name:{dependencies:["year","model"],get:function(){return this.year+" "+this.model}},description:{value:null},options:{value:null},licensePlateValue:{value:null},basePrice:{value:0},configuredPrice:{dependencies:["basePrice"],get:function(){var e=Object.keys(this.options),t=this;return e.reduce(function(e,n){var r=t[n];return r?Array.isArray(r)?e+r.reduce(function(e,t){return t.chosen?e+t.cost:e},0):e+r.cost:e},this.basePrice)}},didCreate:{value:function(){var e=Object.keys(this.options),t=e.length;while(t)t--,r.addDependencyToProperty(this,e[t]+".cost","configuredPrice"),console.log(e[t]+".cost")}},performConfigurationChange:{value:function(e){var t=this.configureModel(e),n;t&&(this.toHash(),n=document.createEvent("CustomEvent"),n.initCustomEvent("configuration",!0,!0,{configurationProperty:e}),this.dispatchEvent(n,!0,!0))}},_modelRepresentation:{value:null},modelRepresentation:{get:function(){return this._modelRepresentation},set:function(e){if(e===this._modelRepresentation)return;this._modelRepresentation&&this._modelRepresentation.removeEventListener("materialReady",this,!1),this._modelRepresentation=e,this._modelRepresentation&&(this._modelRepresentation.hasMaterials?this.initializeModelRepresentation():this._modelRepresentation.addEventListener("materialReady",this,!1))}},handleMaterialReady:{value:function(){this.initializeModelRepresentation()}},initializeModelRepresentation:{value:function(){}},configureModel:{value:function(e){}},toHash:{value:function(){}},fromHash:{value:function(e){}}})}}),montageDefine("7d473e6","ui/main.reel/main.html",{text:'<!doctype html>\n\n<html>\n<head>\n    <meta http-equiv=Content-Type content="text/html; charset=utf-8">\n    <title>Main</title>\n\n    <link rel=stylesheet type="text/css" href=main.css>\n\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"main"}}},"manufacturerName":{"prototype":"montage/ui/dynamic-text.reel","properties":{"element":{"#":"manufacturerName"}},"bindings":{"value":{"<-":"@owner.vehicle.manufacturer"}}},"modelName":{"prototype":"montage/ui/dynamic-text.reel","properties":{"element":{"#":"modelName"}},"bindings":{"value":{"<-":"@owner.vehicle.name"}}},"showroom":{"prototype":"ui/showroom.reel","properties":{"element":{"#":"showroom"}},"bindings":{"vehicle":{"<-":"@owner.vehicle"}}},"shareButton":{"prototype":"montage/ui/button.reel","properties":{"element":{"#":"shareButton"}},"listeners":[{"type":"action","listener":{"@":"owner"},"capture":false}]}}</script>\n</head>\n<body>\n    <div data-montage-id=main class=main>\n        <header class=title>\n            <h1><span data-montage-id=manufacturerName class=manufacturerName></span> <span data-montage-id=modelName class=modelName></span></h1>\n            <button data-montage-id=shareButton class=shareButton>Share</button>\n        </header>\n        <div data-montage-id=showroom></div>\n    </div>\n</body>\n</html>'}),montageDefine("7d473e6","ui/main.reel/main",{dependencies:["montage","montage/ui/component","m-car/m-car"],factory:function(e,t,n){var r=e("montage").Montage,i=e("montage/ui/component").Component,s=e("m-car/m-car").MontageCar;t.Main=r.create(i,{didCreate:{value:function(){this.vehicle=s.create()}},vehicle:{value:null},vehicle:{get:function(){return this._vehicle},set:function(e){if(e===this._vehicle)return;this._vehicle=e,this.needsDraw=!0}},_currentManufacturer:{value:null},prepareForDraw:{value:function(){window.addEventListener("beforeunload",this,!0)}},draw:{value:function(){this._currentManufacturer&&this.element.classList.remove(this._currentManufacturer);var e=this.getProperty("vehicle.manufacturer");e&&this.element.classList.add(e),this._currentManufacturer=e}},captureBeforeunload:{value:function(){this.reflectState()}},handleShareButtonAction:{value:function(){this.reflectState()}},reflectState:{value:function(){if(!this.vehicle)return;var e=encodeURIComponent(this.vehicle.toHash());window.location.hash="#!"+e;var t="http://"+window.location.host.replace(/:\d+/,"")+":1337/save?hash="+e;console.log("share",e);var n=new XMLHttpRequest;n.open("POST",t),n.send()}}})}}),montageDefine("120b0c7","ui/slot.reel/slot",{dependencies:["montage","ui/component"],factory:function(e,t,n){var r=e("montage").Montage,i=e("ui/component").Component;t.Slot=r.create(i,{hasTemplate:{enumerable:!1,value:!1},didCreate:{value:function(){this.content=null}},delegate:{value:null},_content:{value:null},prepareForDraw:{value:function(){this.element.classList.add("montage-Slot")}},content:{get:function(){return this._content},set:function(e){var t;e&&typeof e.needsDraw!="undefined"?(e.element?t=e.element:(t=document.createElement("div"),t.id="appendDiv",this.delegate&&typeof this.delegate.slotElementForComponent=="function"&&(t=this.delegate.slotElementForComponent(this,e,t))),Object.getPropertyDescriptor(i,"domContent").set.call(this,t),e.setElementWithParentComponent(t,this),e.needsDraw=!0):Object.getPropertyDescriptor(i,"domContent").set.call(this,e),this._content=e,this.needsDraw=!0}},contentDidChange:{value:function(e,t){this.delegate&&typeof this.delegate.slotDidSwitchContent=="function"&&this.delegate.slotDidSwitchContent(this,e,e?e.controller:null,t,t?t.controller:null)}}})}}),montageDefine("7d473e6","ui/showroom.reel/showroom.html",{text:'<!doctype html>\n\n<html>\n<head>\n    <meta http-equiv=Content-Type content="text/html; charset=utf-8">\n    <title>Showroom</title>\n\n    <link rel=stylesheet type="text/css" href=showroom.css>\n\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"showroom"},"configuratorSubstitution":{"@":"configuratorSubstitution"}}},"configuratorSubstitution":{"prototype":"montage/ui/substitution.reel","properties":{"element":{"#":"configuratorSubstitution"},"delegate":{"@":"owner"}}},"stage":{"prototype":"ui/stage.reel","properties":{"element":{"#":"stage"},"location":"assets/location/parkinglot.jpg"},"bindings":{"model":{"<-":"@owner.vehicle.modelPath"},"baseURL":{"<-":"@owner.vehicle.baseURL"},"vehicle":{"<-":"@owner.vehicle"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=showroom class=Showroom>\n        <div data-montage-id=stage class=stage></div>\n        <div data-montage-id=configuratorSubstitution class=configuratorSubstitution></div>\n    </div>\n</body>\n</html>'}),montageDefine("7d473e6","ui/showroom.reel/showroom",{dependencies:["montage","montage/ui/component"],factory:function(e,t,n){var r=e("montage").Montage,i=e("montage/ui/component").Component;t.Showroom=r.create(i,{configuratorSubstitution:{value:null},_vehicle:{value:null},vehicle:{get:function(){return this._vehicle},set:function(e){if(e===this._vehicle)return;this._vehicle=e,this._isComponentExpanded&&this._loadVehicleViews(),this.needsDraw=!0}},_loadVehicleViews:{value:function(){var t=this;e.async(this.vehicle.moduleName+"/configurator.reel").then(function(e){var n=e.Configurator.create();n.vehicle=t._vehicle,t.configuratorSubstitution.switchComponents[t.vehicle.name]=n,t.configuratorSubstitution.switchValue=t.vehicle.name}).done()}},templateDidLoad:{value:function(){this._vehicle&&this._loadVehicleViews()}},prepareForDraw:{value:function(){this.addEventListener("pick",this,!1)}},handlePick:{value:function(e){var t=this.configuratorSubstitution.content;t&&typeof t.pickFromModel=="function"&&t.pickFromModel(e.detail)}}})}}),montageDefine("120b0c7","ui/composer/composer",{dependencies:["montage"],factory:function(e,t,n){var r=e("montage").Montage;t.Composer=r.create(r,{_component:{value:null},component:{get:function(){return this._component},set:function(e){this._component=e}},_element:{value:null},element:{get:function(){return this._element},set:function(e){this._element=e}},lazyLoad:{value:!1},_needsFrame:{value:!1},needsFrame:{set:function(e){this._needsFrame!==e&&(this._needsFrame=e,this._component&&e&&this._component.scheduleComposer(this))},get:function(){return this._needsFrame}},frame:{value:function(e){}},_resolveDefaults:{value:function(){this.element==null&&this.component!=null&&(this.element=this.component.element)}},_load:{value:function(){this.element||this._resolveDefaults(),this.load()}},load:{value:function(){}},unload:{value:function(){}},deserializedFromTemplate:{value:function(){this.component&&this.component.addComposer(this)}}})}}),montageDefine("120b0c7","ui/dynamic-text.reel/dynamic-text",{dependencies:["montage","ui/component"],factory:function(e,t,n){var r=e("montage").Montage,i=e("ui/component").Component;t.DynamicText=r.create(i,{hasTemplate:{value:!1},_value:{value:null},value:{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.needsDraw=!0)}},converter:{value:null},defaultValue:{value:""},_valueNode:{value:null},_RANGE:{value:document.createRange()},prepareForDraw:{value:function(){var e=this._RANGE;e.selectNodeContents(this.element),e.deleteContents(),this._valueNode=document.createTextNode(""),e.insertNode(this._valueNode)}},draw:{value:function(){var e=this._value,t=e||0===e?e:this.defaultValue;this.converter&&(t=this.converter.convert(t)),this._valueNode.data=t}}})}}),montageDefine("1f60130","core/color",{dependencies:["montage","core/configuration-option"],factory:function(e,t,n){var r=e("montage").Montage,i=e("core/configuration-option").ConfigurationOption;t.Color=r.create(i,{initWithNameAndCostAndRGB:{value:function(e,t,n,r,i){return this.name=e,this.red=n,this.green=r,this.blue=i,this.cost=t||0,this}},red:{value:null},green:{value:null},blue:{value:null},hex:{get:function(){return"#"+this.toHex(this.red)+this.toHex(this.green)+this.toHex(this.blue)},set:function(e){e=e.replace("#",""),this.red=parseInt(e.substring(0,2),16),this.green=parseInt(e.substring(2,4),16),this.blue=parseInt(e.substring(4,6),16)}},toHex:{value:function(e){return e=e>255?255:e,e=e<0?0:e,"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16)}}})}}),montageDefine("120b0c7","ui/substitution.reel/substitution",{dependencies:["montage","ui/component","ui/slot.reel","core/logger"],factory:function(e,t,n){var r=e("montage").Montage,i=e("ui/component").Component,s=e("ui/slot.reel").Slot,o=e("core/logger").logger("substitution");t.Substitution=r.create(s,{hasTemplate:{enumerable:!1,value:!1},switchComponents:{distinct:!0,value:{}},_switchValue:{value:null},switchValue:{get:function(){return this._switchValue},set:function(e){if(this._switchValue===e||this._isSwitchingContent)return;this._switchValue=e,this.switchComponents&&(this.content=this.switchComponents[this.switchValue])}},transition:{value:null}})}}),montageDefine("7d473e6","ui/stage.reel/stage.html",{text:'<!DOCTYPE html>\n\n<html>\n<head>\n    <title></title>\n    <link rel=stylesheet type="text/css" href=stage.css>\n    <script type="text/montage-serialization">{"owner":{"prototype":"ui/stage.reel","properties":{"element":{"#":"component"}}},"collada":{"prototype":"c2j/ui/collada.reel","properties":{"element":{"#":"collada"}},"bindings":{"modelController":{"<-":"@owner.vehicle"}}}}</script>\n\n</head>\n<body>\n<div data-montage-id=component>\n    <div data-montage-id=collada></div>\n</div>\n</body>\n</html>'}),montageDefine("120b0c7","core/converter/converter",{dependencies:["montage"],factory:function(e,t,n){var r=e("montage").Montage,i="[object Function]",s="[object Boolean]",o="[object Number]",u="[object String]",a="[object Array]",f="[object Date]",l=Object.prototype.toString,c=function(e){return l.call(e)===o};t.isNumber=c;var h=function(e){return e&&typeof e!="undefined"};t.isDef=h;var p=t.Validator=r.create(r,{validate:{value:null}}),d=t.Converter=r.create(r,{allowPartialConversion:{value:!0},convert:{enumerable:!1,value:null},revert:{enumerable:!1,value:null}})}}),montageDefine("120b0c7","ui/native-control",{dependencies:["montage","ui/component"],factory:function(e,t,n){var r=e("montage").Montage,i=e("ui/component").Component,s=t.NativeControl=r.create(i,{hasTemplate:{value:!1},willPrepareForDraw:{value:function(){}}});s.addAttributes({accesskey:null,contenteditable:null,contextmenu:null,dir:null,draggable:null,dropzone:null,hidden:{dataType:"boolean"},lang:null,spellcheck:null,style:null,tabindex:null,title:null})}}),montageDefine("8efb05e","tridion-body-color-converter",{dependencies:["montage","montage/core/converter/converter"],factory:function(e,t,n){var r=e("montage").Montage,i=e("montage/core/converter/converter").Converter;t.TridionBodyColorConverter=r.create(i,{delta:{value:80},convert:{enumerable:!1,value:function(e){return e-this.delta}},revert:{enumerable:!1,value:function(e){return e+this.delta}}})}}),montageDefine("120b0c7","ui/button.reel/button",{dependencies:["montage","ui/component","ui/native/button.reel"],factory:function(e,t,n){var r=e("montage").Montage,i=e("ui/component").Component,s=e("ui/native/button.reel").Button;t.Button=r.create(s,{hasTemplate:{value:!0},willPrepareForDraw:{value:function(){s.willPrepareForDraw.call(this),this.element.classList.add("montage-Button")}}})}}),montageDefine("1f60130","core/configuration-option",{dependencies:["montage"],factory:function(e,t,n){var r=e("montage").Montage,i=t.ConfigurationOption=r.create(r,{initWithNameAndCost:{value:function(e,t){return this.name=e,this.cost=t||0,this}},name:{value:null},cost:{value:0}});t.BooleanConfigurationOption=r.create(i,{chosen:{value:!1}})}}),montageDefine("8efb05e","package.json",{exports:{name:"m-car",version:"0.0.0",hash:"8efb05e",directories:{lib:"./"},mappings:{montage:{name:"montage",hash:"120b0c7",location:"../montage@120b0c7/"},"vehicle-config":{name:"vehicle-config",hash:"1f60130",location:"../vehicle-config@1f60130/"}},production:!0,useScriptInjection:!0}}),montageDefine("1f60130","package.json",{exports:{name:"vehicle-config",version:"0.0.0",hash:"1f60130",directories:{lib:"./"},mappings:{montage:{name:"montage",hash:"120b0c7",location:"../montage@120b0c7/"}},production:!0,useScriptInjection:!0}}),montageDefine("1245296","package.json",{exports:{name:"c2j",version:"0.0.0",hash:"1245296",directories:{lib:"."},mappings:{montage:{name:"montage",hash:"120b0c7",location:"../montage@120b0c7/"}},production:!0,useScriptInjection:!0}}),montageDefine("1f60130","core/wheelset",{dependencies:["montage","core/configuration-option"],factory:function(e,t,n){var r=e("montage").Montage,i=e("core/configuration-option").ConfigurationOption;t.Wheelset=r.create(i,{})}}),montageDefine("1f60130","core/interior",{dependencies:["montage","core/configuration-option"],factory:function(e,t,n){var r=e("montage").Montage,i=e("core/configuration-option").ConfigurationOption;t.Interior=r.create(i,{})}}),montageDefine("120b0c7","ui/button.reel/button.html",{text:"<!DOCTYPE html>\n\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=button.css>\n</head>\n<body>\n</body>\n</html>"})
bundleLoaded(undefined)