var Montage=require("montage").Montage,Component=require("montage/ui/component").Component,Remotemediator=require("model/remotemediator").Remotemediator,AppData=require("model/appdata").AppData;exports.Main=Montage.create(Component,{appData:{value:AppData.create()},remoteMediator:{value:Remotemediator.create()},categoryId:{value:null},_categoryButtonGroup:{value:null},didCreate:{value:function(){this.application.addEventListener("remoteDataReceived",this,!1),this.application.addEventListener("openTrailer",this,!1),this.canDrawGate.setField("latestBoxofficeMovies",!1),this.remoteMediator.load()}},templateDidLoad:{value:function(){var e=this.templateObjects;this._categoryButtonGroup=[e.latest,e.theaters,e.dvd,e.upcoming]}},handleRemoteDataReceived:{value:function(e){var t=e.detail.data,n=e.detail.type;this.appData[n]=t,n==="latestBoxofficeMovies"&&(this.canDrawGate.setField("latestBoxofficeMovies",!0),this.dispatchEventNamed("dataReceived",!0),this.changeCategory(n))}},handleOpenTrailer:{value:function(e){var t=e.detail,n=this.templateObjects.popup;this.remoteMediator.searchYoutubeTrailer(t,function(e){n.openTrailer(e)})}},handleCategoryButtonAction:{value:function(e){this.changeCategory(e.target.category)}},changeCategory:{value:function(e){var t=this._categoryButtonGroup;this.categoryId=e;for(var n=0;n<t.length;n++)t[n].pressed=t[n].category===e}}})