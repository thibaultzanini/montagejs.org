(function(e){if("undefined"!=typeof bootstrap)"undefined"!=typeof window?bootstrap("require",function(t,n){var r=t("promise"),i=t("mini-url");e(n,r,i),t("require/browser")}):bootstrap("require",function(t,n){var r=t("promise").Promise,i=t("mini-url");e(n,r,i)});else{if("undefined"==typeof process)throw Error("Can't support require on this platform");var t=require("q"),n=require("url");e(exports,t,n),require("./node")}})(function(e,t,n){function r(t,r){if(r=r||{},"string"==typeof t&&(t={location:t}),t.main&&(t.location=r.mainPackageLocation),t.name&&r.registry&&r.registry[t.name]&&(t.location=r.registry[t.name]),!t.location&&r.packagesDirectory&&t.name&&(t.location=n.resolve(r.packagesDirectory,t.name+"/")),!t.location)return t;if(/\/$/.test(t.location)||(t.location+="/"),!e.isAbsolute(t.location)){if(!r.location)throw Error("Dependency locations must be fully qualified: "+JSON.stringify(t));t.location=n.resolve(r.location,t.location)}return t.name&&(r.registry[t.name]=t.location),t}function i(t,i,a){/\/$/.test(t)||(t+="/");var o=Object.create(a);o.name=i.name,o.location=t||e.getLocation(),o.packageDescription=i,o.useScriptInjection=i.useScriptInjection,void 0!==i.production&&(o.production=i.production);var l=o.modules=o.modules||{},u=o.registry;void 0===o.name||u[o.name]||(u[o.name]=o.location);var c=i.overlay||{};(o.overlays||e.overlays).forEach(function(e){if(c[e]){var t=c[e];for(var n in t)i[n]=t[n]}}),delete i.overlay,i.directories=i.directories||{},i.directories.lib=void 0===i.directories.lib?"./":i.directories.lib;var h=i.directories.lib;o.lib=n.resolve(t,"./"+h);var d=i.directories.packages||"node_modules";d=n.resolve(t,d+"/"),o.packagesDirectory=d,void 0!==i.main&&(l[""]={id:"",redirect:s(i.main),location:o.location},i.name!==l[""].redirect&&(l[i.name]={id:i.name,redirect:"",location:n.resolve(t,i.name)}));var p=i.redirects;void 0!==p&&Object.keys(p).forEach(function(e){l[e]={id:e,redirect:p[e],location:n.resolve(t,e)}});var f=i.mappings||{};return[i.dependencies,o.production?null:i.devDependencies].forEach(function(e){e&&Object.keys(e).forEach(function(t){f[t]||(f[t]={name:t,version:e[t]})})}),Object.keys(f).forEach(function(e){f[e]=r(f[e],o,e)}),o.mappings=f,o}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e,t){e+="";var n=e.split("/"),r=[];if(n.length&&"."===n[0]||".."===n[0]){var i=t.split("/");i.pop(),n.unshift.apply(n,i)}for(var a=0,o=n.length;o>a;a++){var s=n[a];""===s||"."===s||(".."===s?r.length&&r.pop():r.push(s))}return r.join("/")}if(!this)throw Error("Require does not work in strict mode.");e.makeRequire=function(i){function u(e){var t=e.toLowerCase();return a(v,t)||(v[t]={id:e,display:(i.name||i.location)+"#"+e,require:m}),v[t]}function c(e,t){var r=u(e);r.exports=t,r.location=n.resolve(i.location,e),r.directory=n.resolve(r.location,"./"),r.injected=!0,delete r.redirect,delete r.mappingRedirect}function h(e,n,r){var i=u(e);return r=r||{},a(r,e)?void 0:(r[e]=!0,g(e,n).then(function(){return t.all(i.dependencies.map(function(t){t=o(t,e);var n=u(t),i=n.dependees=n.dependees||{};return i[e]=!0,h(t,e,r)}))},function(e){i.error=e}))}function d(e,t){var r=u(e);if(r.id!==e)throw Error("Can't require module "+JSON.stringify(r.id)+" by alternate spelling "+JSON.stringify(e));if(r.error){var i=Error("Can't require module "+JSON.stringify(r.id)+" via "+JSON.stringify(t)+" because "+r.error.message);throw i.cause=r.error,i}if(void 0!==r.redirect)return d(r.redirect,t);if(void 0!==r.mappingRedirect)return r.mappingRequire(r.mappingRedirect,t);if(void 0!==r.exports)return r.exports;if(void 0===r.factory)throw Error("Can't require module "+JSON.stringify(e)+" via "+JSON.stringify(t));r.directory=n.resolve(r.location,"./"),r.exports={};var a=r.factory.call(void 0,f(e),r.exports,r);return void 0!==a&&(r.exports=a),r.exports}function p(e,t,n){var r=i.location;if(t.location===r)return e;var o=!!n;if(n=n||{},a(n,r))return null;n[r]=!0;for(var s in i.mappings){var l=i.mappings[s];if(r=l.location,i.hasPackage(r)){var u=i.getPackage(r),c=u.identify(e,t,n);if(null!==c)return""===c?s:s+"/"+c}}if(o)return null;throw Error("Can't identify "+e+" from "+t.location)}function f(t){var n=function(e){var n=o(e,t);return d(n,t)};return n.async=function(e){var r=o(e,t);return u(e),h(r,t).then(function(){return n(r)})},n.resolve=function(e){return s(o(e,t))},n.getModule=u,n.getModuleDescriptor=u,n.load=g,n.deepLoad=h,n.loadPackage=function(t,n){return n?e.loadPackage(t,n):i.loadPackage(t,i)},n.hasPackage=function(e){return i.hasPackage(e)},n.getPackage=function(e){return i.getPackage(e)},n.isMainPackage=function(){return n.location===i.mainPackageLocation},n.injectPackageDescription=function(t,n){e.injectPackageDescription(t,n,i)},n.injectPackageDescriptionLocation=function(t,n){e.injectPackageDescriptionLocation(t,n,i)},n.injectMapping=function(e,t){e=r(e,i,t),t=t||e.name,i.mappings[t]=e},n.injectDependency=function(e){n.injectMapping({name:e},e)},n.identify=p,n.inject=c,i.exposedConfigs.forEach(function(e){n[e]=i[e]}),n.config=i,n.read=i.read,n}var m;i=i||{},i.location=n.resolve(i.location||e.getLocation(),"./"),i.lib=n.resolve(i.location,i.lib||"./"),i.paths=i.paths||[i.lib],i.mappings=i.mappings||{},i.exposedConfigs=i.exposedConfigs||e.exposedConfigs,i.makeLoader=i.makeLoader||e.makeLoader,i.load=i.load||i.makeLoader(i),i.makeCompiler=i.makeCompiler||e.makeCompiler,i.compile=i.compile||i.makeCompiler(i),i.parseDependencies=i.parseDependencies||e.parseDependencies,i.read=i.read||e.read;var v=i.modules=i.modules||{},g=l(function(e){var n=u(e);return t.fcall(function(){return void 0===n.factory&&void 0===n.exports&&void 0===n.redirect?t.fcall(i.load,e,n):void 0}).then(function(){i.compile(n);var e=n.dependencies=n.dependencies||[];void 0!==n.redirect&&e.push(n.redirect),void 0!==n.extraDependencies&&Array.prototype.push.apply(n.dependencies,n.extraDependencies)})});return m=f("")},e.injectPackageDescription=function(e,n,r){var i=r.descriptions=r.descriptions||{};i[e]=t.resolve(n)},e.injectPackageDescriptionLocation=function(e,t,n){var r=n.descriptionLocations=n.descriptionLocations||{};r[e]=t},e.loadPackageDescription=function(t,r){var i=t.location,a=r.descriptions=r.descriptions||{};if(void 0===a[i]){var o,s=r.descriptionLocations=r.descriptionLocations||{};o=s[i]?s[i]:n.resolve(i,"package.json"),a[i]=(r.read||e.read)(o).then(function(e){try{return JSON.parse(e)}catch(t){throw t.message=t.message+" in "+JSON.stringify(o),t}})}return a[i]},e.loadPackage=function(t,n){if(t=r(t,n),!t.location)throw Error("Can't find dependency: "+JSON.stringify(t));var a=t.location;n=Object.create(n||null);var o=n.loadingPackages=n.loadingPackages||{},s=n.packages={};n.registry=n.registry||Object.create(null),n.mainPackageLocation=a,n.hasPackage=function(e){if(e=r(e,n),!e.location)return!1;var t=e.location;return!!s[t]},n.getPackage=function(e){if(e=r(e,n),!e.location)throw Error("Can't find dependency: "+JSON.stringify(e)+" from "+n.location);var t=e.location;if(!s[t])throw o[t]?Error("Dependency has not finished loading: "+JSON.stringify(e)):Error("Dependency was not loaded: "+JSON.stringify(e));return s[t]},n.loadPackage=function(t,a){if(t=r(t,a),!t.location)throw Error("Can't find dependency: "+JSON.stringify(t)+" from "+n.location);var l=t.location;return o[l]||(o[l]=e.loadPackageDescription(t,n).then(function(t){var r=i(l,t,n),a=e.makeRequire(r);return s[l]=a,a})),o[l]};var l=n.loadPackage(t);return l.location=a,l.async=function(e,t){return l.then(function(n){return n.async(e,t)})},l},e.resolve=o,e.base=function(e){return(e+"").replace(/(.+?)\/+$/,"$1").match(/([^\/]+$|^\/$|^$)/)[1]},e.isAbsolute=function(e){return/^[\w\-]+:/.test(e)},e.parseDependencies=function(e){var t={};return(e+"").replace(/(?:^|[^\w\$_.])require\s*\(\s*["']([^"']*)["']\s*\)/g,function(e,n){t[n]=!0}),Object.keys(t)},e.DependenciesCompiler=function(t,n){return function(r){return r.dependencies||void 0===r.text||(r.dependencies=t.parseDependencies(r.text)),n(r),r&&!r.dependencies&&(r.dependencies=r.text||r.factory?e.parseDependencies(r.text||r.factory):[]),r}},e.ShebangCompiler=function(e,t){return function(e){e.text&&(e.text=e.text.replace(/^#!/,"//#!")),t(e)}},e.LintCompiler=function(e,n){return function(r){try{n(r)}catch(i){throw e.lint&&t.nextTick(function(){e.lint(r)}),i}}},e.exposedConfigs=["paths","mappings","location","packageDescription","packages","modules"],e.makeCompiler=function(t){return e.JsonCompiler(t,e.ShebangCompiler(t,e.DependenciesCompiler(t,e.LintCompiler(t,e.Compiler(t)))))},e.JsonCompiler=function(e,t){return function(e){var n=(e.location||"").match(/\.json$/);return n?(e.exports=JSON.parse(e.text),e):t(e)}},e.MappingsLoader=function(t,n){return t.mappings=t.mappings||{},t.name=t.name,function(r,i){var a=t.mappings,o=Object.keys(a),s=o.length;if(e.isAbsolute(r))return n(r,i);void 0!==t.name&&0===r.indexOf(t.name)&&"/"===r.charAt(t.name.length)&&console.warn("Package reflexive module ignored:",r);var l,u;for(l=0;s>l;l++)if(u=o[l],r===u||0===r.indexOf(u)&&"/"===r.charAt(u.length)){var c=a[u],h=r.slice(u.length+1);return t.loadPackage(c,t).then(function(e){return i.mappingRedirect=h,i.mappingRequire=e,e.deepLoad(h,t.location)})}return n(r,i)}},e.ExtensionsLoader=function(t,n){var r=t.extensions||["js"],i=r.reduceRight(function(e,t){return function(r,i){return n(r+"."+t,i).fail(function(t){if(/^Can't find /.test(t.message))return e(r,i);throw t})}},function(e){throw Error("Can't find "+JSON.stringify(e)+" with extensions "+JSON.stringify(r)+" in package at "+JSON.stringify(t.location))});return function(t,r){return-1!==e.base(t).indexOf(".")?n(t,r):i(t,r)}},e.PathsLoader=function(t,r){var i=t.paths.reduceRight(function(e,t){return function(i,a){var o=n.resolve(t,i);return r(o,a).fail(function(t){if(/^Can't find /.test(t.message))return e(i,a);throw t})}},function(e){throw Error("Can't find "+JSON.stringify(e)+" from paths "+JSON.stringify(t.paths)+" in package at "+JSON.stringify(t.location))});return function(t,n){return e.isAbsolute(t)?r(t,n):i(t,n)}},e.MemoizedLoader=function(e,t){var n=e.cache=e.cache||{};return l(t,n)};var s=function(e){var t=/^(.*)\.js$/.exec(e);return t&&(e=t[1]),e},l=function(e,n){return n=n||{},function(r,i){return a(n,r)||(n[r]=t.fcall(e,r,i)),n[r]}}});