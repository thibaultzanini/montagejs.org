(function(e){"use strict";var t=e.glUtil={getContext:function(e){var t;if(e.getContext){try{t=e.getContext("webgl");if(t)return t}catch(n){}try{t=e.getContext("experimental-webgl");if(t)return t}catch(n){}}return null},showGLFailed:function(e){var t=document.createElement("div"),n="<h3>Sorry, but a WebGL context could not be created</h3>";n+="Either your browser does not support WebGL, or it may be disabled.<br/>",n+='Please visit <a href="http://get.webgl.org">http://get.webgl.org</a> for ',n+="details on how to get a WebGL enabled browser.",t.innerHTML=n,t.id="gl-error",e.parentNode.replaceChild(t,e)},createShaderProgram:function(e,t,n){var r=e.createProgram(),i=this._compileShader(e,t,e.VERTEX_SHADER),s=this._compileShader(e,n,e.FRAGMENT_SHADER);e.attachShader(r,i),e.attachShader(r,s),e.linkProgram(r);if(!e.getProgramParameter(r,e.LINK_STATUS))return e.deleteProgram(r),e.deleteShader(i),e.deleteShader(s),null;var o,u,a,f=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);r.attribute={};for(o=0;o<f;o++)u=e.getActiveAttrib(r,o),r.attribute[u.name]=e.getAttribLocation(r,u.name);var l=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);r.uniform={};for(o=0;o<l;o++)a=e.getActiveUniform(r,o),r.uniform[a.name]=e.getUniformLocation(r,a.name);return r},_compileShader:function(e,t,n){var r=e.createShader(n);return e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.debug(e.getShaderInfoLog(r)),e.deleteShader(r),null)},getSourceFromId:function(e,t){var n=document.getElementById(t);if(!n)return null;var r="",i=n.firstChild;while(i)i.nodeType==3&&(r+=i.textContent),i=i.nextSibling;return r},createSolidTexture:function(e,t){var n=new Uint8Array(t),r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGB,1,1,0,e.RGB,e.UNSIGNED_BYTE,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),r},loadTexture:function(e,t,n){var r=e.createTexture(),i=new Image;return i.addEventListener("load",function(){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D),n&&n(r)}),i.src=t,r}}})(typeof exports!="undefined"?exports:window)