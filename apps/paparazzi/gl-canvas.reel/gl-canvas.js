var Montage=require("montage/core/core").Montage,NativeControl=require("montage/ui/native-control").NativeControl,GLCanvas=exports.GLCanvas=Montage.create(NativeControl,{gl:{value:null},preserveDrawingBuffer:{value:!1},prepareForDraw:{value:function(){var e=this.preserveDrawingBuffer,t=this.gl=this.element.getContext("experimental-webgl",{preserveDrawingBuffer:e});this.gl.clearDepth(1),this.gl.enable(t.DEPTH_TEST),this.gl.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.viewport(0,0,this.width,this.height),t.clearColor(0,0,0,1);var n=document.createEvent("CustomEvent");n.initCustomEvent("glready",!0,!1,null),this.dispatchEvent(n)}},toDataURL:{value:function(){return this.element.toDataURL()}}});GLCanvas.addAttributes({width:null,height:null})