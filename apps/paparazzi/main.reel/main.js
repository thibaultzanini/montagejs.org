var Montage=require("montage/core/core").Montage,Component=require("montage/ui/component").Component;exports.Main=Montage.create(Component,{camera:{value:null},flash:{value:null},doFlash:{value:!0},countdown:{value:null},gallery:{value:null},filterGallery:{value:null},filters:{value:[],distinct:!0},snapshotController:{value:null},handleSnapshotAction:{value:function(){this.countdownSnapshot()}},handleNextFilterAction:{value:function(){this.camera.useNextFilter()}},handlePrevFilterAction:{value:function(){this.camera.usePrevFilter()}},handleFiltersloaded:{value:function(){this.filterGallery.filterController.selectedObjects=this.camera.filters[0]}},countdownSnapshot:{value:function(){var e=this;if(!this.doFlash){e.takeSnapshot();return}e.flash.classList.add("showCountdown"),e.countdown.value="3",setTimeout(function(){e.countdown.value="2",setTimeout(function(){e.countdown.value="1",setTimeout(function(){e.countdown.value="",e.flash.classList.remove("showCountdown"),e.flash.classList.add("flash"),setTimeout(function(){e.takeSnapshot(),e.flash.classList.remove("flash")},500)},1e3)},1e3)},1e3)}},takeSnapshot:{value:function(){var e=this.camera.getSnapshotURL();this.gallery.addSnapshot(e)}},templateDidLoad:{value:function(){var e=this;this.camera.addPropertyChangeListener("filterIndex",function(){e.filterSelect.element.selectedIndex=e.camera.filterIndex},!1)}}})