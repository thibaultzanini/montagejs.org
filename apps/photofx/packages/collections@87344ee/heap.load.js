montageDefine("87344ee","heap",{dependencies:["./listen/array-changes","./shim","./generic-collection","./listen/map-changes","./listen/range-changes","./listen/property-changes"],factory:function(e,t,n){function f(e,t,n){if(!(this instanceof f))return new f(e,t,n);this.contentEquals=t||Object.equals,this.contentCompare=n||Object.compare,this.content=[],this.length=0,this.addEach(e)}var r=e("./listen/array-changes"),i=e("./shim"),s=e("./generic-collection"),o=e("./listen/map-changes"),u=e("./listen/range-changes"),a=e("./listen/property-changes");n.exports=f,Object.addEach(f.prototype,s.prototype),Object.addEach(f.prototype,a.prototype),Object.addEach(f.prototype,u.prototype),Object.addEach(f.prototype,o.prototype),f.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare)},f.prototype.push=function(e){this.content.push(e),this.float(this.content.length-1),this.length++},f.prototype.pop=function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content.set(0,t),this.sink(0)),this.length--,e},f.prototype.add=function(e){this.push(e)},f.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this.contentEquals(this.content[t],e))return t;return-1},f.prototype.delete=function(e){var t=this.indexOf(e);if(t===-1)return!1;var n=this.content.pop();if(t===this.content.length)return!0;this.content.set(t,n);var r=this.contentCompare(n,e);return r>0?this.float(t):r<0&&this.sink(t),this.length--,!0},f.prototype.peek=function(){if(this.length)return this.content[0]},f.prototype.max=function(){return this.peek()},f.prototype.one=function(){return this.peek()},f.prototype.float=function(e){var t=this.content[e];while(e>0){var n=Math.floor((e+1)/2)-1,r=this.content[n];if(!(this.contentCompare(r,t)<0))break;this.content.set(n,t),this.content.set(e,r),e=n}},f.prototype.sink=function(e){var t=this.content.length,n=this.content[e],r,i,s,o,u,a;for(;;){o=(e+1)*2,s=o-1,a=!1;if(s<t){var r=this.content[s],f=this.contentCompare(r,n);f>0&&(u=s,a=!0)}if(o<t){var i=this.content[o],f=this.contentCompare(i,a?r:n);f>0&&(u=o,a=!0)}if(!a)break;this.content.set(e,this.content[u]),this.content.set(u,n),e=u}},f.prototype.clear=function(){this.content.clear(),this.length=0},f.prototype.reduce=function(e,t){var n=arguments[2];return this.content.reduce(function(t,r,i){return e.call(n,t,r,i,this)},t,this)},f.prototype.reduceRight=function(){var e=arguments[2];return this.content.reduceRight(function(t,n,r){return callback.call(e,t,n,r,this)},basis,this)},f.prototype.makeObservable=function(){this.content.addRangeChangeListener(this,"content"),this.content.addBeforeRangeChangeListener(this,"content"),this.content.addMapChangeListener(this,"content"),this.content.addBeforeMapChangeListener(this,"content")},f.prototype.handleContentRangeChange=function(e,t,n){this.dispatchRangeChange(e,t,n)},f.prototype.handleContentRangeWillChange=function(e,t,n){this.dispatchBeforeRangeChange(e,t,n)},f.prototype.handleContentMapChange=function(e,t){this.dispatchMapChange(t,e)},f.prototype.handleContentMapWillChange=function(e,t){this.dispatchBeforeMapChange(t,e)}}})