montageDefine("87344ee","spec/fast-set-spec",{dependencies:["../fast-set","../iterator","../tree-log","./collection","./set"],factory:function(e,t,n){"use strict";var r=e("../fast-set"),i=e("../iterator"),s=e("../tree-log"),o=e("./collection"),u=e("./set");describe("Set",function(){function e(e){return new r(e)}[r,e].forEach(function(e){o(e,[1,2,3,4],!0),o(e,[{id:0},{id:1},{id:2},{id:3}],!0),u(e)}),it("can use hash delegate methods",function(){function e(e,t){this.key=e,this.value=t}e.prototype.hash=function(){return""+this.key};var t=new r;t.add(new e(1,"a")),t.add(new e(3,"b")),t.add(new e(2,"c")),t.add(new e(2,"d")),expect(t.buckets.keys().sort()).toEqual(["1","2","3"])}),it("can iterate with forEach",function(){var e=[!1,null,undefined,0,1,{}],t=new r(e);t.forEach(function(t){var n=e.indexOf(t);e.splice(n,1)}),expect(e.length).toBe(0)}),it("can iterate with an iterator",function(){var e=new r([1,2,3,4,5,6]),t=new i(e),n=t.toArray();expect(n).toEqual(e.toArray())}),it("should log",function(){var e=new r([1,2,3]),t=[];e.log(s.ascii,null,t.push,t),expect(t).toEqual(["+-+ 1","| '-- 1","+-+ 2","| '-- 2","'-+ 3","  '-- 3"])}),it("should log objects by hash",function(){function e(e){this.value=e}e.prototype.hash=function(){return this.value};var t=new r([new e(1),new e(1),new e(2),new e(2)]),n=[];t.log(s.ascii,function(e,t){t(" "+JSON.stringify(e.value))},n.push,n),expect(n).toEqual(["+-+ 1",'| +-- {"value":1}','| \'-- {"value":1}',"'-+ 2",'  +-- {"value":2}','  \'-- {"value":2}'])}),it("should log objects by only one hash",function(){function e(e){this.value=e}e.prototype.hash=function(){return this.value};var t=new r([new e(1),new e(1)]),n=[];t.log(s.ascii,null,n.push,n),expect(n).toEqual(["'-+ 1","  +-- {",'  |       "value": 1',"  |   }","  '-- {",'          "value": 1',"      }"])}),describe("should log objects with a custom writer with multiple lines",function(){function e(e){this.value=e}e.prototype.hash=function(){return this.value};var t=new r([new e(1),new e(1)]),n=[];t.log(s.ascii,function(e,t,n){n(" . "),t("-+ "+e.value.value),t(" ' ")},n.push,n),["'-+ 1","  |   . ","  +---+ 1","  |   ' ","  |   . ","  '---+ 1","      ' "].forEach(function(e,t){it("line "+t,function(){expect(n[t]).toEqual(e)})})})})}})