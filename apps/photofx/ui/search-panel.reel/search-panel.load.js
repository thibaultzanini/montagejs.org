montageDefine("a005228","ui/search-panel.reel/search-panel",{dependencies:["montage","montage/ui/component"],factory:function(e,t,n){var r=e("montage").Montage,i=e("montage/ui/component").Component;t.SearchPanel=r.create(i,{photoListController:{value:null},queryParameter:{value:null},resultCount:{value:20},searchForm:{value:null},searchResultsList:{value:null},prepareForDraw:{value:function(){this.searchForm.identifier="searchForm",this.searchForm.addEventListener("submit",this,!1)}},_isSearching:{value:!1},isSearching:{get:function(){return this._isSearching},set:function(e){if(e===this._isSearching)return;this._isSearching=e,this.needsDraw=!0}},handleSearchFormSubmit:{value:function(e){e.preventDefault(),this.performSearch()}},performSearch:{value:function(){if(this.isSearching){console.log("already searching!");return}this.isSearching=!0,this.searchResults=null;var e="http://picasaweb.google.com/data/feed/base/all?visibility=public&alt=json&max-results="+this.resultCount+"&kind=photo&prettyprint=true&imgmax=720u&q=",t=e+this.queryParameter,n=new XMLHttpRequest;n.identifier="searchRequest",n.open("GET",t),n.addEventListener("load",this,!1),n.addEventListener("error",this,!1),n.send()}},handleSearchRequestLoad:{value:function(e){var t=JSON.parse(e.target.responseText);this.searchResults=t.feed.entry,this.isSearching=!1}},handleSearchRequestError:{value:function(e){console.error("handleSearchRequestError",e),this.isSearching=!1}},searchResults:{value:null},draw:{value:function(){this.isSearching?this.element.classList.add("searching"):this.element.classList.remove("searching")}}})}})