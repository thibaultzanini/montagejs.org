montageDefine("120b0c7","ui/composer/translate-composer",{dependencies:["montage","ui/composer/composer","core/event/event-manager"],factory:function(e,t,n){var r=e("montage").Montage,i=e("ui/composer/composer").Composer,s=e("core/event/event-manager").defaultEventManager,o=t.TranslateComposer=r.create(i,{_NATIVE_ELEMENTS:{value:["A","IFRAME","EMBED","OBJECT","VIDEO","AUDIO","CANVAS","LABEL","INPUT","BUTTON","SELECT","TEXTAREA","KEYGEN","DETAILS","COMMAND"]},_WHEEL_POINTER:{value:"wheel",writable:!1},_externalUpdate:{value:!0},isAnimating:{value:!1},frame:{value:function(e){this.isAnimating&&this._animationInterval(),this._externalUpdate=!1}},_pointerSpeedMultiplier:{value:1},pointerSpeedMultiplier:{get:function(){return this._pointerSpeedMultiplier},set:function(e){this._pointerSpeedMultiplier=e}},pointerStartEventPosition:{value:null},_shouldDispatchTranslate:{value:!1},_isSelfUpdate:{value:!1},_allowFloats:{value:!1},allowFloats:{get:function(){return this._allowFloats},set:function(e){this._allowFloats!==e&&(this._allowFloats=e,this.translateX=this._translateX,this.translateY=this._translateY)}},_translateX:{value:0},translateX:{get:function(){return this._translateX},set:function(e){if(this._axis==="vertical")this._translateX=this._minTranslateX||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;this._minTranslateX!==null&&t<this._minTranslateX&&(t=this._minTranslateX),this._maxTranslateX!==null&&t>this._maxTranslateX&&(t=this._maxTranslateX),this._isSelfUpdate||(this.isAnimating=!1),this._translateX=t}}},_translateY:{value:0},translateY:{get:function(){return this._translateY},set:function(e){if(this._axis==="horizontal")this._translateY=this._minTranslateY||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;this._minTranslateY!==null&&t<this._minTranslateY&&(t=this._minTranslateY),this._maxTranslateY!==null&&t>this._maxTranslateY&&(t=this._maxTranslateY),this._isSelfUpdate||(this.isAnimating=!1),this._translateY=t}}},_minTranslateX:{value:null},minTranslateX:{get:function(){return this._minTranslateX},set:function(e){e!==null&&(e=parseFloat(e)),this._minTranslateX!=e&&(e!==null&&this._translateX<e&&(this.translateX=e),this._minTranslateX=e)}},_maxTranslateX:{value:null},maxTranslateX:{get:function(){return this._maxTranslateX},set:function(e){e!==null&&(e=parseFloat(e)),this._maxTranslateX!=e&&(e!==null&&this._translateX>e&&(this.translateX=e),this._maxTranslateX=e)}},_minTranslateY:{value:null},minTranslateY:{get:function(){return this._minTranslateY},set:function(e){e!==null&&(e=parseFloat(e)),this._minTranslateY!=e&&(e!==null&&this._translateY<e&&(this.translateY=e),this._minTranslateY=e)}},_maxTranslateY:{value:null},maxTranslateY:{get:function(){return this._maxTranslateY},set:function(e){e!==null&&(e=parseFloat(e)),this._maxTranslateY!=e&&(e!==null&&this._translateY>e&&(this.translateY=e),this._maxTranslateY=e)}},_axis:{value:"both"},axis:{get:function(){return this._axis},set:function(e){switch(e){case"vertical":case"horizontal":this._axis=e,this.translateX=this._translateX,this.translateY=this._translateY;break;default:this._axis="both"}}},invertAxis:{depends:["invertXAxis","invertYAxis"],get:function(){return this._invertXAxis===this._invertYAxis?this._invertXAxis:null},set:function(e){this.invertXAxis=e,this.invertYAxis=e}},_invertXAxis:{value:!1},invertXAxis:{get:function(){return this._invertXAxis},set:function(e){this._invertXAxis=!!e}},_invertYAxis:{value:!1},invertYAxis:{get:function(){return this._invertYAxis},set:function(e){this._invertYAxis=!!e}},startTranslateSpeed:{value:500},startTranslateRadius:{value:8},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=e?!0:!1}},__momentumDuration:{value:650},_momentumDuration:{get:function(){return this.__momentumDuration},set:function(e){this.__momentumDuration=isNaN(e)?1:e>>0,this.__momentumDuration<1&&(this.__momentumDuration=1)}},_pointerX:{value:null},_pointerY:{value:null},_touchIdentifier:{value:null},_isFirstMove:{value:!1},_start:{value:function(e,t,n){this.pointerStartEventPosition={pageX:e,pageY:t,target:n},this._pointerX=e,this._pointerY=t,window.Touch?(document.addEventListener("touchend",this,!0),document.addEventListener("touchmove",this,!0)):(document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0)),this.isAnimating=!1,this._isFirstMove=!0}},_observedPointer:{value:null},_shouldPreventDefault:{value:function(e){return!!e.target.tagName&&o._NATIVE_ELEMENTS.indexOf(e.target.tagName)===-1&&!e.target.isContentEditable}},captureMousedown:{value:function(e){if(e.button!==0)return;this._shouldPreventDefault(e)&&e.preventDefault(),this._observedPointer="mouse",this._start(e.clientX,e.clientY,e.target)}},handleMousedown:{value:function(e){e.button===0&&!this.eventManager.componentClaimingPointer(this._observedPointer)&&this.eventManager.claimPointer(this._observedPointer,this)}},captureMousemove:{value:function(e){this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._move(e.clientX,e.clientY)):this.axis!=="both"?this._analyzeMovement(e):this._stealPointer()&&(e.preventDefault(),this._move(e.clientX,e.clientY))}},captureMouseup:{value:function(e){this._end(e)}},_releaseInterest:{value:function(){window.Touch?(document.removeEventListener("touchend",this,!0),document.removeEventListener("touchmove",this,!0)):(document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousemove",this,!0)),this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null}},captureTouchstart:{value:function(e){this._shouldPreventDefault(e)&&e.preventDefault();if(this._observedPointer!==null&&this.eventManager.isPointerClaimedByComponent(this._observedPointer,this))return;e.targetTouches.length===1&&(this._observedPointer=e.targetTouches[0].identifier,this._start(e.targetTouches[0].clientX,e.targetTouches[0].clientY,e.targetTouches[0].target))}},handleTouchstart:{value:function(e){this.eventManager.componentClaimingPointer(this._observedPointer)||e.targetTouches.length===1&&(this._shouldPreventDefault(e)&&e.preventDefault(),this.eventManager.claimPointer(this._observedPointer,this))}},captureTouchmove:{value:function(e){var t=0,n=e.changedTouches.length;while(t<n&&e.changedTouches[t].identifier!==this._observedPointer)t++;t<n&&(this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._move(e.changedTouches[t].clientX,e.changedTouches[t].clientY)):this._analyzeMovement(e.changedTouches[t]))}},captureTouchend:{value:function(e){var t=0,n=e.changedTouches.length;while(t<n&&e.changedTouches[t].identifier!==this._observedPointer)t++;t<n&&this._end(e.changedTouches[t])}},_analyzeMovement:{value:function(e){var t=e.velocity;if(!t)return;var n=.7853981633974483,r=2.356194490192345,i=-2.356194490192345,s=-0.7853981633974483,o,u,a,f,l,c,h,p;c=t.speed;if(0===t.speed||isNaN(t.speed))return;l=t.angle,"horizontal"===this.axis?(a=l<=n&&l>=s,f=l>=r||l<=i,(a||f)&&this._stealPointer()):"vertical"===this.axis?(o=l<=s&&l>=i,u=l>=n&&l<=r,(o||u)&&this._stealPointer()):c>=this.startTranslateSpeed?this._stealPointer():(h=this.pointerStartEventPosition.pageX-e.pageX,p=this.pointerStartEventPosition.pageY-e.pageY,h*h+p*p>this.startTranslateRadius*this.startTranslateRadius&&this._stealPointer())}},_stealPointer:{value:function(){return this.eventManager.claimPointer(this._observedPointer,this)}},_translateEndTimeout:{value:null},captureMousewheel:{value:function(e){this.eventManager.componentClaimingPointer(this._WHEEL_POINTER)||this.eventManager.claimPointer(this._WHEEL_POINTER,this.component)}},handleMousewheel:{value:function(e){var t=this;if(this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this.component)){var n=this._translateY;this._dispatchTranslateStart(),this.translateY=this._translateY-e.wheelDeltaY*20/120,this._dispatchTranslate(),window.clearTimeout(this._translateEndTimeout),this._translateEndTimeout=window.setTimeout(function(){t._dispatchTranslateEnd()},400),n!==this._translateY&&this._shouldPreventDefault(e)&&e.preventDefault(),this.eventManager.forfeitPointer(this._WHEEL_POINTER,this.component)}}},_move:{value:function(e,t){var n;this._isFirstMove&&(this._dispatchTranslateStart(this._translateX,this._translateY),this._isFirstMove=!1),this._isSelfUpdate=!0,this._axis!="vertical"&&(n=this._invertXAxis?this._pointerX-e:e-this._pointerX,this.translateX+=n*this._pointerSpeedMultiplier),this._axis!="horizontal"&&(n=this._invertYAxis?this._pointerY-t:t-this._pointerY,this.translateY+=n*this._pointerSpeedMultiplier),this._isSelfUpdate=!1,this._pointerX=e,this._pointerY=t,this._shouldDispatchTranslate&&this._dispatchTranslate()}},_bezierTValue:{value:function(e,t,n,r,i){var s=1-3*r+3*t,o=3*r-6*t,u=3*t,a=.5,f,l,c,h;for(l=0;l<10;l++)h=a*a,f=3*s*h+2*o*a+u,c=1-a,a-=(3*(c*c*a*t+c*h*r)+h*a-e)/f;return h=a*a,c=1-a,3*(c*c*a*n+c*h*i)+h*a}},_dispatchTranslateStart:{value:function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent("translateStart",!0,!0,null),n.translateX=e,n.translateY=t,this.dispatchEvent(n)}},_dispatchTranslateEnd:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateEnd",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,this.dispatchEvent(e)}},_dispatchTranslate:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translate",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,this.dispatchEvent(e)}},animateBouncingX:{value:!1,enumerable:!1},startTimeBounceX:{value:!1,enumerable:!1},animateBouncingY:{value:!1,enumerable:!1},startTimeBounceY:{value:!1,enumerable:!1},animateMomentum:{value:!1,enumerable:!1},startTime:{value:null,enumerable:!1},startX:{value:null,enumerable:!1},posX:{value:null,enumerable:!1},endX:{value:null,enumerable:!1},startY:{value:null,enumerable:!1},posY:{value:null,enumerable:!1},endY:{value:null,enumerable:!1},translateStrideX:{value:null},translateStrideY:{value:null},translateStrideDuration:{value:330},_animationInterval:{value:function(){var e=Date.now(),t,n,r,i,s=!1;this.animateMomentum&&(t=e-this.startTime,t<this.__momentumDuration?(this.posX=this.startX-(this.momentumX+this.momentumX*(this.__momentumDuration-t)/this.__momentumDuration)*t/1e3/2,this.posY=this.startY-(this.momentumY+this.momentumY*(this.__momentumDuration-t)/this.__momentumDuration)*t/1e3/2,this.translateStrideX&&this.startStrideXTime===null&&(this.__momentumDuration-t<this.translateStrideDuration||Math.abs(this.posX-this.endX)<this.translateStrideX*.75)&&(this.startStrideXTime=e),this.translateStrideY&&this.startStrideYTime===null&&(this.__momentumDuration-t<this.translateStrideDuration||Math.abs(this.posY-this.endY)<this.translateStrideY*.75)&&(this.startStrideYTime=e)):this.animateMomentum=!1),n=Math.round(this.endX/this.translateStrideX),this.startStrideXTime&&e-this.startStrideXTime>0&&(e-this.startStrideXTime<this.translateStrideDuration?(t=this._bezierTValue((e-this.startStrideXTime)/this.translateStrideDuration,.275,0,.275,1),this.posX=this.posX*(1-t)+n*this.translateStrideX*t,s=!0):this.posX=n*this.translateStrideX),n=Math.round(this.endY/this.translateStrideY),this.startStrideYTime&&e-this.startStrideYTime>0&&(e-this.startStrideYTime<this.translateStrideDuration?(t=this._bezierTValue((e-this.startStrideYTime)/this.translateStrideDuration,.275,0,.275,1),this.posY=this.posY*(1-t)+n*this.translateStrideY*t,s=!0):this.posY=n*this.translateStrideY),r=this.posX,i=this.posY,this._isSelfUpdate=!0,this.translateX=r,this.translateY=i,this._isSelfUpdate=!1,this.isAnimating=this.animateMomentum||s,this.isAnimating?this.needsFrame=!0:this._dispatchTranslateEnd()}},_end:{value:function(e){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY,this._hasMomentum&&(e.velocity.speed>40||this.translateStrideX||this.translateStrideY)?(this._axis!="vertical"?this.momentumX=e.velocity.x*this._pointerSpeedMultiplier*(this._invertXAxis?1:-1):this.momentumX=0,this._axis!="horizontal"?this.momentumY=e.velocity.y*this._pointerSpeedMultiplier*(this._invertYAxis?1:-1):this.momentumY=0,this.endX=this.startX-this.momentumX*this.__momentumDuration/2e3,this.endY=this.startY-this.momentumY*this.__momentumDuration/2e3,this.startStrideXTime=null,this.startStrideYTime=null,this.animateMomentum=!0):this.animateMomentum=!1,this.animateMomentum?this._animationInterval():this._isFirstMove||this._dispatchTranslateEnd(),this._releaseInterest()}},surrenderPointer:{value:function(e,t){return!0}},eventManager:{get:function(){return s}},load:{value:function(){window.Touch?(this._element.addEventListener("touchstart",this,!0),this._element.addEventListener("touchstart",this,!1)):(this._element.addEventListener("mousedown",this,!0),this._element.addEventListener("mousedown",this,!1),this._element.addEventListener("mousewheel",this,!1),this._element.addEventListener("mousewheel",this,!0)),this.eventManager.isStoringPointerEvents=!0}},addEventListener:{value:function(e,t,n){i.addEventListener.call(this,e,t,n),e==="translate"&&(this._shouldDispatchTranslate=!0)}}})}}),montageDefine("87344ee","listen/property-changes",{dependencies:["../weak-map"],factory:function(e,t,n){function r(){throw new Error("This is an abstract interface. Mix it. Don't construct it")}var i=e("../weak-map"),s=Object.prototype.hasOwnProperty,o=new i,u=new i;n.exports=r,r.debug=!0,r.prototype.getOwnPropertyChangeDescriptor=function(e){o.has(this)||o.set(this,{});var t=o.get(this);return s.call(t,e)||(t[e]={willChangeListeners:[],changeListeners:[]}),t[e]},r.prototype.hasOwnPropertyChangeDescriptor=function(e){if(!o.has(this))return!1;if(!e)return!0;var t=o.get(this);return s.call(t,e)?!0:!1},r.prototype.addOwnPropertyChangeListener=function(e,t,n){this.makeObservable&&!this.isObservable&&this.makeObservable();var i=r.getOwnPropertyChangeDescriptor(this,e),s;n?s=i.willChangeListeners:s=i.changeListeners,r.makePropertyObservable(this,e),s.push(t);var o=this;return function(){r.removeOwnPropertyChangeListener(o,e,s,n),o=null}},r.prototype.addBeforeOwnPropertyChangeListener=function(e,t){return r.addOwnPropertyChangeListener(this,e,t,!0)},r.prototype.removeOwnPropertyChangeListener=function(e,t,n){var i=r.getOwnPropertyChangeDescriptor(this,e),s;n?s=i.willChangeListeners:s=i.changeListeners;var o=s.lastIndexOf(t);if(o===-1)throw new Error("Can't remove listener: does not exist.");s.splice(o,1),i.changeListeners.length+i.willChangeListeners.length===0&&r.makePropertyUnobservable(this,e)},r.prototype.removeBeforeOwnPropertyChangeListener=function(e,t){return r.removeOwnPropertyChangeListener(this,e,t,!0)},r.prototype.dispatchOwnPropertyChange=function(e,t,n){var i=r.getOwnPropertyChangeDescriptor(this,e);if(i.isActive)return;i.isActive=!0;var s;n?s=i.willChangeListeners:s=i.changeListeners;var o=(n?"Will":"")+"Change",u="handleProperty"+o,a=String(e);a=a&&a[0].toUpperCase()+a.slice(1);var f="handle"+a+o;try{s.forEach(function(n){var r=n;n=n[f]||n[u]||n,n.call(r,t,e,this)},this)}finally{i.isActive=!1}},r.prototype.dispatchBeforeOwnPropertyChange=function(e,t){return r.dispatchOwnPropertyChange(this,e,t,!0)},r.prototype.makePropertyObservable=function(e){if(Array.isArray(this))return;if(!Object.isExtensible(this,e))throw new Error("Can't make property "+JSON.stringify(e)+" observable on "+this+" because object is not extensible");var t;typeof this.__state__=="object"?t=this.__state__:(t={},Object.isExtensible(this,"__state__")&&Object.defineProperty(this,"__state__",{value:t,writable:!0,enumerable:!1})),t[e]=this[e],u.has(this)||(n={},u.set(this,n));var n=u.get(this);if(s.call(n,e))return;var i,o=this,a=Object.getOwnPropertyDescriptor(o,e);do{i=Object.getOwnPropertyDescriptor(o,e);if(i)break;o=Object.getPrototypeOf(o)}while(o);i=i||{value:undefined,enumerable:!0,writable:!0,configurable:!0};if(!i.configurable)throw new Error("Can't observe non-configurable properties");n[e]=i;if(!i.writable&&!i.set)return;var f;"value"in i?f={get:function(){return i.value},set:function(n){return n===i.value?n:(r.dispatchBeforeOwnPropertyChange(this,e,i.value),i.value=n,t[e]=n,r.dispatchOwnPropertyChange(this,e,n),n)},enumerable:i.enumerable,configurable:!0}:f={get:function(){if(i.get)return i.get.apply(this,arguments)},set:function(n){var s;return i.get&&(s=i.get.apply(this,arguments)),i.set&&i.set.apply(this,arguments),i.get&&(n=i.get.apply(this,arguments),t[e]=n),n===s?n:(r.dispatchBeforeOwnPropertyChange(this,e,s),r.dispatchOwnPropertyChange(this,e,n),n)},enumerable:i.enumerable,configurable:!0},Object.defineProperty(this,e,f)},r.prototype.makePropertyUnobservable=function(e){if(Array.isArray(this))return;if(!u.has(this))throw new Error("Can't uninstall observer on property");var t=u.get(this);if(!t[e])throw new Error("Can't uninstall observer on property");var n=t[e];delete t[e];var r;typeof this.__state__=="object"?r=this.__state__:(r={},Object.isExtensible(this,"__state__")&&Object.defineProperty(this,"__state__",{value:r,writable:!0,enumerable:!1})),delete r[e],Object.defineProperty(this,e,n)},r.getOwnPropertyChangeDescriptor=function(e,t){return e.getOwnPropertyChangeDescriptor?e.getOwnPropertyChangeDescriptor(t):r.prototype.getOwnPropertyChangeDescriptor.call(e,t)},r.hasOwnPropertyChangeDescriptor=function(e,t){return e.hasOwnPropertyChangeDescriptor?e.hasOwnPropertyChangeDescriptor(t):r.prototype.hasOwnPropertyChangeDescriptor.call(e,t)},r.addOwnPropertyChangeListener=function(e,t,n,i){if(!!Object.isObject(e))return e.addOwnPropertyChangeListener?e.addOwnPropertyChangeListener(t,n,i):r.prototype.addOwnPropertyChangeListener.call(e,t,n,i)},r.removeOwnPropertyChangeListener=function(e,t,n,i){if(!!Object.isObject(e))return e.removeOwnPropertyChangeListener?e.removeOwnPropertyChangeListener(t,n,i):r.prototype.removeOwnPropertyChangeListener.call(e,t,n,i)},r.dispatchOwnPropertyChange=function(e,t,n,i){if(!!Object.isObject(e))return e.dispatchOwnPropertyChange?e.dispatchOwnPropertyChange(t,n,i):r.prototype.dispatchOwnPropertyChange.call(e,t,n,i)},r.addBeforeOwnPropertyChangeListener=function(e,t,n){return r.addOwnPropertyChangeListener(e,t,n,!0)},r.removeBeforeOwnPropertyChangeListener=function(e,t,n){return r.removeOwnPropertyChangeListener(e,t,n,!0)},r.dispatchBeforeOwnPropertyChange=function(e,t,n){return r.dispatchOwnPropertyChange(e,t,n,!0)},r.makePropertyObservable=function(e,t){return e.makePropertyObservable?e.makePropertyObservable(t):r.prototype.makePropertyObservable.call(e,t)},r.makePropertyUnobservable=function(e,t){return e.makePropertyUnobservable?e.makePropertyUnobservable(t):r.prototype.makePropertyUnobservable.call(e,t)}}}),montageDefine("120b0c7","ui/input-range.reel/input-range",{dependencies:["montage","ui/component","ui/dom"],factory:function(e,t,n){var r=e("montage").Montage,i=e("ui/component").Component,s=e("ui/dom"),o=t.InputRange=r.create(i,{_min:{value:null},min:{get:function(){return this._min},set:function(e){this._min=String.isString(e)?parseFloat(e):e,this.needsDraw=!0}},_max:{value:null},max:{get:function(){return this._max},set:function(e){this._max=String.isString(e)?parseFloat(e):e,this.needsDraw=!0}},_step:{value:null},step:{get:function(){return this._step},set:function(e){this._step=String.isString(e)?parseFloat(e):e,this.needsDraw=!0}},_width:{value:null},width:{get:function(){return this._width},set:function(e){this._width=String.isString(e)?parseFloat(e):e,this.needsDraw=!0}},percent:{value:null},_valueSyncedWithPosition:{value:null},_value:{value:null},value:{get:function(){return this._value},set:function(e,t){this._value=String.isString(e)?parseFloat(e):e,t?this._valueSyncedWithPosition=!0:(this._valueSyncedWithPosition=!1,this.needsDraw=!0)}},_handleEl:{value:null},_translateComposer:{value:null},_sliderWidth:{value:null},__positionX:{value:null},_positionX:{get:function(){return this.__positionX},set:function(e,t){e!==null&&!isNaN(e)&&(this.__positionX=e,t||this._calculateValueFromPosition(),this.needsDraw=!0)}},_touchOnHandle:{value:null},__clickTarget:{value:null},_clickTarget:{get:function(){return this.__clickTarget},set:function(e){this.__clickTarget=e,this.needsDraw=!0}},_handleWidth:{value:null},_calculateValueFromPosition:{value:function(){if(this._sliderWidth>0){var e=this.percent=this._positionX/this._sliderWidth*100,t=this.min+e/100*(this.max-this.min);Object.getPropertyDescriptor(this,"value").set.call(this,t,!0),this._valueSyncedWithPosition=!0}}},_calculatePositionFromValue:{value:function(){if(this._sliderWidth){var e,t=this.value,n=this.max-this.min;e=(this.value-this.min)/n*100;var r=e/100*this._sliderWidth;Object.getPropertyDescriptor(this,"_positionX").set.call(this,r,!0),this.percent=e,this._valueSyncedWithPosition=!0}else this._valueSyncedWithPosition=!1}},prepareForDraw:{value:function(){this.min=this.min||this.element.getAttribute("min")||0,this.max=this.max||this.element.getAttribute("max")||100,this.step=this.step||this.element.getAttribute("step")||1,this.value=this.value||this.element.getAttribute("value")||0}},prepareForActivationEvents:{value:function(){this._translateComposer.addEventListener("translateStart",this,!1),this._translateComposer.addEventListener("translate",this,!1),this._translateComposer.addEventListener("translateEnd",this,!1),this._addEventListeners()}},_addEventListeners:{value:function(){window.Touch?this.element.addEventListener("touchstart",this,!1):this.element.addEventListener("mousedown",this,!1),this._touchOnHandle=!1}},_removeEventListeners:{value:function(){window.Touch?this.element.removeEventListener("touchstart",this,!1):this.element.removeEventListener("mousedown",this,!1)}},_startTranslateX:{enumerable:!1,value:null},_startPositionX:{enumerable:!1,value:null},handleTranslateStart:{value:function(e){this._startTranslateX=e.translateX,this._startPositionX=this.__positionX,this._removeEventListeners(),this._valueSyncedWithPosition=!1}},handleTranslate:{value:function(e){if(!window.Touch||window.Touch&&this._touchOnHandle){var t=this._startPositionX+e.translateX-this._startTranslateX;t<0?t=0:t>this._sliderWidth&&(t=this._sliderWidth),this._positionX=t}}},handleTranslateEnd:{value:function(e){this._addEventListeners()}},handleMousedown:{value:function(e){this._clickTarget={x:e.pageX,y:e.pageY}}},handleTouchstart:{value:function(e){var t=e.targetTouches[0];this._touchOnHandle=t.target===this._handleEl}},surrenderPointer:{value:function(e,t){return!1}},willDraw:{value:function(){this._handleWidth||(this._handleWidth=this._handleEl.offsetWidth),this._sliderWidth=this.element.offsetWidth-1.5*(this._handleWidth/2);if(this._clickTarget){var e=s.convertPointFromNodeToPage(this.element).x,t=this._clickTarget.x-(e+this._handleWidth/2);t<0&&(t=0),this._positionX=t,this._clickTarget=null}this._valueSyncedWithPosition||this._calculatePositionFromValue()}},draw:{value:function(){var e=this._handleEl;e.style.webkitTransform!=null?e.style.webkitTransform="translate3d("+this._positionX+"px,0,0)":e.style.MozTransform!=null?e.style.MozTransform="translate3d("+this._positionX+"px,0,0)":e.style.transform!=null?e.style.transform="translate3d("+this._positionX+"px,0,0)":e.style.left=this._positionX+"px"}}})}}),montageDefine("a005228","ui/color-info-panel.reel/color-info-panel",{dependencies:["montage","montage/ui/component","montage/ui/controller/array-controller","core/point-monitor","montage/core/undo-manager","montage/core/promise"],factory:function(e,t,n){var r=e("montage").Montage,i=e("montage/ui/component").Component,s=e("montage/ui/controller/array-controller").ArrayController,o=e("core/point-monitor").PointMonitor,u=e("montage/core/undo-manager").defaultUndoManager,a=e("montage/core/promise").Promise;t.ColorInfoPanel=r.create(i,{didCreate:{value:function(){this.pointMonitorController=s.create(),this.pointMonitorController.content=[],this.pointMonitorController.objectPrototype=o;for(var e=0;e<2;e++)this.pointMonitorController.add();this.pointMonitorController.selectedIndexes=[0],this.pointMonitorController.selectObjectsOnAddition=!0}},_editor:{enumerable:!1,value:null},editor:{get:function(){return this._editor},set:function(e){var t=this._editor;if(e===t)return;t&&(t.pointMonitorController=null,t.removeEventListener("colorpick",this,!1),t.removeEventListener("colorpickend",this,!1),t.removeEventListener("imagemodified",this,!1)),this._editor=e,e&&(e.pointMonitorController=this.pointMonitorController,e.addEventListener("colorpick",this,!1),e.addEventListener("colorpickend",this,!1),e.addEventListener("imagemodified",this,!1))}},handleColorpick:{value:function(e){var t=this.pointMonitorController.getProperty("selectedObjects.0");t&&this.pickColor(t,e.canvasX,e.canvasY,e.color,!1)}},handleColorpickend:{value:function(e){var t=this.pointMonitorController.getProperty("selectedObjects.0");t&&this.pickColor(t,e.canvasX,e.canvasY,e.color,!0)}},pickColor:{value:function(e,t,n,r,i){this._undoColorPickInfo||(this._undoColorPickInfo={x:e.x,y:e.y}),e.x=t,e.y=n,!r&&(null!=t||null!=n)&&(r=this.editor.dataAtPoint(t,n)),e.color=r;if(i){var s=this._undoColorPickInfo.x,o=this._undoColorPickInfo.y;(s!==t||o!==n)&&u.register("set marker location",a.resolve([this.pickColor,this,e,s,o,null,!0])),this._undoColorPickInfo=null}}},handleImagemodified:{value:function(e){var t=this.getProperty("pointMonitorController.organizedObjects"),n=e.detail.editor,r,i;if(!t||n!==this._editor)return;for(r=0;i=t[r];r++)null!=i.x&&null!=i.y&&(i.color=n.dataAtPoint(i.x,i.y))}},handleAddMonitorButtonAction:{value:function(){this.addPointMonitors()}},handleRemoveMonitorButtonAction:{value:function(){this.removePointMonitors()}},addPointMonitors:{value:function(e){var t=this.pointMonitorController;u.isUndoing&&(t.selectObjectsOnAddition=!1),e?t.addObjects.apply(t,e):t.add(),u.register("add color marker",a.resolve([this.removePointMonitors,this,[t.organizedObjects.length-1]])),u.isUndoing&&(t.selectObjectsOnAddition=!0)}},removePointMonitors:{value:function(e){var t;if(e)t=this.pointMonitorController.removeObjectsAtIndexes(e);else{var n=this.pointMonitorController.selectedIndexes[0],r;t=this.pointMonitorController.remove(),r=this.pointMonitorController.organizedObjects.length,!this.pointMonitorController.selectedIndexes.length&&r>n?this.pointMonitorController.selectedIndexes=[n]:this.pointMonitorController.selectedIndexes=[n-1]}t&&t.length>0&&u.register("remove color marker",a.resolve([this.addPointMonitors,this,t]))}}})}}),montageDefine("a005228","ui/color-picker.reel/color-picker.html",{text:'<!doctype html>\n\n<html>\n<head>\n    <meta http-equiv=Content-Type content="text/html; charset=utf-8">\n    <title>ColorPicker</title>\n    <link rel=stylesheet type="text/css" href=color-picker.css>\n\n    <script type="text/montage-serialization">{"colorCondition":{"prototype":"montage/ui/condition.reel","properties":{"element":{"#":"colorCondition"},"removalStrategy":"hide"},"bindings":{"condition":{"<-":"@owner.currentColor"}}},"validNumberConverter":{"prototype":"core/valid-number-converter"},"pointCondition":{"prototype":"montage/ui/condition.reel","properties":{"element":{"#":"pointCondition"},"removalStrategy":"hide"},"bindings":{"condition":{"<-":"@owner.x","converter":{"@":"validNumberConverter"}}}},"redValue":{"prototype":"montage/ui/dynamic-text.reel","properties":{"element":{"#":"redValue"}},"bindings":{"value":{"<-":"@owner.currentColor.0"}}},"greenValue":{"prototype":"montage/ui/dynamic-text.reel","properties":{"element":{"#":"greenValue"}},"bindings":{"value":{"<-":"@owner.currentColor.1"}}},"blueValue":{"prototype":"montage/ui/dynamic-text.reel","properties":{"element":{"#":"blueValue"}},"bindings":{"value":{"<-":"@owner.currentColor.2"}}},"xValue":{"prototype":"montage/ui/dynamic-text.reel","properties":{"element":{"#":"xValue"}},"bindings":{"value":{"<-":"@owner.x"}}},"yValue":{"prototype":"montage/ui/dynamic-text.reel","properties":{"element":{"#":"yValue"}},"bindings":{"value":{"<-":"@owner.y"}}},"owner":{"properties":{"element":{"#":"ColorPicker"},"colorWell":{"#":"colorWell"}}}}</script>\n\n</head>\n<body>\n\n    <div data-montage-id=ColorPicker class=ColorPicker>\n        <div data-montage-id=colorWell class=colorWell></div>\n\n        <div data-montage-id=colorCondition class=colorCondition>\n            <dl class="colorValues valueList">\n                <dt>R</dt><dd data-montage-id=redValue></dd>\n                <dt>G</dt><dd data-montage-id=greenValue></dd>\n                <dt>B</dt><dd data-montage-id=blueValue></dd>\n            </dl>\n        </div>\n\n        <div data-montage-id=pointCondition class=pointCondition>\n            <dl class="pointValues valueList">\n                <dt>X</dt><dd data-montage-id=xValue></dd>\n                <dt>Y</dt><dd data-montage-id=yValue></dd>\n            </dl>\n        </div>\n\n    </div>\n\n</body>\n</html>'}),montageDefine("a005228","ui/photo-editor.reel/photo-editor.html",{text:'<!doctype html>\n\n<html>\n<head>\n    <meta http-equiv=Content-Type content="text/html; charset=utf-8">\n    <title>Photo Editor</title>\n    <link rel=stylesheet type="text/css" href=photo-editor.css>\n\n    <script type="text/montage-serialization">{"image":{"prototype":"montage/ui/image.reel","properties":{"element":{"#":"image"}},"bindings":{"src":{"<-":"@owner.photo.src"}}},"pointMonitorRepetition":{"prototype":"montage/ui/repetition.reel","properties":{"element":{"#":"pointMonitors"},"isSelectionEnabled":true},"bindings":{"contentController":{"<-":"@owner.pointMonitorController"}}},"pointMarker":{"prototype":"ui/point-marker.reel","properties":{"element":{"#":"pointMarker"}},"bindings":{"x":{"<-":"@pointMonitorRepetition.objectAtCurrentIteration.x"},"y":{"<-":"@pointMonitorRepetition.objectAtCurrentIteration.y"}}},"horizontalRuler":{"prototype":"ui/ruler.reel","properties":{"element":{"#":"horizontalRuler"},"axis":"x"},"bindings":{"container":{"<-":"@owner._canvas"},"rangeEnd":{"<-":"@owner._width"}}},"verticalRuler":{"prototype":"ui/ruler.reel","properties":{"element":{"#":"verticalRuler"},"axis":"y"},"bindings":{"container":{"<-":"@owner._canvas"},"rangeEnd":{"<-":"@owner._height"}}},"owner":{"properties":{"element":{"#":"editor"},"_image":{"@":"image"},"_canvas":{"#":"canvas"},"_toolLayer":{"#":"toolLayer"},"horizontalRuler":{"@":"horizontalRuler"},"verticalRuler":{"@":"verticalRuler"}}}}</script>\n\n</head>\n<body>\n\n    <div data-montage-id=editor class=PhotoEditor>\n        <img data-montage-id=image class=image>\n\n        <div class=canvasFrame>\n            <div data-montage-id=horizontalRuler class="horizontalRuler ruler"></div>\n            <div data-montage-id=verticalRuler class="verticalRuler ruler"></div>\n\n            <div data-montage-id=toolLayer class=toolLayer>\n                <div data-montage-id=pointMonitors>\n                    <div data-montage-id=pointMarker></div>\n                </div>\n            </div>\n            <canvas data-montage-id=canvas class=canvas></canvas>\n        </div>\n    </div>\n\n</body>\n</html>'}),montageDefine("a005228","ui/search-result.reel/search-result.html",{text:'<!doctype html>\n\n<html>\n<head>\n    <meta http-equiv=Content-Type content="text/html; charset=utf-8">\n    <title>SearchPanel</title>\n    <link rel=stylesheet href=search-result.css>\n\n    <script type="text/montage-serialization">{"owner":{"properties":{"element":{"#":"searchResult"}}},"searchResultImage":{"prototype":"montage/ui/image.reel","properties":{"element":{"#":"searchResultImage"}},"bindings":{"src":{"<-":"@owner.result.media$group.media$thumbnail.2.url"}}},"addPhotoListener":{"prototype":"montage/core/event/action-event-listener","properties":{"handler":{"@":"owner"},"action":"addPhotoAction"}},"addPhotoButton":{"prototype":"montage/ui/button.reel","properties":{"element":{"#":"addPhotoButton"},"identifier":"addPhotoButton"},"listeners":[{"type":"action","listener":{"@":"addPhotoListener"},"capture":false}]},"actionSwitchValueConverter":{"prototype":"ui/search-result.reel[ActionSwitchValueConverter]"},"actionSubstitution":{"prototype":"montage/ui/substitution.reel","properties":{"element":{"#":"actionSubstitution"},"switchComponents":{"newPhoto":{"@":"addPhotoButton"},"oldPhoto":{"#":"alreadyAddedNotice"}}},"bindings":{"switchValue":{"<-":"@owner.resultAlreadyImported","converter":{"@":"actionSwitchValueConverter"}}}}}</script>\n\n</head>\n<body>\n\n    <div data-montage-id=searchResult class=SearchResult>\n        <div class=imagePanel>\n            <img src="" data-montage-id=searchResultImage class=SearchResultImage>\n        </div>\n        <div class=actionPanel>\n            <div data-montage-id=actionSubstitution></div>\n        </div>\n\n        \n        <div class=montage-hidden>\n            <div data-montage-id=addPhotoButton class="submit addPhotoButton btn primary">Add Photo</div>\n            <span data-montage-id=alreadyAddedNotice>Already Added</span>\n        </div>\n    </div>\n\n</body>\n</html>'}),montageDefine("a005228","ui/value-based-effect.reel/value-based-effect",{dependencies:["montage","montage/ui/component","montage/core/undo-manager","montage/core/promise","montage/core/converter/converter"],factory:function(e,t,n){var r=e("montage").Montage,i=e("montage/ui/component").Component,s=e("montage/core/undo-manager").defaultUndoManager,o=e("montage/core/promise").Promise;t.ValueBasedEffect=r.create(i,{name:{value:null},enabled:{value:!1},defaultValue:{value:null},_value:{value:0},value:{value:0},_originalSliderValue:{value:null},handleValueSliderMontage_range_interaction_start:{value:function(){this._originalSliderValue=this.sliderValue}},handleValueSliderMontage_range_interaction_end:{value:function(){this._commitSliderValue(),this._originalSliderValue=null}},_commitSliderValue:{value:function(e){var t=this._originalSliderValue?this._originalSliderValue:this.sliderValue;this.sliderValue!==this._originalSliderValue&&s.register(this.name.toLowerCase()+" change",o.resolve([this._commitSliderValue,this,t])),typeof e!="undefined"&&(this.sliderValue=e)}},sliderValue:{dependencies:["value"],get:function(){return this.value},set:function(e){if(e===this._value)return;this.value=e}},minValue:{value:0},maxValue:{value:100},reset:{value:function(){this.value=this.defaultValue}}});var u=e("montage/core/converter/converter").Converter;t.ResetAvailableConverter=r.create(u,{defaultValue:{value:null},convert:{value:function(e){return null==this.defaultValue?!1:e!==this.defaultValue}}})}}),montageDefine("120b0c7","ui/condition.reel/condition",{dependencies:["montage","ui/component","core/logger"],factory:function(e,t,n){var r=e("montage").Montage,i=e("ui/component").Component,s=e("core/logger").logger("condition");t.Condition=r.create(i,{hasTemplate:{value:!1},_condition:{value:null},condition:{set:function(e){if(e===this._condition)return;this._condition=e,this.needsDraw=!0,this.removalStrategy==="remove"&&!this.isDeserializing&&(e?this.domContent=this.originalContent:this.domContent=null)},get:function(){return this._condition}},_removalStrategy:{value:"remove"},removalStrategy:{get:function(){return this._removalStrategy},set:function(e){if(this._removalStrategy===e)return;e==="hide"&&!this.isDeserializing&&(this.domContent=this.originalContent),this._removalStrategy=e,this.needsDraw=!0}},prepareForDraw:{value:function(){this.removalStrategy==="remove"&&!this.condition&&(this.domContent=null)}},draw:{value:function(){this.condition?this.element.classList.remove("montage-invisible"):this.element.classList.add("montage-invisible")}}})}}),montageDefine("a005228","ui/search-result.reel/search-result",{dependencies:["montage","montage/ui/component","montage/core/converter/converter"],factory:function(e,t,n){var r=e("montage").Montage,i=e("montage/ui/component").Component;t.SearchResult=r.create(i,{photoListController:{value:null},result:{value:null},resultAlreadyImported:{dependencies:["result","photoListController.content.count()"],get:function(){if(!this.result||!this.photoListController)return!1;var e=this.photoListController.content.getProperty("id");return e.indexOf(this.result.gphoto$id.$t)>=0}},addPhotoAction:{value:function(){if(this.resultAlreadyImported)return;var e=this.result,t;t={id:e.gphoto$id.$t,src:e.content.src,thumbnailSrc:e.getProperty("media$group.media$thumbnail.0.url"),link:e.id.$t,title:e.title.$t,source:"Picasa",authors:[e.author[0].gphoto$nickname.$t]},this.photoListController.addObjects(t)}}});var s=e("montage/core/converter/converter").Converter;t.ActionSwitchValueConverter=r.create(s,{convert:{value:function(e){return e?"oldPhoto":"newPhoto"}}})}}),montageDefine("120b0c7","ui/list.reel/list",{dependencies:["montage","ui/component"],factory:function(e,t,n){var r=e("montage").Montage,i=e("ui/component").Component,s=t.List=r.create(i,{_repetition:{value:null},delegate:{value:null},objects:{value:null},contentController:{value:null},axis:{value:null},isSelectionEnabled:{value:null},propertyChangeBindingListener:{value:function(e,t,n,r,i,s,o){return o.boundObjectPropertyPath.match(/objectAtCurrentIteration/)?this._repetition?(o.boundObject=this._repetition,this._repetition.propertyChangeBindingListener.apply(this._repetition,arguments)):null:Object.prototype.propertyChangeBindingListener.apply(this,arguments)}}})}}),montageDefine("a005228","ui/photo-thumb.reel/photo-thumb.html",{text:'<!doctype html>\n\n<html>\n<head>\n    <meta http-equiv=Content-Type content="text/html; charset=utf-8">\n    <title>PhotoThumb</title>\n    <link rel=stylesheet type="text/css" href=photo-thumb.css>\n\n    <script type="text/montage-serialization">{"image":{"prototype":"montage/ui/image.reel","properties":{"element":{"#":"image"}},"bindings":{"src":{"<-":"@owner.photo.src"}}},"owner":{"properties":{"element":{"#":"photoThumb"}}}}</script>\n\n</head>\n<body>\n\n    <div data-montage-id=photoThumb class=PhotoThumb>\n        <img data-montage-id=image class=image>\n    </div>\n\n</body>\n</html>'}),montageDefine("120b0c7","core/event/action-event-listener",{dependencies:["montage"],factory:function(e,t,n){var r=e("montage").Montage,i=t.ActionEventListener=r.create(r,{handler:{value:null},action:{value:null},initWithHandler_action_:{value:function(e,t){return this.handler=e,this.action=t,this}},handleEvent:{value:function(e){typeof this.action=="function"?this.action(e):this.handler[this.action](e)}},serializeProperties:{value:function(e){e.set("handler",this.handler,"reference"),e.set("action",this.action)}}})}}),montageDefine("120b0c7","ui/button.reel/button",{dependencies:["montage","ui/component","ui/native/button.reel"],factory:function(e,t,n){var r=e("montage").Montage,i=e("ui/component").Component,s=e("ui/native/button.reel").Button;t.Button=r.create(s,{hasTemplate:{value:!0},willPrepareForDraw:{value:function(){s.willPrepareForDraw.call(this),this.element.classList.add("montage-Button")}}})}}),montageDefine("120b0c7","ui/native/image.reel/image",{dependencies:["montage","ui/component","ui/native-control"],factory:function(e,t,n){var r=e("montage").Montage,i=e("ui/component").Component,s=e("ui/native-control").NativeControl,o=t.Image=r.create(s,{});o.addAttributes({alt:null,height:null,src:null,width:null})}}),montageDefine("a005228","ui/effects-panel.reel/effects-panel",{dependencies:["montage","montage/ui/component"],factory:function(e,t,n){var r=e("montage").Montage,i=e("montage/ui/component").Component;t.EffectsPanel=r.create(i,{editor:{value:null}})}}),montageDefine("a005228","ui/photo-thumb.reel/photo-thumb",{dependencies:["montage","montage/ui/component"],factory:function(e,t,n){var r=e("montage").Montage,i=e("montage/ui/component").Component;t.PhotoThumb=r.create(i,{photo:{value:null}})}})
bundleLoaded(undefined)