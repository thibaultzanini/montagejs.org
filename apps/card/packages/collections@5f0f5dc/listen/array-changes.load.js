montageDefine("5f0f5dc","listen/array-changes",{dependencies:["../shim","../list","../weak-map","./property-changes","./range-changes","./map-changes"],factory:function(e,t,n){function d(e){for(var t in e)Object.defineProperty(Array.prototype,t,{value:e[t],writable:!0,configurable:!0,enumerable:!1})}e("../shim");var r=e("../list"),i=e("../weak-map"),s=e("./property-changes"),o=e("./range-changes"),u=e("./map-changes"),a=Array.prototype.splice,f=Array.prototype.slice,l=Array.prototype.reverse,c=Array.prototype.sort,h={}.__proto__===Object.prototype,p;h?p=function(){this.__proto__=m}:p=function(){Object.defineProperties(this,v)},Object.defineProperty(Array.prototype,"makeObservable",{value:p,writable:!0,configurable:!0,enumerable:!1}),d(s.prototype),d(o.prototype),d(u.prototype);var v={isObservable:{value:!0,writable:!0,configurable:!0},makeObservable:{value:Function.noop,writable:!0,configurable:!0},reverse:{value:function(){this.dispatchBeforeRangeChange(this,this,0);for(var t=0;t<this.length;t++)s.dispatchBeforeOwnPropertyChange(this,t,this[t]),this.dispatchBeforeMapChange(t,this[t]);l.call(this);for(var t=0;t<this.length;t++)s.dispatchOwnPropertyChange(this,t,this[t]),this.dispatchMapChange(t,this[t]);return this.dispatchRangeChange(this,this,0),this},writable:!0,configurable:!0},sort:{value:function(){this.dispatchBeforeRangeChange(this,this,0);for(var t=0;t<this.length;t++)s.dispatchBeforeOwnPropertyChange(this,t,this[t]),this.dispatchBeforeMapChange(t,this[t]);c.apply(this,arguments);for(var t=0;t<this.length;t++)s.dispatchOwnPropertyChange(this,t,this[t]),this.dispatchMapChange(t,this[t]);return this.dispatchRangeChange(this,this,0),this},writable:!0,configurable:!0},splice:{value:function(t,n){var r=f.call(this,t,t+n),i=f.call(arguments,2);if(!r.length&&!i.length)return i;var o=i.length-r.length,u=this.length,l=Math.max(this.length+o,t+i.length),c=Math.max(u,l);o&&s.dispatchBeforeOwnPropertyChange(this,"length",this.length),this.dispatchBeforeRangeChange(i,r,t);if(o===0)for(var h=t;h<t+i.length;h++)s.dispatchBeforeOwnPropertyChange(this,h,this[h]),this.dispatchBeforeMapChange(h,this[h]);else if(s.hasOwnPropertyChangeDescriptor(this))for(var h=t;h<c;h++)s.dispatchBeforeOwnPropertyChange(this,h,this[h]),this.dispatchBeforeMapChange(h,this[h]);t>u&&(this.length=t);var p=a.apply(this,arguments);if(o===0)for(var h=t;h<t+i.length;h++)s.dispatchOwnPropertyChange(this,h,this[h]),this.dispatchMapChange(h,this[h]);else if(s.hasOwnPropertyChangeDescriptor(this))for(var h=t;h<c;h++)s.dispatchOwnPropertyChange(this,h,this[h]),this.dispatchMapChange(h,this[h]);return this.dispatchRangeChange(i,r,t),o&&s.dispatchOwnPropertyChange(this,"length",this.length),p},writable:!0,configurable:!0},set:{value:function(t,n){return this.splice(t,1,n),this},writable:!0,configurable:!0},shift:{value:function(){return this.splice(0,1)[0]},writable:!0,configurable:!0},pop:{value:function(){if(this.length)return this.splice(this.length-1,1)[0]},writable:!0,configurable:!0},push:{value:function(t){if(arguments.length===1)return this.splice(this.length,0,t);var n=f.call(arguments);return this.swap(this.length,0,n)},writable:!0,configurable:!0},unshift:{value:function(t){if(arguments.length===1)return this.splice(0,0,t);var n=f.call(arguments);return this.swap(0,0,n)},writable:!0,configurable:!0},clear:{value:function(){return this.splice(0,this.length)},writable:!0,configurable:!0}},m=Object.create(Array.prototype,v)}})