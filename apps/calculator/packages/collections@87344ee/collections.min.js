(function(e){function t(){throw Error("Can't construct. GenericCollection is a mixin.")}function n(){throw Error("Can't construct. GenericSet is a mixin.")}function r(){}function i(){throw Error("This is an abstract interface. Mix it. Don't construct it")}function s(){throw Error("Can't construct. RangeChanges is a mixin.")}function o(){throw Error("Can't construct. GenericOrder is a mixin.")}function u(e){if(!(this instanceof u))return new u(e);if(Array.isArray(e)||"string"==typeof e)return u.iterate(e);e=ht(e);if(e instanceof u)return e;if(e.next)this.next=function(){return e.next()};else if(e.iterate){var t=e.iterate();this.next=function(){return t.next()}}else{if("[object Function]"!==ht.prototype.toString.call(e))throw new TypeError("Cannot iterate");this.next=e}}function a(e,t,n){this.array=e,this.start=null==t?0:t,this.end=n}function f(e,t,n){if(!(this instanceof f))return new f(e,t,n);var r=this.head=new this.Node;r.next=r,r.prev=r,this.contentEquals=t||Object.equals,this.content=n||Function.noop,this.length=0,this.addEach(e)}function l(e){this.head=e,this.at=e.next}function c(e){this.value=e,this.next=this.prev=null}function h(){throw Error("Can't construct. MapChanges is a mixin.")}function p(){throw Error("Can't construct. GenericMap is a mixin.")}function d(e,t){if(!(this instanceof d))return new d(e,t);this.content=t||Function.noop,this.store={},this.length=0,this.addEach(e)}function v(e,t,n,r){if(!(this instanceof v))return new v(e,t,n);t=t||Object.equals,n=n||Object.hash,r=r||Function.noop,this.contentEquals=t,this.contentHash=n,this.content=r,this.buckets=new this.Buckets(null,this.Bucket),this.length=0,this.addEach(e)}function m(e,t,n,r){if(!(this instanceof m))return new m(e,t,n);t=t||Object.equals,n=n||Object.hash,r=r||Function.noop,this.contentEquals=t,this.contentHash=n,this.content=r,this.store=new It(void 0,function(e,n){return t(e.key,n.key)},function(e){return n(e.key)}),this.length=0,this.addEach(e)}function g(e,t,n,r){if(!(this instanceof g))return new g(e,t,n);t=t||Object.equals,n=n||Object.hash,r=r||Function.noop,this.contentEquals=t,this.contentHash=n,this.content=r,this.order=new this.Order(void 0,t),this.store=new this.Store(void 0,function(e,n){return t(e.value,n.value)},function(e){return n(e.value)}),this.length=0,this.addEach(e)}function y(e,t,n,r,i){if(!(this instanceof y))return new y(e,t,n,r);t=t||Infinity,n=n||Object.equals,r=r||Object.hash,i=i||Function.noop,this.store=new Gt(void 0,n,r),this.contentEquals=n,this.contentHash=r,this.content=i,this.maxLength=t,this.length=0,this.addEach(e)}function b(e,t,n,r,i){if(!(this instanceof b))return new b(e,t,n,r);n=n||Object.equals,r=r||Object.hash,i=i||Function.noop,this.contentEquals=n,this.contentHash=r,this.content=i,this.store=new nn(void 0,t,function(e,t){return n(e.key,t.key)},function(e){return r(e.key)}),this.length=0,this.addEach(e)}function w(e,t,n,r){if(!(this instanceof w))return new w(e,t,n);t=t||Object.equals,n=n||Object.hash,r=r||Function.noop,this.contentEquals=t,this.contentHash=n,this.content=r,this.store=new an(void 0,function(e,n){return t(e.key,n.key)},function(e){return n(e.key)}),this.length=0,this.addEach(e)}function E(e,t,n,r){if(!(this instanceof E))return new E(e,t,n,r);this.bucket=t||this.bucket,pn.call(this,e,n,r,function(e){var t=this.bucket();return pn.prototype.set.call(this,e,t),t})}function S(e,t,n,r){if(!(this instanceof S))return new S(e,t,n,r);Array.isArray(e)?(this.array=e,e=e.splice(0,e.length)):this.array=[],this.contentEquals=t||Object.equals,this.contentCompare=n||Object.compare,this.content=r||Function.noop,this.length=0,this.addEach(e)}function x(e,t,n){for(var r=0,i=e.length-1;r<=i;){var s=r+i>>1,o=n(t,e[s]);if(0<o)r=s+1;else{if(!(0>o))return s;i=s-1}}return-(r+1)}function T(e,t,n,r){n=x(e,t,n);if(0>n)return-1;for(;0<n&&r(t,e[n-1]);)n--;return r(t,e[n])?n:-1}function N(e,t,n,r){n=x(e,t,n);if(0>n)return-1;for(;n<e.length-1&&r(t,e[n+1]);)n++;return r(t,e[n])?n:-1}function C(e,t,n,r){if(!(this instanceof C))return new C(e,t,n,r);yn.call(this,e,t,n,r)}function k(e,t,n,r){if(!(this instanceof k))return new k(e,t,n,r);t=t||Object.equals,n=n||Object.compare,r=r||Function.noop,this.contentEquals=t,this.contentCompare=n,this.content=r,this.store=new Sn(null,function(e,n){return t(e.key,n.key)},function(e,t){return n(e.key,t.key)}),this.length=0,this.addEach(e)}function L(e,t,n,r){if(!(this instanceof L))return new L(e,t,n,r);this.contentEquals=t||Object.equals,this.contentCompare=n||Object.compare,this.content=r||Function.noop,this.root=null,this.length=0,this.addEach(e)}function A(e){this.value=e,this.right=this.left=null,this.length=1}function O(e,t,n){this.set=e,this.prev=null,this.end=n,t&&(e=this.set.findLeastGreaterThanOrEqual(t))&&(this.set.splay(e.value),this.prev=e.getPrevious())}function M(e,t,n,r){if(!(this instanceof M))return new M(e,t,n,r);t=t||Object.equals,n=n||Object.compare,r=r||Function.noop,this.contentEquals=t,this.contentCompare=n,this.content=r,this.store=new _n(null,function(e,n){return t(e.key,n.key)},function(e,t){return n(e.key,t.key)}),this.length=0,this.addEach(e)}var _={};_.module$exports=t,t.prototype.addEach=function(e){if(e&&Object(e)===e)if("function"==typeof e.forEach)e.forEach(this.add,this);else if("number"==typeof e.length)for(var t=0;t<e.length;t++)this.add(e[t],t);else Object.keys(e).forEach(function(t){this.add(e[t],t)},this)},t.prototype.deleteEach=function(e){e.forEach(function(e){this["delete"](e)},this)},t.prototype.forEach=function(e,t){return this.reduce(function(n,r,i,s,o){e.call(t,r,i,s,o)},void 0)},t.prototype.map=function(e,t){var n=[];return this.reduce(function(r,i,s,o,u){n.push(e.call(t,i,s,o,u))},void 0),n},t.prototype.toArray=function(){return this.map(Function.identity)},t.prototype.toObject=function(){var e={};return this.reduce(function(t,n,r){e[r]=n},void 0),e},t.prototype.filter=function(e,t){var n=this.constructClone();return this.reduce(function(r,i,s,o,u){e.call(t,i,s,o,u)&&n.add(i)},void 0),n},t.prototype.every=function(e,t){return this.reduce(function(n,r,i,s,o){return n&&e.call(t,r,i,s,o)},!0)},t.prototype.some=function(e,t){return this.reduce(function(n,r,i,s,o){return n||e.call(t,r,i,s,o)},!1)},t.prototype.all=function(){return this.every(Boolean)},t.prototype.any=function(){return this.some(Boolean)},t.prototype.min=function(e){return e=this.contentCompare||Object.compare,this.reduce(function(t,n){return 0>e(n,t)?n:t},Infinity)},t.prototype.max=function(e){return e=this.contentCompare||Object.compare,this.reduce(function(t,n){return 0<e(n,t)?n:t},-Infinity)},t.prototype.sum=function(e){return this.reduce(function(e,t){return e+t},void 0===e?0:e)},t.prototype.average=function(e){var t=void 0===e?0:e,n=void 0===e?0:e;return this.reduce(function(e,r){t+=r,n+=1},void 0),t/n},t.prototype.concat=function(){for(var e=this.constructClone(this),t=0;t<arguments.length;t++)e.addEach(arguments[t]);return e},t.prototype.flatten=function(){var e=this;return this.reduce(function(t,n){return n.forEach(function(e){this.push(e)},t,e),t},[])},t.prototype.zip=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this);for(var t=[],n=Infinity,r=0;r<e.length;r++){var i=e[r];e[r]=i.toArray(),i.length<n&&(n=i.length)}for(r=0;r<e.length;r++)for(var i=e[r],s=0;s<i.length;s++)s<n&&s in i&&(t[s]=t[s]||[],t[s][r]=i[s]);return t},t.prototype.sorted=function(e,t,n){return e=e||this.contentCompare||Object.compare,e.by?(t=e.by,e=e.compare||this.contentCompare||Object.compare):t=t||Function.identity,void 0===n&&(n=1),this.map(function(e){return{by:t(e),value:e}}).sort(function(t,r){return e(t.by,r.by)*n}).map(function(e){return e.value})},t.prototype.reversed=function(){return this.constructClone(this).reverse()},t.prototype.clone=function(e,t){if(void 0===e)e=Infinity;else if(0===e)return this;var n=this.constructClone();return this.forEach(function(r,i){n.add(Object.clone(r,e-1,t),i)},this),n},t.prototype.only=function(){if(0===this.length)throw Error("Can't get only value in empty collection.");if(1<this.length)throw Error("Can't get only value in collection with multiple values.");return this.one()},_.module$exports&&(_=_.module$exports);var D={};D.module$exports=n,n.prototype.union=function(e){var t=this.constructClone(this);return t.addEach(e),t},n.prototype.intersection=function(e){return this.constructClone(this.filter(function(t){return e.has(t)}))},n.prototype.difference=function(e){var t=this.constructClone(this);return t.deleteEach(e),t},n.prototype.symmetricDifference=function(e){var t=this.union(e),e=this.intersection(e);return t.difference(e)},n.prototype.equals=function(e,t){var n=this;return Object.can(e,"reduce")&&this.length===e.length&&e.reduce(function(e,r){return e&&n.has(r,t)},!0)},D.module$exports&&(D=D.module$exports);var P=_,H=Object.prototype.toString;Array.isArray||(Array.isArray=function(e){return"[object Array]"==H.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=P.forEach),Array.prototype.map||(Array.prototype.map=P.map),Array.prototype.filter||(Array.prototype.filter=P.filter),Array.prototype.every||(Array.prototype.every=P.every),Array.prototype.some||(Array.prototype.some=P.some),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=toObject(this),n=t.length>>>0;if("[object Function]"!=H.call(e))throw new TypeError(e+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var r=0,i;if(2<=arguments.length)i=arguments[1];else do{if(r in t){i=t[r++];break}if(++r>=n)throw new TypeError("reduce of empty array with no initial value")}while(1);for(;r<n;r++)r in t&&(i=e.call(void 0,i,t[r],r,t));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=toObject(this),n=t.length>>>0;if("[object Function]"!=H.call(e))throw new TypeError(e+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var r,n=n-1;if(2<=arguments.length)r=arguments[1];else do{if(n in t){r=t[n--];break}if(0>--n)throw new TypeError("reduceRight of empty array with no initial value")}while(1);do n in this&&(r=e.call(void 0,r,t[n],n,t));while(n--);return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=toObject(this),n=t.length>>>0;if(!n)return-1;var r=0;1<arguments.length&&(r=toInteger(arguments[1]));for(r=0<=r?r:Math.max(0,n+r);r<n;r++)if(r in t&&t[r]===e)return r;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){var t=toObject(this),n=t.length>>>0;if(!n)return-1;var r=n-1;1<arguments.length&&(r=Math.min(r,toInteger(arguments[1])));for(r=0<=r?r:n-Math.abs(r);0<=r;r--)if(r in t&&e===t[r])return r;return-1});var B={};B.module$exports=Function,Function.noop=function(){},Function.identity=function(e){return e},Function.by=function(e,t){var t=t||Object.compare,e=e||Function.identity,n=function(n,r){return t(e(n),e(r))};return n.compare=t,n.by=e,n},B.module$exports&&(B=B.module$exports);var j={};j.module$exports=r,r.ascii={intersection:"+",through:"-",branchUp:"+",branchDown:"+",fromBelow:".",fromAbove:"'",fromBoth:"+",strafe:"|"},r.unicodeRound={intersection:"╋",through:"━",branchUp:"┻",branchDown:"┳",fromBelow:"╭",fromAbove:"╰",fromBoth:"┣",strafe:"┃"},r.unicodeSharp={intersection:"╋",through:"━",branchUp:"┻",branchDown:"┳",fromBelow:"┏",fromAbove:"┗",fromBoth:"┣",strafe:"┃"},j.module$exports&&(j=j.module$exports);var F={},I=F,q;if("undefined"!=typeof WeakMap)q=WeakMap;else{var R=function(e){return e.prototype=null,Object.freeze(e)},U=Object.getOwnPropertyNames,z=Object.defineProperty,W={};U(Object).forEach(function(e){W[e]=Object[e]});var X="ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var V=new ArrayBuffer(25),V=new Uint8Array(V);crypto.getRandomValues(V),X="rand:"+Array.prototype.map.call(V,function(e){return(e%36).toString(36)}).join("")+"___"}z(Object,"getOwnPropertyNames",{value:function(e){return U(e).filter(function(e){return e!==X})}}),"getPropertyNames"in Object&&z(Object,"getPropertyNames",{value:function(e){return W.getPropertyNames(e).filter(function(e){return e!==X})}});var $=function(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[X];if(t&&t.key===e)return t;if(W.isExtensible(e))return t={key:e,gets:[],vals:[]},z(e,X,{value:t,writable:!1,enumerable:!1,configurable:!1}),t},J=Object.freeze;z(Object,"freeze",{value:function(e){return $(e),J(e)}});var K=Object.seal;z(Object,"seal",{value:function(e){return $(e),K(e)}});var Q=Object.preventExtensions;z(Object,"preventExtensions",{value:function(e){return $(e),Q(e)}});var G=function(){function e(r,i){var s=$(r),o;return s?(o=s.gets.indexOf(e),s=s.vals):(o=t.indexOf(r),s=n),0<=o?s[o]:i}var t=[],n=[];return Object.create(G.prototype,{get___:{value:R(e)},has___:{value:R(function(n){var r=$(n);return 0<=(r?r.gets.indexOf(e):t.indexOf(n))})},set___:{value:R(function(r,i){var s=$(r),o;s?(o=s.gets.indexOf(e),0<=o?s.vals[o]=i:(s.gets.push(e),s.vals.push(i))):(o=t.indexOf(r),0<=o?n[o]=i:(t.push(r),n.push(i)))})},delete___:{value:R(function(r){var i=$(r);return i?(r=i.gets.indexOf(e),0<=r&&(i.gets.splice(r,1),i.vals.splice(r,1))):(r=t.indexOf(r),0<=r&&(t.splice(r,1),n.splice(r,1))),!0})}})};G.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){this.set___(e,t)},writable:!0,configurable:!0},"delete":{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),q=G}I.module$exports=q,F.module$exports&&(F=F.module$exports);var Y={},Z=F,et=Object.prototype.hasOwnProperty,tt=new Z,nt=new Z;Y.module$exports=i,i.prototype.getOwnPropertyChangeDescriptor=function(e){tt.has(this)||tt.set(this,{});var t=tt.get(this);return et.call(t,e)||(t[e]={willChangeListeners:[],changeListeners:[]}),t[e]},i.prototype.hasOwnPropertyChangeDescriptor=function(e){if(!tt.has(this))return!1;if(!e)return!0;var t=tt.get(this);return et.call(t,e)?!0:!1},i.prototype.addOwnPropertyChangeListener=function(e,t,n){this.makeObservable&&!this.isObservable&&this.makeObservable();var r=i.getOwnPropertyChangeDescriptor(this,e),n=n?r.willChangeListeners:r.changeListeners;i.makePropertyObservable(this,e),n.push(t)},i.prototype.addBeforeOwnPropertyChangeListener=function(e,t){return i.addOwnPropertyChangeListener(this,e,t,!0)},i.prototype.removeOwnPropertyChangeListener=function(e,t,n){var r=i.getOwnPropertyChangeDescriptor(this,e),n=n?r.willChangeListeners:r.changeListeners,t=n.lastIndexOf(t);if(-1===t)throw Error("Can't remove listener: does not exist.");n.splice(t,1),0===r.changeListeners.length+r.willChangeListeners.length&&i.makePropertyUnobservable(this,e)},i.prototype.removeBeforeOwnPropertyChangeListener=function(e,t){return i.removeOwnPropertyChangeListener(this,e,t,!0)},i.prototype.dispatchOwnPropertyChange=function(e,t,n){var r=i.getOwnPropertyChangeDescriptor(this,e),r=n?r.willChangeListeners:r.changeListeners,n=(n?"Will":"")+"Change",s="handleProperty"+n,o=String(e),o=o&&o[0].toUpperCase()+o.slice(1),u="handle"+o+n;r.forEach(function(n){var r=n,n=n[u]||n[s]||n;n.call&&n.call(r,t,e,this)},this)},i.prototype.dispatchBeforeOwnPropertyChange=function(e,t){return i.dispatchOwnPropertyChange(this,e,t,!0)},i.prototype.makePropertyObservable=function(e){if(!Array.isArray(this)){nt.has(this)||(t={},nt.set(this,t));var t=nt.get(this);if(!et.call(t,e)){var n,r=this;Object.getOwnPropertyDescriptor(r,e);do{if(n=Object.getOwnPropertyDescriptor(r,e))break;r=Object.getPrototypeOf(r)}while(r);n=n||{value:void 0,enumerable:!0,writable:!0,configurable:!0};if(!n.configurable)throw Error("Can't observe non-configurable properties");t[e]=n,(n.writable||n.set)&&Object.defineProperty(this,e,"value"in n?{get:function(){return n.value},set:function(t){return t===n.value?t:(i.dispatchBeforeOwnPropertyChange(this,e,n.value),n.value=t,i.dispatchOwnPropertyChange(this,e,t),t)},enumerable:n.enumerable,configurable:!0}:{get:function(){if(n.get)return n.get.apply(this,arguments)},set:function(t){var r;return n.get&&(r=n.get.apply(this,arguments)),t===r?t:(i.dispatchBeforeOwnPropertyChange(this,e,r),n.set&&n.set.apply(this,arguments),n.get&&(t=n.get.apply(this,arguments)),i.dispatchOwnPropertyChange(this,e,t),t)},enumerable:n.enumerable,configurable:!0})}}},i.prototype.makePropertyUnobservable=function(e){if(!Array.isArray(this)){if(!nt.has(this))throw Error("Can't uninstall observer on property");var t=nt.get(this);if(!t[e])throw Error("Can't uninstall observer on property");var n=t[e];delete t[e],Object.defineProperty(this,e,n)}},i.getOwnPropertyChangeDescriptor=function(e,t){return e.getOwnPropertyChangeDescriptor?e.getOwnPropertyChangeDescriptor(t):i.prototype.getOwnPropertyChangeDescriptor.call(e,t)},i.hasOwnPropertyChangeDescriptor=function(e,t){return e.hasOwnPropertyChangeDescriptor?e.hasOwnPropertyChangeDescriptor(t):i.prototype.hasOwnPropertyChangeDescriptor.call(e,t)},i.addOwnPropertyChangeListener=function(e,t,n,r){return e.addOwnPropertyChangeListener?e.addOwnPropertyChangeListener(t,n,r):i.prototype.addOwnPropertyChangeListener.call(e,t,n,r)},i.removeOwnPropertyChangeListener=function(e,t,n,r){return e.removeOwnPropertyChangeListener?e.removeOwnPropertyChangeListener(t,n,r):i.prototype.removeOwnPropertyChangeListener.call(e,t,n,r)},i.dispatchOwnPropertyChange=function(e,t,n,r){return e.dispatchOwnPropertyChange?e.dispatchOwnPropertyChange(t,n,r):i.prototype.dispatchOwnPropertyChange.call(e,t,n,r)},i.addBeforeOwnPropertyChangeListener=function(e,t,n){return i.addOwnPropertyChangeListener(e,t,n,!0)},i.removeBeforeOwnPropertyChangeListener=function(e,t,n){return i.removeOwnPropertyChangeListener(e,t,n,!0)},i.dispatchBeforeOwnPropertyChange=function(e,t,n){return i.dispatchOwnPropertyChange(e,t,n,!0)},i.makePropertyObservable=function(e,t){return e.makePropertyObservable?e.makePropertyObservable(t):i.prototype.makePropertyObservable.call(e,t)},i.makePropertyUnobservable=function(e,t){return e.makePropertyUnobservable?e.makePropertyUnobservable(t):i.prototype.makePropertyUnobservable.call(e,t)},Y.module$exports&&(Y=Y.module$exports);var rt={},it=new F;rt.module$exports=s,s.prototype.getRangeChangeDescriptor=function(){return it.has(this)||it.set(this,{isActive:!1,changeListeners:[],willChangeListeners:[]}),it.get(this)},s.prototype.addRangeChangeListener=function(e,t){!this.isObservable&&this.makeObservable&&this.makeObservable();var n=this.getRangeChangeDescriptor();(t?n.willChangeListeners:n.changeListeners).push(e),this.dispatchesRangeChanges=!!(n.willChangeListeners.length+n.changeListeners.length)},s.prototype.removeRangeChangeListener=function(e,t){var n=this.getRangeChangeDescriptor(),r;r=t?n.willChangeListeners:n.changeListeners;var i=r.lastIndexOf(e);if(-1===i)throw Error("Can't remove listener: does not exist.");r.splice(i,1),this.dispatchesRangeChanges=!!(n.willChangeListeners.length+n.changeListeners.length)},s.prototype.dispatchRangeChange=function(e,t,n,r){var i=this.getRangeChangeDescriptor();if(!i.isActive){i.isActive=!0;var s;s=r?i.willChangeListeners:i.changeListeners;try{s.forEach(function(i){i.handleEvent?i.handleEvent({phase:r?"before":"after",currentTarget:this,target:this,plus:e,minus:t,index:n}):(i=r?i.handleRangeWillChange||i:i.handleRangeChange||i,i.call&&i.call(this,e,t,n,r))},this)}finally{i.isActive=!1}}},s.prototype.addBeforeRangeChangeListener=function(e){return this.addRangeChangeListener(e,!0)},s.prototype.removeBeforeRangeChangeListener=function(e){return this.removeRangeChangeListener(e,!0)},s.prototype.dispatchBeforeRangeChange=function(e,t,n){return this.dispatchRangeChange(e,t,n,!0)},rt.module$exports&&(rt=rt.module$exports);var st={},ot=F;st.module$exports=Object,Object.empty=Object.freeze(Object.create(null)),Object.isObject=function(e){return Object(e)===e},Object.getValueOf=function(e){return Object.can(e,"valueOf")&&(e=e.valueOf()),e};var ut=new ot;Object.hash=function(e){return Object.can(e,"hash")?""+e.hash():Object(e)===e?(ut.has(e)||ut.set(e,Math.random().toString(36).slice(2)),ut.get(e)):""+e};var at=Object.prototype.hasOwnProperty;Object.owns=function(e,t){return at.call(e,t)},Object.can=function(e,t){return null!=e&&"function"==typeof e[t]&&!at.call(e,t)},Object.has=function(e,t){if("object"!=typeof e)throw Error("Object.has can't accept non-object: "+typeof e);if(Object.can(e,"has"))return e.has(t);if("string"==typeof t)return t in e&&e[t]!==Object.prototype[t];throw Error("Key must be a string for Object.has on plain objects")},Object.get=function(e,t,n){if("object"!=typeof e)throw Error("Object.get can't accept non-object: "+typeof e);return Object.can(e,"get")?e.get(t,n):Object.has(e,t)?e[t]:n},Object.set=function(e,t,n){Object.can(e,"set")?e.set(t,n):e[t]=n},Object.addEach=function(e,t){Object.can(t,"forEach")?"function"==typeof t.keys?t.forEach(function(t,n){e[n]=t}):t.forEach(function(t){e[t[0]]=t[1]}):Object.keys(t).forEach(function(n){e[n]=t[n]})},Object.forEach=function(e,t,n){Object.keys(e).forEach(function(r){t.call(n,e[r],r,e)})},Object.map=function(e,t,n){return Object.keys(e).map(function(r){return t.call(n,e[r],r,e)})},Object.values=function(e){return Object.map(e,Function.identity)},Object.is=function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t},Object.equals=function(e,t,n){n=n||Object.equals,e=Object.getValueOf(e),t=Object.getValueOf(t);if(e===t)return 0!==e||1/e===1/t;if(Object.can(e,"equals"))return e.equals(t,n);if(Object.can(t,"equals"))return t.equals(e,n);if("object"==typeof e&&"object"==typeof t){var r=Object.getPrototypeOf(e),i=Object.getPrototypeOf(t);if(r===i&&(r===Object.prototype||null===r)){for(var s in e)if(!n(e[s],t[s]))return!1;for(s in t)if(!n(e[s],t[s]))return!1;return!0}}return e!==e&&t!==t},Object.compare=function(e,t){var e=Object.getValueOf(e),t=Object.getValueOf(t),n=typeof e;return e===t||n!==typeof t?0:"number"===n?e-t:"string"===n?e<t?-1:1:Object.can(e,"compare")?e.compare(t):Object.can(t,"compare")?-t.compare(e):0},Object.clone=function(e,t,n){e=Object.getValueOf(e),n=n||new ot;if(void 0===t)t=Infinity;else if(0===t)return e;if(Object.isObject(e)){if(!n.has(e))if(Object.can(e,"clone"))n.set(e,e.clone(t,n));else{var r=Object.getPrototypeOf(e);if(null!==r&&r!==Object.prototype)throw Error("Can't clone "+e);r=Object.create(r),n.set(e,r);for(var i in e)r[i]=Object.clone(e[i],t-1,n)}return n.get(e)}return e},Object.clear=function(e){if(Object.can(e,"clear"))e.clear();else for(var t=Object.keys(e),n=t.length;n;)n--,delete e[t[n]];return e},st.module$exports&&(st=st.module$exports);var ft={},lt=st;ft.module$exports=o,o.prototype.equals=function(e,t){return t=t||this.contentEquals||lt.equals,this===e?!0:e?this.length===e.length&&this.zip(e).every(function(e){return t(e[0],e[1])}):!1},o.prototype.compare=function(e,t){t=t||this.contentCompare||lt.compare;if(this===e)return 0;if(!e)return 1;var n=Math.min(this.length,e.length),r=this.zip(e).reduce(function(e,r,i){return 0===e?i>=n?e:t(r[0],r[1]):e},0);return 0===r?this.length-e.length:r},ft.module$exports&&(ft=ft.module$exports);var ct={};ct.module$exports=u;var ht=st;ht.addEach(u.prototype,_.prototype),u.prototype.constructClone=function(e){var t=[];return Reducible.addEach.call(t,e),t},u.prototype.mapIterator=function(e,t){var n=u(this),r=0;if("[object Function]"!=ht.prototype.toString.call(e))throw new TypeError;return new n.constructor(function(){return e.call(t,n.next(),r++,n)})},u.prototype.filterIterator=function(e,t){var n=u(this),r=0;if("[object Function]"!=ht.prototype.toString.call(e))throw new TypeError;return new n.constructor(function(){for(var i;;)if(i=n.next(),e.call(t,i,r++,n))return i})},u.prototype.reduce=function(e){var t=u(this),n=arguments[1],r=arguments[2],i=0,s;if("[object Function]"!=ht.prototype.toString.call(e))throw new TypeError;try{s=t.next(),n=1<arguments.length?e.call(r,n,s,i,t):s,i++}catch(o){if(isStopIteration(o)){if(1<arguments.length)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value")}throw o}try{for(;;)s=t.next(),n=e.call(r,n,s,i,t),i++}catch(a){if(isStopIteration(a))return n;throw a}},u.prototype.every=function(e){var t=u(this),n=!0;if("[object Function]"!=ht.prototype.toString.call(e))throw new TypeError;return t.mapIterator.apply(t,arguments).forEach(function(e){if(!e)throw n=!1,StopIteration}),n},u.prototype.some=function(e){var t=u(this),n=!1;if("[object Function]"!=ht.prototype.toString.call(e))throw new TypeError;return t.mapIterator.apply(t,arguments).forEach(function(e){if(e)throw n=!0,StopIteration}),n},u.prototype.concat=function(){return u.concat(Array.prototype.concat.apply(this,arguments))},u.prototype.dropWhile=function(e,t){var n=u(this),r=!1,i;if("[object Function]"!=ht.prototype.toString.call(e))throw new TypeError;return n.forEach(function(s,o){if(!e.call(t,s,o,n))throw r=!0,i=s,StopIteration}),r?n.constructor([i]).concat(n):n.constructor([])},u.prototype.takeWhile=function(e,t){var n=u(this);if("[object Function]"!=ht.prototype.toString.call(e))throw new TypeError;return n.mapIterator(function(r,i){if(!e.call(t,r,i,n))throw StopIteration;return r})},u.prototype.filterIterator=function(e,t){var n=u(this),r=0;if("[object Function]"!=ht.prototype.toString.call(e))throw new TypeError;return new n.constructor(function(){for(var i;;)if(i=n.next(),e.call(t,i,r++,n))return i})},u.prototype.zip=function(){return u.transpose(Array.prototype.concat.apply(this,arguments))},u.prototype.enumerate=function(e){return u.count(e).zip(this)},u.iterate=function(e){var t;return t=0,new u(function(){if("object"==typeof e)for(;!(t in e);){if(t>=e.length)throw StopIteration;t+=1}else if(t>=e.length)throw StopIteration;var n=e[t];return t+=1,n})},u.cycle=function(e,t){2>arguments.length&&(t=Infinity);var n=function(){throw StopIteration};return new u(function(){var r;try{return n()}catch(i){if(isStopIteration(i)){if(0>=t)throw i;return t--,r=u.iterate(e),n=r.next.bind(r),n()}throw i}})},u.concat=function(e){var e=u(e),t=function(){throw StopIteration};return new u(function(){var n;try{return t()}catch(r){if(isStopIteration(r))return n=u(e.next()),t=n.next.bind(n),t();throw r}})},u.transpose=function(e){return e=u(e).map(u),1>e.length?new u([]):new u(function(){var t,n=e.map(function(e){try{return e.next()}catch(n){if(!isStopIteration(n))throw n;t=!0}});if(t)throw StopIteration;return n})},u.zip=function(){return u.transpose(Array.prototype.slice.call(arguments))},u.chain=function(){return u.concat(Array.prototype.slice.call(arguments))},u.range=function(e,t,n){return 3>arguments.length&&(n=1),2>arguments.length&&(t=e,e=0),e=e||0,new u(function(){if(e>=t)throw StopIteration;if(isNaN(e))throw"";var r=e;return e+=n,r})},u.count=function(e,t){return u.range(e,Infinity,t||1)},u.repeat=function(e,t){return 2>arguments.length&&(t=Infinity),(new u.range(+t)).mapIterator(function(){return e})},"undefined"==typeof isStopIteration&&(e.isStopIteration=function(e){return"[object StopIteration]"===ht.prototype.toString.call(e)});if("undefined"==typeof StopIteration){e.StopIteration={};var pt=ht.prototype.toString;ht.prototype.toString=function(){return this===e.StopIteration||this instanceof e.ReturnValue?"[object StopIteration]":pt.call(this,arguments)}}"undefined"==typeof ReturnValue&&(e.ReturnValue=function(t){if(!(this instanceof e.ReturnValue))return new e.ReturnValue(t);this.value=t}),ct.module$exports&&(ct=ct.module$exports);var dt={},vt=_,mt=ft,gt=F;dt.module$exports=Array,Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.from=function(e){var t=[];return t.addEach(e),t},Array.prototype.addEach=vt.prototype.addEach,Array.prototype.deleteEach=vt.prototype.deleteEach,Array.prototype.toArray=vt.prototype.toArray,Array.prototype.toObject=vt.prototype.toObject,Array.prototype.all=vt.prototype.all,Array.prototype.any=vt.prototype.any,Array.prototype.min=vt.prototype.min,Array.prototype.max=vt.prototype.max,Array.prototype.sum=vt.prototype.sum,Array.prototype.average=vt.prototype.average,Array.prototype.only=vt.prototype.only,Array.prototype.flatten=vt.prototype.flatten,Array.prototype.zip=vt.prototype.zip,Array.prototype.sorted=vt.prototype.sorted,Array.prototype.reversed=vt.prototype.reversed,Array.prototype.constructClone=function(e){var t=new this.constructor;return t.addEach(e),t},Array.prototype.has=function(e,t){return-1!==this.find(e,t)},Array.prototype.get=function(e){if(+e!==e)throw Error("Indicies must be numbers");return this[e]},Array.prototype.set=function(e,t){return this.splice(e,1,t),!0},Array.prototype.add=function(e){return this.push(e),!0},Array.prototype["delete"]=function(e,t){var n=this.find(e,t);return-1!==n?(this.splice(n,1),!0):!1},Array.prototype.find=function(e,t){for(var t=t||this.contentEquals||Object.equals,n=0;n<this.length;n++)if(n in this&&t(this[n],e))return n;return-1},Array.prototype.findLast=function(e,t){var t=t||this.contentEquals||Object.equals,n=this.length;do if(n--,n in this&&t(this[n],e))return n;while(0<n);return-1},Array.prototype.swap=function(e,t,n){var r=Array.prototype.slice.call(arguments,0,2);return n&&r.push.apply(r,n),this.splice.apply(this,r)},Array.prototype.one=function(){if(0===this.length)throw Error("Can't get one element from empty array.");for(var e in this)if(Object.owns(this,e))return this[e]},Array.prototype.clear=function(){return this.length=0,this},Array.prototype.compare=function(e,t){var t=t||Object.compare,n,r,i,s;if(this===e)return 0;if(!e||!Array.isArray(e))return mt.prototype.compare.call(this,e,t);r=Math.min(this.length,e.length);for(n=0;n<r;n++)if(n in this){if(!(n in e))return-1;if(i=this[n],s=e[n],i=t(i,s))return i}else if(n in e)return 1;return this.length-e.length},Array.prototype.equals=function(e){var t=t||Object.equals,n=0,r=this.length,i,s;if(this===e)return!0;if(!e||!Array.isArray(e))return mt.prototype.equals.call(this,e);if(r!==e.length)return!1;for(;n<r;++n)if(n in this){if(i=this[n],s=e[n],i!==s&&i&&s&&!t(i,s))return!1}else if(n in e)return!1;return!0},Array.prototype.clone=function(e,t){if(void 0===e)e=Infinity;else if(0===e)return this;var t=t||new gt,n=[],r;for(r in this)Object.owns(this,r)&&(n[r]=Object.clone(this[r],e-1,t));return n},Array.prototype.iterate=function(e,t){return new a(this,e,t)},Array.prototype.Iterator=a,a.prototype.next=function(){if(this.start===(null==this.end?this.array.length:this.end))throw StopIteration;return this.array[this.start++]},dt.module$exports&&(dt=dt.module$exports);var yt={};yt.module$exports=f;var bt=ft,wt=Y;Object.addEach(f.prototype,_.prototype),Object.addEach(f.prototype,bt.prototype),Object.addEach(f.prototype,wt.prototype),f.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.content)},f.prototype.find=function(e,t){for(var t=t||this.contentEquals,n=this.head,r=n.next;r!==n;){if(t(r.value,e))return r;r=r.next}},f.prototype.findLast=function(e,t){for(var t=t||this.contentEquals,n=this.head,r=n.prev;r!==n;){if(t(r.value,e))return r;r=r.prev}},f.prototype.has=function(e,t){return!!this.find(e,t)},f.prototype.get=function(e,t){var n=this.find(e,t);return n?n.value:this.content()},f.prototype["delete"]=function(e,t){var n=this.findLast(e,t);return n?(n["delete"](),this.length--,!0):!1},f.prototype.clear=function(){this.head.next=this.head.prev=this.head,this.length=0},f.prototype.add=function(e){return this.head.addBefore(new this.Node(e)),this.length++,!0},f.prototype.push=function(){for(var e=this.head,t=0;t<arguments.length;t++){var n=new this.Node(arguments[t]);e.addBefore(n),this.length++}},f.prototype.unshift=function(){for(var e=this.head,t=0;t<arguments.length;t++){var n=new this.Node(arguments[t]);e.addAfter(n),this.length++,e=n}},f.prototype.pop=function(){var e,t=this.head;return t.prev!==t&&(e=t.prev.value,t.prev["delete"](),this.length--),e},f.prototype.shift=function(){var e,t=this.head;return t.prev!==t&&(e=t.next.value,t.next["delete"](),this.length--),e},f.prototype.scan=function(e,t){var n=this.head;if("number"==typeof e){var r=e;if(0<=r)for(e=n.next;r&&(r--,e=e.next,e!=n););else for(e=n;0>r&&(r++,e=e.prev,e!=n););return e}return e||t},f.prototype.slice=function(e,t){for(var n=[],r=this.head,e=this.scan(e,r.next),t=this.scan(t,r);e!==t&&e!==r;)n.push(e.value),e=e.next;return n},f.prototype.splice=function(e,t){return this.swap(e,t,Array.prototype.slice.call(arguments,2))},f.prototype.swap=function(e,t,n){var r=[],i=e,e=this.scan(e,this.head);for(void 0===t&&(t=Infinity);t--&&0<=t&&e!==this.head;)r.push(e.value),e["delete"](),e=e.next,this.length--;if(n){null===i&&e===this.head&&(e=this.head.next);for(t=0;t<n.length;t++)i=new this.Node(n[t]),e.addBefore(i);this.length+=n.length}return r},f.prototype.reverse=function(){var e=this.head;do{var t=e.next;e.next=e.prev,e.prev=t,e=e.next}while(e!==this.head);return this},f.prototype.reduce=function(e,t,n){for(var r=this.head,i=r.next;i!==r;)t=e.call(n,t,i.value,i,this),i=i.next;return t},f.prototype.reduceRight=function(e,t,n){for(var r=this.head,i=r.prev;i!==r;)t=e.call(n,t,i.value,i,this),i=i.prev;return t},f.prototype.one=function(){if(this.head===this.head.next)throw Error("Can't get one value from empty list");return this.head.next.value},f.prototype.iterate=function(){return new l(this.head)},l.prototype.next=function(){if(this.at===this.head)throw StopIteration;var e=this.at.value;return this.at=this.at.next,e},f.prototype.Node=c,c.prototype["delete"]=function(){this.prev.next=this.next,this.next.prev=this.prev},c.prototype.addBefore=function(e){var t=this.prev;this.prev=e,e.prev=t,t.next=e,e.next=this},c.prototype.addAfter=function(e){var t=this.next;this.next=e,e.next=t,t.prev=e,e.prev=this},yt.module$exports&&(yt=yt.module$exports);var Et={},St=yt;Et.module$exports=h,h.prototype.getMapChangeDescriptor=function(){return this.mapChangeDescriptor||(this.mapChangeDescriptor={willChangeListeners:new St,changeListeners:new St}),this.mapChangeDescriptor},h.prototype.addMapChangeListener=function(e,t){this.makeObservable&&!this.dispatchMapChanges&&this.makeObservable();var n=this.getMapChangeDescriptor();(t?n.willChangeListeners:n.changeListeners).push(e),this.dispatchesMapChanges=!0},h.prototype.removeMapChangeListener=function(e,t){var n=this.getMapChangeDescriptor(),n=(t?n.willChangeListeners:n.changeListeners).findLast(e);if(!n)throw Error("Can't remove listener: does not exist.");n["delete"]()},h.prototype.dispatchMapChange=function(e,t,n){var r=this.getMapChangeDescriptor(),i="handleMap"+((n?"Will":"")+"Change");(n?r.willChangeListeners:r.changeListeners).forEach(function(n){var r=n,n=n[i]||n;n.call&&n.call(r,t,e,this)},this)},h.prototype.addBeforeMapChangeListener=function(e){return this.addMapChangeListener(e,!0)},h.prototype.removeBeforeMapChangeListener=function(e){return this.removeMapChangeListener(e,!0)},h.prototype.dispatchBeforeMapChange=function(e,t){return this.dispatchMapChange(e,t,!0)},Et.module$exports&&(Et=Et.module$exports);var xt={},Tt=st,Nt=Et,Ct=Y;xt.module$exports=p,Tt.addEach(p.prototype,Nt.prototype),Tt.addEach(p.prototype,Ct.prototype),p.prototype.addEach=function(e){e&&Tt(e)===e&&("function"==typeof e.forEach?"function"==typeof e.keys?e.forEach(function(e,t){this.set(t,e)},this):e.forEach(function(e){this.set(e[0],e[1])},this):Tt.keys(e).forEach(function(t){this.set(t,e[t])},this))},p.prototype.get=function(e,t){var n=this.store.get(new this.Item(e));return n?n.value:1<arguments.length?t:this.content(e)},p.prototype.set=function(e,t){var n=new this.Item(e,t),r=this.store.get(n),i=!1;return r?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,r.value),r.value=t):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,void 0),this.store.add(n)&&(this.length++,i=!0)),this.dispatchesMapChanges&&this.dispatchMapChange(e,t),i},p.prototype.add=function(e,t){return this.set(t,e)},p.prototype.has=function(e){return this.store.has(new this.Item(e))},p.prototype["delete"]=function(e){var t=new this.Item(e);if(this.store.has(t)){var n=this.store.get(t).value;return this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,n),this.store["delete"](t),this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0}return!1},p.prototype.clear=function(){this.store.clear(),this.length=0},p.prototype.reduce=function(e,t,n){return this.store.reduce(function(t,r){return e.call(n,t,r.value,r.key,this)},t,this)},p.prototype.reduceRight=function(e,t,n){return this.store.reduceRight(function(t,r){return e.call(n,t,r.value,r.key,this)},t,this)},p.prototype.keys=function(){return this.map(function(e,t){return t})},p.prototype.values=function(){return this.map(Function.identity)},p.prototype.items=function(){return this.map(function(e,t){return[t,e]})},p.prototype.equals=function(e,t){return t=t||Tt.equals,this===e?!0:Tt.can(e,"every")?e.length===this.length&&e.every(function(e,n){return t(this.get(n),e)},this):Tt.keys(e).length===this.length&&Tt.keys(e).every(function(n){return t(this.get(n),e[n])},this)},p.prototype.Item=function(e,t){this.key=e,this.value=t},xt.module$exports&&(xt=xt.module$exports);var kt={},Lt=_,At=xt,Ot=Y;kt.module$exports=d,Object.addEach(d.prototype,Lt.prototype),Object.addEach(d.prototype,At.prototype),Object.addEach(d.prototype,Ot.prototype),d.prototype.constructClone=function(e){return new this.constructor(e,this.mangle,this.content)},d.prototype.assertString=function(e){if("string"!=typeof e)throw new TypeError("key must be a string.")},d.prototype.get=function(e,t){this.assertString(e);var n="~"+e;return n in this.store?this.store[n]:1<arguments.length?t:this.content()},d.prototype.set=function(e,t){this.assertString(e);var n="~"+e;return n in this.store?(this.store[n]=t,!1):(this.length++,this.store[n]=t,!0)},d.prototype.has=function(e){return this.assertString(e),"~"+e in this.store},d.prototype["delete"]=function(e){return this.assertString(e),"~"+e in this.store?(delete this.store["~"+e],this.length--,!0):!1},d.prototype.clear=function(){for(var e in this.store)delete this.store[e];this.length=0},d.prototype.reduce=function(e,t,n){for(var r in this.store)t=e.call(n,t,this.store[r],r.slice(1),this);return t},d.prototype.one=function(){for(var e in this.store)return this.store[e];throw Error("Can't get one value from empty dictionary.")},kt.module$exports&&(kt=kt.module$exports);var Mt={},_t=kt,Dt=yt,Pt=_,Ht=D,Bt=j,jt=Y;Mt.module$exports=v,Object.addEach(v.prototype,Pt.prototype),Object.addEach(v.prototype,Ht.prototype),Object.addEach(v.prototype,jt.prototype),v.prototype.Buckets=_t,v.prototype.Bucket=Dt,v.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.content)},v.prototype.has=function(e){var t=this.contentHash(e);return this.buckets.get(t).has(e)},v.prototype.get=function(e){var t=this.contentHash(e),n=this.buckets;return n.has(t)?n.get(t).get(e):this.content(e)},v.prototype["delete"]=function(e){var t=this.contentHash(e),n=this.buckets;if(n.has(t)){var r=n.get(t);if(r["delete"](e))return this.length--,0===r.length&&n["delete"](t),!0}return!1},v.prototype.clear=function(){this.buckets.clear(),this.length=0},v.prototype.add=function(e){var t=this.contentHash(e),n=this.buckets;return n.has(t)||n.set(t,new this.Bucket(null,this.contentEquals)),n.get(t).has(e)?!1:(n.get(t).add(e),this.length++,!0)},v.prototype.reduce=function(e,t,n){return this.buckets.reduce(function(t,r){return r.reduce(function(t,r){return e.call(n,t,r,r,this)},t,this)},t,this)},v.prototype.one=function(){if(0===this.length)throw Error("Can't get one value from empty set.");return this.buckets.one().one()},v.prototype.iterate=function(){return this.buckets.values().flatten().iterate()},v.prototype.log=function(e,t,n,r){e=e||Bt.unicodeSharp,t=t||this.logNode,n||(n=console.log,r=console);var n=n.bind(r),i=this.buckets,s=i.keys();s.forEach(function(o,u){var a,f;u===s.length-1?(a=e.fromAbove,f=" "):(a=0===u?e.branchDown:e.fromBoth,f=e.strafe);var l=i.get(o);n.call(r,a+e.through+e.branchDown+" "+o),l.forEach(function(i,s){var o,u;s===l.head.prev?(o=e.fromAbove,u=" "):(o=e.fromBoth,u=e.strafe);var a;t(s,function(t){a?n.call(r,f+" "+u+"  "+t):(n.call(r,f+" "+o+e.through+e.through+t),a=!0)},function(t){n.call(r,f+" "+e.strafe+"  "+t)})})})},v.prototype.logNode=function(e,t){var n=e.value;Object(n)===n?JSON.stringify(n,null,4).split("\n").forEach(function(e){t(" "+e)}):t(" "+n)},Mt.module$exports&&(Mt=Mt.module$exports);var Ft={},It=Mt,qt=_,Rt=xt,Ut=Y;Ft.module$exports=m,Object.addEach(m.prototype,qt.prototype),Object.addEach(m.prototype,Rt.prototype),Object.addEach(m.prototype,Ut.prototype),m.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.content)},m.prototype.log=function(e,t){t=t||this.stringify,this.store.log(e,t)},m.prototype.stringify=function(e,t){return t+JSON.stringify(e.key)+": "+JSON.stringify(e.value)},Ft.module$exports&&(Ft=Ft.module$exports);var zt={},Wt=yt,Xt=Mt,Vt=_,$t=D,Jt=Y,Kt=rt;zt.module$exports=g,Object.addEach(g.prototype,Vt.prototype),Object.addEach(g.prototype,$t.prototype),Object.addEach(g.prototype,Jt.prototype),Object.addEach(g.prototype,Kt.prototype),g.prototype.Order=Wt,g.prototype.Store=Xt,g.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.content)},g.prototype.has=function(e){return e=new this.order.Node(e),this.store.has(e)},g.prototype.get=function(e){var t=new this.order.Node(e);return(t=this.store.get(t))?t.value:this.content(e)},g.prototype.add=function(e){var t=new this.order.Node(e);return this.store.has(t)?!1:(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([e],[],0),this.order.add(e),t=this.order.head.prev,this.store.add(t),this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([e],[],0),!0)},g.prototype["delete"]=function(e){var t=new this.order.Node(e);return this.store.has(t)?(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[e],0),t=this.store.get(t),this.store["delete"](t),t["delete"](),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange([],[e],0),!0):!1},g.prototype.one=function(){if(0===this.length)throw Error("Can't get one value from empty set.");return this.store.one().value},g.prototype.clear=function(){this.store.clear(),this.order.clear(),this.length=0},g.prototype.reduce=function(e,t,n){return this.order.reduce(function(t,r){return e.call(n,t,r,r,this)},t,this)},g.prototype.reduceRight=function(e,t,n){return this.order.reduceRight(function(t,r){return e.call(n,t,r,r,this)},t,this)},g.prototype.iterate=function(){return this.order.iterate()},g.prototype.log=function(){var e=this.store;return e.log.apply(e,arguments)},zt.module$exports&&(zt=zt.module$exports);var Qt={},Gt=zt,Yt=_,Zt=D,en=Y;Qt.module$exports=y,Object.addEach(y.prototype,Yt.prototype),Object.addEach(y.prototype,Zt.prototype),Object.addEach(y.prototype,en.prototype),y.prototype.constructClone=function(e){return new this.constructor(e,this.maxLength,this.contentEquals,this.contentHash,this.content)},y.prototype.has=function(e){return this.store.has(e)},y.prototype.get=function(e){return e=this.store.get(e),void 0!==e?(this.store["delete"](e),this.store.add(e)):e=this.content(),e},y.prototype.add=function(e){return this.store.has(e)&&(this.store["delete"](e),this.length--),this.store.add(e),this.length++,this.store.length>this.maxLength?(this.store["delete"](this.store.order.head.next.value),this.length--,!1):!0},y.prototype["delete"]=function(e){return this.store["delete"](e)?(this.length--,!0):!1},y.prototype.one=function(){if(0===this.length)throw Error("Can't get one value from empty collection.");return this.store.one()},y.prototype.clear=function(){this.store.clear(),this.length=0},y.prototype.reduce=function(e,t,n){return this.store.reduce(function(t,r){return e.call(n,t,r,r,this)},t,this)},y.prototype.reduceRight=function(e,t,n){return this.store.reduceRight(function(e,t){return callback.call(n,e,t,t,this)},basis,this)},y.prototype.iterate=function(){return this.store.iterate()},Qt.module$exports&&(Qt=Qt.module$exports);var tn={},nn=Qt,rn=_,sn=xt,on=Y;tn.module$exports=b,Object.addEach(b.prototype,rn.prototype),Object.addEach(b.prototype,sn.prototype),Object.addEach(b.prototype,on.prototype),b.prototype.constructClone=function(e){return new this.constructor(e,this.maxLength,this.contentEquals,this.contentHash,this.content)},b.prototype.log=function(e,t){t=t||this.stringify,this.store.log(e,t)},b.prototype.stringify=function(e,t){return t+JSON.stringify(e.key)+": "+JSON.stringify(e.value)},tn.module$exports&&(tn=tn.module$exports);var un={},an=zt,fn=_,ln=xt,cn=Y;un.module$exports=w,Object.addEach(w.prototype,fn.prototype),Object.addEach(w.prototype,ln.prototype),Object.addEach(w.prototype,cn.prototype),w.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.content)},w.prototype.log=function(e,t){t=t||this.stringify,this.store.log(e,t)},w.prototype.stringify=function(e,t){return t+JSON.stringify(e.key)+": "+JSON.stringify(e.value)},un.module$exports&&(un=un.module$exports);var hn={},pn=un;hn.module$exports=E,E.prototype=Object.create(pn.prototype),E.prototype.constructor=E,E.prototype.constructClone=function(e){return new this.constructor(e,this.bucket,this.contentEquals,this.contentHash)},E.prototype.set=function(e,t){var n=this.get(e);n.swap(0,n.length,t)},E.prototype.bucket=function(){return[]},hn.module$exports&&(hn=hn.module$exports);var dn={};dn.module$exports=S;var vn=Y,mn=rt;Object.addEach(S.prototype,_.prototype),Object.addEach(S.prototype,vn.prototype),Object.addEach(S.prototype,mn.prototype),S.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare,this.content)},S.prototype.has=function(e){var t=x(this.array,e,this.contentCompare);return 0<=t&&this.contentEquals(this.array[t],e)},S.prototype.get=function(e){var t=T(this.array,e,this.contentCompare,this.contentEquals);return-1!==t?this.array[t]:this.content(e)},S.prototype.add=function(e){var t;t=this.array;var n=this.contentCompare,r=x(t,e,n);if(0>r)t=-r-1;else{for(var i=t.length-1;r<i&&0===n(e,t[r+1]);)r++;t=r}return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([e],[],t),this.array.splice(t,0,e),this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([e],[],t),!0},S.prototype["delete"]=function(e){var t=T(this.array,e,this.contentCompare,this.contentEquals);return-1!==t?(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[e],t),this.array.splice(t,1),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange([],[e],t),!0):!1},S.prototype.indexOf=function(e){return T(this.array,e,this.contentCompare,this.contentEquals)},S.prototype.lastIndexOf=function(e){return N(this.array,e,this.contentCompare,this.contentEquals)},S.prototype.find=function(e){return T(this.array,e,this.contentCompare,this.contentEquals)},S.prototype.findLast=function(e){return N(this.array,e,this.contentCompare,this.contentEquals)},S.prototype.push=function(){this.addEach(arguments)},S.prototype.unshift=function(){this.addEach(arguments)},S.prototype.pop=function(){return this.array.pop()},S.prototype.shift=function(){return this.array.shift()},S.prototype.slice=function(){return this.array.slice.apply(this.array,arguments)},S.prototype.splice=function(e,t){return this.swap(e,t,Array.prototype.slice.call(arguments,2))},S.prototype.swap=function(e,t,n){if(void 0===e&&void 0===t)return[];e=e||0,0>e&&(e+=this.length),void 0===t&&(t=Infinity);var r=this.slice(e,e+t);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(n,r,e),this.array.splice(e,t),this.addEach(n),this.dispatchesRangeChanges&&this.dispatchRangeChange(n,r,e),r},S.prototype.reduce=function(e,t,n){return this.array.reduce(function(t,r,i){return e.call(n,t,r,i,this)},t,this)},S.prototype.reduceRight=function(e,t,n){return this.array.reduceRight(function(e,t,r){return callback.call(n,e,t,r,this)},basis,this)},S.prototype.min=function(){if(this.length)return this.array[0]},S.prototype.max=function(){if(this.length)return this.array[this.length-1]},S.prototype.one=function(){return this.array.one()},S.prototype.clear=function(){var e;this.dispatchesRangeChanges&&(e=this.array.slice(),this.dispatchBeforeRangeChange([],e,0)),this.length=0,this.array.clear(),this.dispatchesRangeChanges&&this.dispatchRangeChange([],e,0)},S.prototype.equals=function(e,t){return this.array.equals(e,t)},S.prototype.compare=function(e,t){return this.array.compare(e,t)},S.prototype.iterate=function(e,t){return new this.Iterator(this.array,e,t)},S.prototype.Iterator=Array.prototype.Iterator,dn.module$exports&&(dn=dn.module$exports);var gn={};gn.module$exports=C;var yn=dn,bn=D,wn=Y;C.prototype=Object.create(yn.prototype),C.prototype.constructor=C,Object.addEach(C.prototype,bn.prototype),Object.addEach(C.prototype,wn.prototype),C.prototype.add=function(e){return this.has(e)?!1:(yn.prototype.add.call(this,e),!0)},C.prototype.reduce=function(e,t,n){var r=this;return this.array.reduce(function(t,i,s){return e.call(n,t,i,i,r,s)},t)},C.prototype.reduceRight=function(e,t,n){var r=this;return this.array.reduceRight(function(t,i,s){return e.call(n,t,i,i,r,s)},t)},gn.module$exports&&(gn=gn.module$exports);var En={},Sn=gn,xn=_,Tn=xt,Nn=Y;En.module$exports=k,Object.addEach(k.prototype,xn.prototype),Object.addEach(k.prototype,Tn.prototype),Object.addEach(k.prototype,Nn.prototype),k.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare,this.content)},En.module$exports&&(En=En.module$exports);var Cn={};Cn.module$exports=L;var kn=D,Ln=Y,An=rt,On=j;Object.addEach(L.prototype,_.prototype),Object.addEach(L.prototype,kn.prototype),Object.addEach(L.prototype,Ln.prototype),Object.addEach(L.prototype,An.prototype),L.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare,this.content)},L.prototype.has=function(e){return this.root?(this.splay(e),this.contentEquals(e,this.root.value)):!1},L.prototype.get=function(e){return this.root&&(this.splay(e),this.contentEquals(e,this.root.value))?this.root.value:this.content(e)},L.prototype.add=function(e){var t=new this.Node(e);return this.root?(this.splay(e),!this.contentEquals(e,this.root.value))?(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([e],[],this.root.index),0>this.contentCompare(e,this.root.value)?(t.right=this.root,t.left=this.root.left,this.root.left=null):(t.left=this.root,t.right=this.root.right,this.root.right=null),this.root.touch(),t.touch(),this.root=t,this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([e],[],this.root.index),!0):!1:(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([e],[],0),this.root=t,this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([e],[],0),!0)},L.prototype["delete"]=function(e){if(this.root&&(this.splay(e),this.contentEquals(e,this.root.value))){var t=this.root.index;this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[e],t);if(this.root.left){var n=this.root.right;this.root=this.root.left,this.splay(e),this.root.right=n}else this.root=this.root.right;return this.length--,this.root&&this.root.touch(),this.dispatchesRangeChanges&&this.dispatchRangeChange([],[e],t),!0}return!1},L.prototype.indexOf=function(e){return this.root&&(this.splay(e),this.contentEquals(e,this.root.value))?this.root.index:-1},L.prototype.find=function(e){if(this.root&&(this.splay(e),this.contentEquals(e,this.root.value)))return this.root},L.prototype.findGreatest=function(e){if(this.root){for(e=e||this.root;e.right;)e=e.right;return e}},L.prototype.findLeast=function(e){if(this.root){for(e=e||this.root;e.left;)e=e.left;return e}},L.prototype.findGreatestLessThanOrEqual=function(e){if(this.root)return this.splay(e),this.root},L.prototype.findGreatestLessThan=function(e){if(this.root)return this.splay(e),this.root.getPrevious()},L.prototype.findLeastGreaterThanOrEqual=function(e){if(this.root)return this.splay(e),0===this.contentCompare(e,this.root.value)?this.root:this.root.getNext()},L.prototype.findLeastGreaterThan=function(e){if(this.root)return this.splay(e),this.contentCompare(e,this.root.value),this.root.getNext()},L.prototype.pop=function(){if(this.root){var e=this.findGreatest();return this["delete"](e.value),e.value}},L.prototype.shift=function(){if(this.root){var e=this.findLeast();return this["delete"](e.value),e.value}},L.prototype.push=function(){this.addEach(arguments)},L.prototype.unshift=function(){this.addEach(arguments)},L.prototype.slice=function(e,t){e=e||0,t=t||this.length,0>e&&(e+=this.length),0>t&&(t+=this.length);var n=[];if(this.root)for(this.splayIndex(e);this.root.index<t;){n.push(this.root.value);if(!this.root.right)break;this.splay(this.root.getNext().value)}return n},L.prototype.splice=function(e,t){return this.swap(e,t,Array.prototype.slice.call(arguments,2))},L.prototype.swap=function(e,t,n){if(void 0===e&&void 0===t)return[];e=e||0,0>e&&(e+=this.length),void 0===t&&(t=Infinity);var r=[];if(this.root){this.splayIndex(e);for(e=0;e<t;e++){r.push(this.root.value);var i=this.root.getNext();this["delete"](this.root.value);if(!i)break;this.splay(i.value)}}return this.addEach(n),r},L.prototype.splay=function(e){var t,n,r,i,s,o;if(this.root){t=n=r=new this.Node,o=new this.Node;for(s=this.root;;)if(i=this.contentCompare(e,s.value),0>i){if(!s.left)break;if(0>this.contentCompare(e,s.left.value)&&(i=s.left,s.left=i.right,s.touch(),i.right=s,i.touch(),s=i,!s.left))break;i=new A,i.right=s,i.left=o.left,o.left=i,r.left=s,r.touch(),r=s,s=s.left}else{if(!(0<i))break;if(!s.right)break;if(0<this.contentCompare(e,s.right.value)&&(i=s.right,s.right=i.left,s.touch(),i.left=s,i.touch(),s=i,!s.right))break;i=new A,i.left=s,i.right=o.right,o.right=i,n.right=s,n.touch(),n=s,s=s.right}n.right=s.left,n.touch(),r.left=s.right,r.touch(),s.left=t.right;for(s.right=t.left;o.left;)o.left.right.touch(),o.left=o.left.left;for(;o.right;)o.right.left.touch(),o.right=o.right.right;s.touch(),this.root=s}},L.prototype.splayIndex=function(e){if(this.root){for(var t=this.root,n=this.root.index;n!==e;)if(n>e&&t.left)t=t.left,n-=1+(t.right?t.right.length:0);else{if(!(n<e&&t.right))break;t=t.right,n+=1+(t.left?t.left.length:0)}return this.splay(t.value),this.root.index===e}return!1},L.prototype.reduce=function(e,t,n){return this.root&&(t=this.root.reduce(e,t,n,this)),t},L.prototype.reduceRight=function(e,t,n){return this.root&&(t=this.root.reduceRight(e,t,n,this)),t},L.prototype.min=function(e){if(e=this.findLeast(e))return e.value},L.prototype.max=function(e){if(e=this.findGreatest(e))return e.value},L.prototype.one=function(){if(!this.root)throw Error("Can't get one value from empty set");return this.root.value},L.prototype.clear=function(){var e;this.dispatchesRangeChanges&&(e=this.toArray(),this.dispatchBeforeRangeChange([],e,0)),this.root=null,this.length=0,this.dispatchesRangeChanges&&this.dispatchRangeChange([],e,0)},L.prototype.iterate=function(e,t){return new this.Iterator(this,e,t)},L.prototype.Iterator=O,L.prototype.summary=function(){return this.root?this.root.summary():"()"},L.prototype.log=function(e,t,n,r){e=e||On.unicodeRound,t=t||this.logNode,n||(n=console.log,r=console),n=n.bind(r),this.root&&this.root.log(e,t,n,n)},L.prototype.logNode=function(e,t){t(" "+e.value)},L.logCharsets=On,L.prototype.Node=A,A.prototype.reduce=function(e,t,n,r,i){return i=i||0,this.left&&(t=this.left.reduce(e,t,n,r,i+1)),t=e.call(n,t,this.value,this.value,r,this,i),this.right&&(t=this.right.reduce(e,t,n,r,i+1)),t},A.prototype.reduceRight=function(e,t,n,r,i){return i=i||0,this.right&&(t=this.right.reduce(e,t,n,r,i+1)),t=e.call(n,t,this.value,this.value,r,this,i),this.left&&(t=this.left.reduce(e,t,n,r,i+1)),t},A.prototype.touch=function(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0),this.index=this.left?this.left.length:0},A.prototype.checkIntegrity=function(){var e;e=1+(this.left?this.left.checkIntegrity():0),e+=this.right?this.right.checkIntegrity():0;if(this.length!==e)throw Error("Integrity check failed: "+this.summary());return e},A.prototype.getNext=function(){var e=this;if(e.right){for(e=e.right;e.left;)e=e.left;return e}},A.prototype.getPrevious=function(){var e=this;if(e.left){for(e=e.left;e.right;)e=e.right;return e}},A.prototype.summary=function(){var e=this.value||"-",e=e+(" <"+this.length);return!this.left&&!this.right?"("+e+")":"("+e+" "+(this.left?this.left.summary():"()")+", "+(this.right?this.right.summary():"()")+")"},A.prototype.log=function(e,t,n,r){var i=this,s;s=this.left&&this.right?e.intersection:this.left?e.branchUp:this.right?e.branchDown:e.through;var o;this.left&&this.left.log(e,t,function(t){o?r(e.strafe+" "+t):(o=!0,r(e.fromBelow+e.through+t))},function(e){r("  "+e)});var u;t(this,function(t){u?n((i.right?e.strafe:" ")+t):(u=!0,n(s+t))},function(t){r((i.left?e.strafe:" ")+t)});var a;this.right&&this.right.log(e,t,function(t){a?n("  "+t):(a=!0,n(e.fromAbove+e.through+t))},function(t){n(e.strafe+" "+t)})},O.prototype.next=function(){var e;e=this.prev?this.set.findLeastGreaterThan(this.prev.value):this.set.findLeast();if(!e)throw StopIteration;if(void 0!==this.end&&0<=this.set.contentCompare(e.value,this.end))throw StopIteration;return this.prev=e,e.value},Cn.module$exports&&(Cn=Cn.module$exports);var Mn={},_n=Cn,Dn=_,Pn=xt,Hn=Y;Mn.module$exports=M,Object.addEach(M.prototype,Dn.prototype),Object.addEach(M.prototype,Pn.prototype),Object.addEach(M.prototype,Hn.prototype),M.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare,this.content)},M.prototype.log=function(e,t){t=t||this.stringify,this.store.log(e,t)},M.prototype.report=function(e,t,n,r){r=r||this.stringify,this.store.report(e,t,n,r)},M.prototype.stringify=function(e,t,n,r){e.call(t,r+" "+n.value.key+": "+n.value.value)},Mn.module$exports&&(Mn=Mn.module$exports),e.List=yt,e.Set=zt,e.Map=un,e.MultiMap=hn,e.WeakMap=F,e.SortedSet=Cn,e.SortedMap=Mn,e.LruSet=Qt,e.LruMap=tn,e.SortedArray=dn,e.SortedArraySet=gn,e.SortedArrayMap=En,e.FastSet=Mt,e.FastMap=Ft,e.Dict=kt,e.Iterator=ct})(this)